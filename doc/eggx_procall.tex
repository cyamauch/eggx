\documentclass[a4paper]{article}
\usepackage{ascmac}
\usepackage[dvips]{graphicx}
\usepackage[dvipdfm]{color}
\usepackage[dvipdfm,bookmarks=true,bookmarksnumbered=true,bookmarkstype=toc]{hyperref}

\setlength{\topmargin}{-1.2cm}
\setlength{\oddsidemargin}{0cm}
\setlength{\evensidemargin}{0cm}
\setlength{\textheight}{23.8cm}
\setlength{\textwidth}{16cm}
\setlength{\arrayrulewidth}{0.1mm}
\def\syoshiki {\medskip {\small \fbox{書　式}}}
\def\rei      {\medskip {\small \raisebox{0.4mm}{\fbox{Example}}}~~}
\def\kino     {\hspace{0.32mm} \medskip {\small \raisebox{0.4mm}{\fbox{Description}}}~~}
\def\shiyorei {\medskip {\small \raisebox{0.4mm}{\fbox{Example}}}~~}
\def\shiyoho  {\medskip {\small \fbox{使用法}}}
\def\jikkorei {\medskip {\small \fbox{実行例}}}
\def\kanren   {\medskip {\small \fbox{関　連}}}
\def\bunrei   {\medskip {\small \fbox{文　例}}}
\def\gokansei {\medskip \hspace{-4.57mm}{\scriptsize \raisebox{0.6mm}{\fbox{Compatibility}}}~~}
\newcommand{\footnt}[1]{\footnote{$^)$~#1}$^{)}$}
\newenvironment{indention}[1]{\par
\addtolength{\leftskip}{#1}
\begingroup}{\endgroup\par}

\begin{document}
%\title{\vspace*{-5mm}{\large Easy and Gratifying Graphics library for X11}\\EGGX/ProCALL version 0.93}
%\author{Chisato Yamauchi{\tiny ~}%
%\footnote{$^)$~http://www.ir.isas.jaxa.jp/$^\sim$cyamauch/}%
%}
%\date{Jan.31,2010}
%\maketitle

\thispagestyle{empty}

\vspace*{0.2cm}

\begin{center}
{\it \Large Easy and Gratifying Graphics Library for X11 }
\end{center}

\vspace*{-0.3cm}

\begin{center}
{\bf \huge EGGX/ProCALL version 0.93}
\end{center}

\begin{center}
{\bf \LARGE User's Guide}
\end{center}


\vspace*{0.1cm}

\begin{center}
{\Large \it Presented by Chisato Yamauchi, Mar. 5, 2010}
\end{center}

\begin{center}
{\it Translated by
Space Engineering Development Co.,LTD. and
Sakura Academia Corporation
}
\end{center}


\vspace*{3mm}

\begin{center}
%\includegraphics[scale=0.25]{sshot_coaster.eps3}
%\includegraphics[scale=0.25]{sshot_ship.eps3}
\includegraphics[scale=0.55]{sshot_ex1.eps3}
\end{center}

\vspace*{0mm}

\begin{center}
%\begin{tabular}{|l|}
%\hline
%表紙のスクリーンショットは，京都産業大学コンピュータ理工学部の安田様が担当\\
%された「基礎プログラミング」演習の学生さんによる最終課題優秀作品です．\\
%\hline
%\end{tabular}
\begin{tabular}{|l|}
\hline
The screenshots on the cover were made with the codes written by Dr. Matsuda (Tokyo Denki University)\\
and Mr.Yasuda (Kyoto Sangyo University). \\
\hline
\end{tabular}
\end{center}

\clearpage

\section*{Gallery}


\begin{center}
\includegraphics[scale=0.270]{remosen.eps3}\\
A viewer for remote-sensing by Dr. Sasai (Nagoya University).\\
~\\
\includegraphics[scale=0.535]{sshot_loupe.eps3}\\
An example program ``loupe.c''.
\end{center}

\clearpage

\vspace*{-2mm}

\begin{center}
\includegraphics[scale=0.65]{sshot_demomesh.eps3}
\includegraphics[scale=0.65]{sshot_sphere.eps3}\\
\includegraphics[scale=0.38]{sshot_wave.eps3}
\includegraphics[scale=0.65]{sshot_snowfalls.eps3}\\
\includegraphics[scale=0.39]{sshot_3body.eps3}
\includegraphics[scale=0.65]{sshot_particles.eps3}\\
Academic example programs by Dr. Matsuda (Tokyo Denki University).
\end{center}

\clearpage

%
\section{INTRODUCTION}

\subsection{ABOUT EGGX/ProCALL}

%これを未だに愛用されている方はどのくらいいらっしゃ
%るのかはわかりませんが，
%今や IBM PC/AT互換機の勢力で NECのPC-9801シリーズのマシンは次第に使わ
%れなくなり，廃棄される一方で将来は使えなくなっていくかもしれません．
%そんな中，どうしても Pro-FORTRANのグラフィックス機能を使いたいという強い要
%望になんとか答えようと作られたのがこのPROCALLです．
%EGGX/ProCALL (えっぐえっくす/ぷろこーる) は
%{\bf 究極の簡単さ}」を目指して作り上げた
%簡素なグラフィックスライブラリです．
%C言語かFORTRANから各種関数(サブルーチン)を利用する事ができ，
%ファミコンを贅沢にしたようなグラフィックス機能を，
%N88-BASICのような感覚で操作する事ができます．
%EGGX/ProCALL は1つのライブラリですが，
%Cの関数群を``EGGX''(\S\ref{eggx})，
%FORTRANのルーチン群を``ProCALL''(\S\ref{procall})
%と呼んでいます．
%とにかく「簡単」に使えて，「8ビットマシンのBASICのような楽しさ」を
%これからプログラミングを始める方々に伝えることができれば，
%と考えて作成したもので，特に初等プログラミング教育には
%最適なライブラリの1つとなるでしょう．
%
%EGGX/ProCALL は単純なライブラリですから，
%専用のランタイムファイルの導入は一切不要です．
%もちろん，ユーザが作成した実行ファイルは，
%立派なアプリケーション・ソフトウェアになります．
%また，X11関連のライブラリはXlibしか使っていませんから，
%インストールも容易です．

EGGX/ProCALL is a simple graphics library developed to achieve {\bf extreme simplicity}.
It can be called from C or FORTRAN, and has almost the same graphics functions as classical BASIC.
We call the group of C functions ``EGGX''(\S\ref{eggx}) and the group of FORTRAN subroutines ``ProCALL''(\S\ref{procall}).
We have created this library out of our desire to deliver simple usability and the fun that we had when using BASIC in the age of the 8-bit machine to whoever starts to learn programming. 
This will become one of the optimum libraries especially for elementary programming education.

Since EGGX/ProCALL is a simple library, you do not need to install any dedicated runtime files.
Naturally, executable files created by users become real application software.
Installation is simple because the library uses only Xlib as X11-related libraries.

\subsection{FEARTURES OF EGGX/ProCALL}

%ユーザ関数の簡単さは常識破りです．
%ウィンドゥサイズだけを引数とする
%「たった1つの関数」を呼ぶだけで，
%X Window上でウィンドゥを開いて，即
%グラフィックス関数が扱えます．
%ウィンドゥが隠れた場合の再描画はライブラリ側がやってくれますから，
%ユーザは扱いが面倒なイベントを気にする必要がないので，
%描画関数を並べるだけで簡単に絵を描くことができます．
%例えば，数値計算のコードに若干の描画関数を挟み込んで，
%デバッグ時などに必要な時だけ計算させながらその様子
%をモニターする，といった事も容易です．
Simplicity of user functions is by far the best. You can open a window on X Window and use graphics functions immediately by calling ``only one function''.
Users can draw an image by only listing drawing functions without worrying about complicated events, because redrawing is done by the library when a window is hidden.
For example, it is easy to insert some drawing functions to a code of numerical calculation and monitor its condition during calculation only when necessary upon debugging.

%任意のサイズで複数のグラフィックス用ウィンドゥをオープンし，
%24ビットでのカラー指定が可能な線,点,多角形,円などの描画，
%フォントセットの描画(半角・全角混在の文字列もそのまま描画可能)，
%数値計算の可視化に必要な種々の矢印の描画，
%カラーバーの生成(約50種類)，
%背景透過処理が可能な24ビット画像の転送機能・
%画面スクロール機能(ファミコン等のスプライトとハードウェアスクロールに相当)，
%レイヤ機能(PC-9801のV-RAMの2プレーンに相当)によるスムーズな
%アニメーション，
%ggetch()関数(\S \ref{ggetch})を使った
%キー入力読み込み(N88-BASICのINKEY\$に相当)，
%ggetevent()関数(\S \ref{ggetevent})を使ったマウス・キー入力読み込み
%が可能です．
With this library, it is possible to open multiple graphics windows of any size, to draw lines, points, polygons, and circles whose colors can be specified in 24 bits, to draw font sets (a string containing one- and two-byte characters can be drawn as it is), to draw various arrows needed for visualization of numerical calculation, to generate (about 50 kinds of) color bars, to transfer 24-bit images whose background can be transparent, to scroll a screen (corresponding to the splite and the hardware scroll of video games), to generate smooth animation using the layer function (corresponding to 2 plain of V-RAM of old PCs), to have key input %(corresponding to INKEY\$ of N88-BASIC) 
by using {\tt ggetch()} (\S \ref{ggetch}), and to have mouse and key input by using {\tt ggetevent()} (\S \ref{ggetevent}).

%もうおわかりかと思いますが，
%24ビットカラーが使えて，アニメーションができるとなれば，
%現代の2Dグラフィックスに必要な基本要素は十分に整っているというわけ
%です．あとは，ユーザのプログラミング次第で，
%いくらでも派手な数値計算の可視化やゲーム等を作る事が可能です．
As you may understand, the availability of 24-bit colors and animation means that this library has enough basic elements for today's 2D graphics. You can visualize numerical calculation or games, etc. in any fancy manner, depending on your programming.


%また，netpbm%
%\footnt{http://sourceforge.net/projects/netpbm/}
%の各種コマンド，
%ImageMagick%
%\footnt{http://www.imagemagick.org/}
%のconvertコマンドを通して様々なフォーマットの画像を
%読み書きするめの関数が用意されており，
%これらを活用すれば画像閲覧ツールや動画作成ツールなどが簡単に作れます．
Additionally, specific functions are prepared to save images continuously in various formats through various commands of netpbm
\footnt{http://sourceforge.net/projects/netpbm/}
, or the convert command of ImageMagick
\footnt{http://www.imagemagick.org}.
Since a lot of frame images can be created at once by using these functions, gif animations and mpeg movies can be created easily.


%さらに，Version 0.91以降では，
%スクロールバー・インタフェースを提供するようになり，
%ディスプレイに収まりきらないような
%大きな画素サイズの画像を容易に扱えるようになりました．
Furthermore, the scrollbar interface is offered since Version 0.91, so you can easily handle images whose size is too large to fit into a display.


%商用のXサーバ(例えばXsunやSGIのX端末)のように複数のVisualを持つ
%Xサーバにも対応し，
%デフォルトがPseudoColorでもEGGX/ProCALLではTrueColor Visualで
%ウィンドゥを開くようになっています．
%Sunのワークステーションのように
%商用Xサーバ+Pseudo Visualなアプリケーションをベースとした環境でも
%スムーズに導入できます．

\subsection{INFORMATION ABOUT EGGX/ProCALL}

%EGGX/ProCALL のWebページ:\\
%~~~~\verb|http://www.ir.isas.jaxa.jp/~cyamauch/eggx_procall/|\\
%では，サンプルプログラムやリリース情報の他，
%派生ライブラリや情報教育等での活用についてまとめています．
%目的に応じてご利用ください．
EGGX/ProCALL Web page:\\
~~~~\verb|http://www.ir.isas.jaxa.jp/~cyamauch/eggx_procall/|\\
Sample programs, release informations, derived libraries and applications in informational education are available on this web page. Please use it in accordance with your purpose.


%
%このライブラリを作り始めた当初は，
%NECのパーソナルコンピュータ・PC-9801上で動作する
%「Pro-FORTRAN」というGKS，カルコンプコンパチブルのグラフィックスルーチ
%ンが扱えるFORTRANコンパイラと互換となるように作成していました．
%格好悪い「ProCALL」という名前はこの Pro-FORTRAN が由来です．
%しかし現在では，FORTRANは廃れた言語となってしまいました．
%ソフトウェア開発の主流は，柔軟性に富むC，C++です．
%また，数値計算の分野では，いまだにFORTRANが多く使われているようですが，
%コーディングレベルでのアルゴリズムの考案を伴った
%新しいスキームの開発は，FORTRANの言語仕様では難しいと予測
%されます(FORTRAN9xという新しいFORTRANがありますが，
%大半の利用者の頭脳はFORTRAN77から進化していないので，
%FORTRAN77が実質の言語仕様になっていると思われます)．
%数値計算技術の未来は，C，C++が支えていくことでしょう．

%EGGX/ProCALLもCから使った方が，いくつかの点において好都合です
%(もちろん，EGGX/ProCALLはCで書いています)．
%EGGX の関数には，ProCALLでは使えないいくつかの便利な機能があります．
%今，プログラミングを始めたばかりの方々は，
%C言語をターゲットにする事をお勧めします．

%EGGXでは，有名なウィンドゥマネージャである
%AfterStep，WindowMaker の本格的なアプレットが
%きわめて簡単に作成できます．
%EGGXの拡張関数で，アプレット用に初期化するように設定すると，
%ドックに入れるためのウィンドゥ属性をライブラリ側で設定します．
%例えば，デジタル時計程度のもの
%であれば，わずか数十行で作れてしまうほどの簡単さを提供しています．

%
%
%cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
%
%CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
%
\clearpage
%
\section{C}
%
\subsection{TUTORIAL}

\subsubsection{Basic Usage}
%
%ユーザプログラムの冒頭で，\\
%\verb|　　#include <eggx.h>|\\
%と宣言します%
%\footnt{本格的なソフトウェア開発でEGGXを利用する場合は，
%{\tt eggxlib.h}を利用する事をお勧めします．
%\S \ref{eggxlib.h}をご覧ください．}%
%．
%C標準関数と同じようにEGGXの関数を使って
%プログラムを書き，コンパイルは {\tt egg} コマンドを用います．
In the beginning of the user's program declare as follows%
\footnt{We recommend the use of {\tt eggxlib.h} when using EGGX in developing full-fledged software.
See \S\ref{eggxlib.h}.}
:\\
\verb|   #include <eggx.h>|\\

Write a program using EGGX functions just like you would with C standard functions and compile using the egg command.


\rei {\verb|egg program.c -o program|}

\subsubsection{Sample Program}

%EGGXを使って円を描くプログラムを示します．
A program to draw a circle using EGGX is shown below:

\vspace*{-5.0mm}
\begin{center}
%\renewcommand{\arraystretch}{0.95}
\begin{tabular}{|l|}
\hline
%\verb|#include <eggx.h>                     /* EGGXを使う時に必要 */ |\\
%\verb| |\\
%\verb|int main()|\\
%\verb|{|\\
%\verb|    int win;                          /* ウィンドゥ番号を格納する変数 */|\\
%\verb|    win = gopen(640,400);             /* |{\small \tt 640x400ピクセルのグラフィックス用ウィンドゥを開く~}\verb|*/ |\\
%\verb|    circle(win, 280, 180, 110, 110);  /* 中心(280,180)，半径110の円を描く */|\\
%\verb|    ggetch();                         /* キー入力があるまで待つ */   |\\
%\verb|    gclose(win);                      /* グラフィックス用ウィンドゥを閉じる */|\\
%\verb|    return 0;                         /* 終了 */|\\
%\verb|}|\\
\verb|#include <eggx.h>                     /* necessary to use EGGX*/|\\
\verb|int main()|\\
\verb|{|\\
\verb|    int win;                          /* variable to store window index*/|\\
\verb|    win = gopen(640,400);             /* open 640x400 dot window for graphics*/|\\
\verb|    circle(win, 280, 180, 110, 110);  /* |{\small \tt draw the circle with center(280,180) and radius 110}\verb| */|\\
\verb|    ggetch();                         /* wait until key input*/|\\
\verb|    gclose(win);                      /* close the window for graphics*/|\\
\verb|    return 0;                         /* end*/|\\
\verb|}|\\
\hline
\end{tabular}
\end{center}

%ウィンドゥを開き，ウィンドゥ中央より少し左下に円を描きます．
%ウインドゥを閉じる前に{\tt ggetch()}を使っていますが，
%これはプログラムが一瞬で終わってしまわないようにするためのものです．
It opens a window and draws a circle in the lower left slightly down from the center of the window.
To prevent the program from finishing in a blink of an eye, {\tt ggetch()} is used before the window is closed.


%次の絵は，実行結果のスクリーンショットです．
The following picture is the screenshot of the result.

\begin{center}
\includegraphics[scale=0.91]{example_circ.eps}
\end{center}

%デフォルトではこのように，ウィンドゥの左下が座標系の原点となっています．
%例では円を描きましたが，点，線，多角形，シンボル，文字等も
%同じようにウィンドゥ番号と座標を与えて描画します．
The origin of the coordinate system is the bottom-left corner of the window by default.
Points, lines, polygons, symbols, and strings can be drawn by specifying the window index and the coordinate in the same way as this example.



\subsection{EGGX FUNCTIONS LIST}
\label{eggx}

\subsubsection{Standard Functions}
%
%\vspace*{-0.2mm}
\begin{center}
%
%\renewcommand{\arraystretch}{0.90}
%\begin{tabular}{lll}
{\small
\begin{tabular}{p{3zw}p{9zw}p{36zw}}
 \hline
 Section & Function & Description   \\
 \hline
 \S\ref{gopen}&
   gopen &
   Open a graphics screen of any size
   \\ %\hline
 \S\ref{gclose} &
   gclose &
   Close a window for graphics 
   \\ %\hline
 \S\ref{gcloseall} &
   gcloseall &
   Close all windows for graphics and disconnect from the X server
   \\ %\hline
 \S\ref{gresize} &
   gresize &
   Resize the graphics drawing area
   \\ %\hline
 \S\ref{winname} &
   winname &
   Change the title of a window
   \\ %\hline
 \S\ref{coordinate} &
   coordinate &
   Change the application coordinate system (set the reference point and the scale)
   \\ %\hline
 \S\ref{window} &
   window &
   Change the application coordinate system (set the the bottom-left and the top-right coordinates)
   \\ %\hline
 \S\ref{layer} &
   layer  &
   Configure a layer
   \\ %\hline
 \S\ref{copylayer} &
   copylayer &
   Copy a layer
   \\ %\hline
 \S\ref{gsetbgcolor} &
   gsetbgcolor &
   Set the background color (in gclr) of a window 
   \\ %\hline
 \S\ref{gclr} &
   gclr &
   Clear the drawing layer
   \\ %\hline
 \S\ref{tclr} &
   tclr &
   Clear a terminal screen
   \\ %\hline
 \S\ref{newpen} &
   newpen &
   Change a drawing color (16 colors)
   \\ %\hline
 \S\ref{newcolor} &
   newcolor &
   Change a drawing color (set a color contained on the X server directly)
   \\ %\hline
 \S\ref{newrgbcolor} &
   newrgbcolor &
   Change a drawing color (set the brightness of Red, Green, Blue)
   \\ %\hline
 \S\ref{newhsvcolor} &
   newhsvcolor &
   Change a drawing color (set Hue, Saturation, Value)
   \\ %\hline
 \S\ref{makecolor} &
   makecolor &
   Generate a color from a variables (generate a color bar)
   \\ %\hline
 \S\ref{newlinewidth} &
   newlinewidth &
   Change line width
   \\ %\hline
 \S\ref{newlinestyle} &
   newlinestyle &
   Change the line style
   \\ %\hline
 \S\ref{newgcfunction} &
   newgcfunction &
   Change the GC function
   \\ %\hline
 \S\ref{pset} &
   pset &
   Draw a point 
   \\ %\hline
 \S\ref{drawline} &
   drawline &
   Draw a line 
   \\ %\hline
 \S\ref{lineto} &
   moveto, lineto &
   Draw a line continuously
   \\ %\hline
 %line & 連続的に直線を描く
 %& \S\ref{line}
 % \\ %\hline
 \S\ref{drawpts} &
   drawpts &
   Draw points
   \\ %\hline
 \S\ref{drawlines} &
   drawlines &
   Draw a polygonal line
   \\ %\hline
 \S\ref{drawpoly} &
   drawpoly &
   Draw a polygon
   \\ %\hline
 \S\ref{fillpoly} &
   fillpoly &
   Fill a polygon
   \\ %\hline
 \S\ref{drawrect} &
   drawrect &
   Draw a rectangle
   \\ %\hline
 \S\ref{fillrect} &
   fillrect &
   Fill a rectangle
   \\ %\hline
 \S\ref{drawcirc} &
   drawcirc, circle &
   Draw a circle by specifying the center coordinate and the radius
   \\ %\hline
 \S\ref{fillcirc} &
   fillcirc &
   Fill a circle by specifying the center coordinate and the radius
   \\ %\hline
 \S\ref{drawarc} &
   drawarc &
   Draw an arc by specifying the center and radius of a circle and the angle of the starting point and the ending point
   \\ %\hline
 \S\ref{fillarc} &
   fillarc &
   Fill an arc by specifying the center and radius of a circle and the angle of the starting point and the ending point
   \\ %\hline
 \S\ref{drawsym} &
   drawsym &
   Draw a symbol 
   \\ %\hline
 \S\ref{drawsyms} &
   drawsyms &
   Draw symbols
   \\ %\hline
 \S\ref{drawarrow} &
   drawarrow &
   Draw various types of arrows
   \\ %\hline
 \S\ref{newfontset} &
   newfontset &
   Specify a font set (Japanese font)
   \\ %\hline
 \S\ref{drawstr} &
   drawstr &
   Draw a string
   \\ %\hline

 \S\ref{gscroll} &
   gscroll &
   Scroll the drawing layer in pixel unit
   \\ %\hline

 \S\ref{gputarea} &
   gputarea &
   Copy an image in any window, layer, and area to the drawing layer
   \\ %\hline

 \S\ref{gputimage} &
   gputimage &
   Transfer images data (with a mask) in a memory buffer to the drawing layer collectively
   \\ %\hline

 \S\ref{ggetimage} &
   ggetimage &
   Load image data in any window, layer, and area  to a  memory
   \\ %\hline

 %putimg24 & バッファに用意した画像をウィンドゥに一括転送する
 %& \S\ref{putimg24}
 % \\ %\hline
 %putimg24m & {\small バッファに用意したマスク付き画像をウィンドウに一括転送する(背景透過処理が可能)}
 %& \S\ref{putimg24m}
 % \\ %\hline

 \S\ref{gsaveimage} &
   gsaveimage &
   {\small Save an image in any window, layer, and area to a file through a converter}
   \\ %\hline

 \S\ref{readimage} &
   readimage &
   {\small Load image data in a file to a memory buffer through a converter (netpbm, etc.)}
   \\ %\hline
 \S\ref{writeimage} &
   writeimage &
   {\small Save image data in a memory buffer to a file through a converter (netpbm, etc.)}
   \\ %\hline

 \S\ref{gsetnonblock} &
   gsetnonblock &
   Configure the operating mode of {\tt ggetch()}, {\tt ggetevent()} and {\tt ggetxpress()}
   \\ %\hline
 \S\ref{ggetch} &
   ggetch &
   Return a character inputted from the keyboard
   \\ %\hline
 \S\ref{ggetevent} &
   ggetevent &
   Return input information from the mouse or the keyboard
   \\ %\hline
 \S\ref{ggetxpress} &
   ggetxpress &
   Return information of clicking mouse buttons or input from the keyboard
   \\ %\hline
 \S\ref{msleep} &
   msleep &
   Wait an execution in milliseconds
   \\ %\hline
% \S\ref{gopen}&
%   gopen &
%   任意のサイズのグラフィックス用ウィンドゥを開く 
%   \\ %\hline
% \S\ref{gclose} &
%   gclose &
%   任意のグラフィックス用ウィンドゥを閉じる 
%   \\ %\hline
% \S\ref{gcloseall} &
%   gcloseall &
%   すべてのグラフィックス用ウィンドゥを閉じ，Xサーバと接続を断つ
%   \\ %\hline
% \S\ref{gresize} &
%   gresize &
%   グラフィックス描画領域のサイズ変更を行なう
%   \\ %\hline
% \S\ref{winname} &
%   winname &
%   ウィンドゥのタイトルを変更する
%   \\ %\hline
% \S\ref{coordinate} &
%   coordinate &
%   アプリケーション座標系の変更(参照点の座標とスケールを与える)
%   \\ %\hline
% \S\ref{window} &
%   window &
%   アプリケーション座標系の変更(左下と右上の座標を与える)
%   \\ %\hline
% \S\ref{layer} &
%   layer  &
%   レイヤの設定を行う
%   \\ %\hline
% \S\ref{copylayer} &
%   copylayer &
%   レイヤのコピーを行う
%   \\ %\hline
% \S\ref{gsetbgcolor} &
%   gsetbgcolor &
%   ウィンドゥのバックグラウンドカラー(gclrでの色)を指定する 
%   \\ %\hline
% \S\ref{gclr} &
%   gclr &
%   描画レイヤの全消去
%   \\ %\hline
% \S\ref{tclr} &
%   tclr &
%   端末画面の消去
%   \\ %\hline
% \S\ref{newpen} &
%   newpen &
%   描画色(16色)の変更
%   \\ %\hline
% \S\ref{newcolor} &
%   newcolor &
%   描画色の変更(Xサーバの持つ色を直接指定)
%   \\ %\hline
% \S\ref{newrgbcolor} &
%   newrgbcolor &
%   描画色の変更(Red,Green,Blueの輝度を指定)
%   \\ %\hline
% \S\ref{newhsvcolor} &
%   newhsvcolor &
%   描画色の変更(Hue,Saturation,Valueを指定)
%   \\ %\hline
% \S\ref{makecolor} &
%   makecolor &
%   変数からカラーを生成する(カラーバー生成)
%   \\ %\hline
% \S\ref{newlinewidth} &
%   newlinewidth &
%   線幅の変更
%   \\ %\hline
% \S\ref{newlinestyle} &
%   newlinestyle &
%   線のスタイルの変更
%   \\ %\hline
% \S\ref{newgcfunction} &
%   newgcfunction &
%   GCファンクションの変更
%   \\ %\hline
% \S\ref{pset} &
%   pset &
%   点の描画 
%   \\ %\hline
% \S\ref{drawline} &
%   drawline &
%   直線の描画 
%   \\ %\hline
% \S\ref{lineto} &
%   moveto, lineto &
%   連続的に直線を描く
%   \\ %\hline
% %line & 連続的に直線を描く
% %& \S\ref{line}
% % \\ %\hline
% \S\ref{drawpts} &
%   drawpts &
%   複数の点を描く
%   \\ %\hline
% \S\ref{drawlines} &
%   drawlines &
%   折れ線を描く
%   \\ %\hline
% \S\ref{drawpoly} &
%   drawpoly &
%   多角形を描く
%   \\ %\hline
% \S\ref{fillpoly} &
%   fillpoly &
%   多角形を塗り潰す
%   \\ %\hline
% \S\ref{drawrect} &
%   drawrect &
%   長方形を描く
%   \\ %\hline
% \S\ref{fillrect} &
%   fillrect &
%   長方形の領域を塗り潰す
%   \\ %\hline
% \S\ref{drawcirc} &
%   drawcirc, circle &
%   中心座標，半径を与えて円を描く
%   \\ %\hline
% \S\ref{fillcirc} &
%   fillcirc &
%   中心座標，半径を与えて円を塗り潰す
%   \\ %\hline
% \S\ref{drawarc} &
%   drawarc &
%   円の中心，半径，始点，終点の角度を与えて円弧を描く
%   \\ %\hline
% \S\ref{fillarc} &
%   fillarc &
%   円の中心，半径，始点，終点の角度を与えて円弧を塗り潰す
%   \\ %\hline
% \S\ref{drawsym} &
%   drawsym &
%   1個のシンボルの描画 
%   \\ %\hline
% \S\ref{drawsyms} &
%   drawsyms &
%   複数のシンボルを描く
%   \\ %\hline
% \S\ref{drawarrow} &
%   drawarrow &
%   種々の矢印の描画
%   \\ %\hline
% \S\ref{newfontset} &
%   newfontset &
%   フォントセット(日本語フォント)の指定
%   \\ %\hline
% \S\ref{drawstr} &
%   drawstr &
%   文字列の描画
%   \\ %\hline
%
% \S\ref{gscroll} &
%   gscroll &
%   ピクセル単位で描画レイヤをスクロールする
%   \\ %\hline
%
% \S\ref{gputarea} &
%   gputarea &
%   任意のウィンドゥ・レイヤ・領域の画像を描画レイヤにコピーする
%   \\ %\hline
%
% \S\ref{gputimage} &
%   gputimage &
%   メモリバッファの(マスク付き)画像データを描画レイヤに一括転送する
%   \\ %\hline
%
% \S\ref{ggetimage} &
%   ggetimage &
%   任意のウィンドゥ・レイヤ・領域の画像データをメモリバッファに取り込む
%   \\ %\hline

 %putimg24 & バッファに用意した画像をウィンドゥに一括転送する
 %& \S\ref{putimg24}
 % \\ %\hline
 %putimg24m & {\small バッファに用意したマスク付き画像をウィンドウに一括転送する(背景透過処理が可能)}
 %& \S\ref{putimg24m}
 % \\ %\hline

% \S\ref{gsaveimage} &
%   gsaveimage &
%   {\small 任意のウィンドゥ・レイヤ・領域の画像をコンバータを通してファイルに保存する}
%   \\ %\hline
%
% \S\ref{readimage} &
%   readimage &
%   {\small ファイルの画像データをコンバータ(netpbm等)を通してメモリバッファに取り込む}
%   \\ %\hline
% \S\ref{writeimage} &
%   writeimage &
%   {\small メモリバッファの画像データをコンバータ(netpbm等)を通してファイルに保存する}
%   \\ %\hline
%
% \S\ref{gsetnonblock} &
%   gsetnonblock &
%   {\tt ggetch()}，{\tt ggetevent()}，{\tt ggetxpress()}の動作モードを設定する
%   \\ %\hline
% \S\ref{ggetch} &
%   ggetch &
%   キーボードから入力された文字を返す
%   \\ %\hline
% \S\ref{ggetevent} &
%   ggetevent &
%   マウスやキーボードからの入力の情報を返す
%   \\ %\hline
% \S\ref{ggetxpress} &
%   ggetxpress &
%   マウスからのボタンクリック，キーボードからの入力の情報を返す
%   \\ %\hline
% \S\ref{msleep} &
%   msleep &
%   ミリ秒単位で実行を延期する
%   \\ %\hline
 \hline
\end{tabular}
}
\end{center}
%
%\clearpage

\subsubsection{Advanced Functions (for Intermediate/Expert Users)}
%
\begin{center}
%\renewcommand{\arraystretch}{0.95}
%\begin{tabular}{lll}
{\small
\begin{tabular}{p{3zw}p{9zw}p{36zw}}
 \hline
 Section & Function & Description   \\
 \hline
 \S\ref{ggetdisplayinfo} &
   ggetdisplayinfo & 
   Get information on the X server (depth and screen size)
   \\ %\hline
 \S\ref{gsetnonflush} &
   {\small gsetnonflush, ggetnonflush} &
   Configure the flush in drawing functions 
   \\ %\hline
 \S\ref{gflush} &
   gflush & 
   Flush drawing commands 
   \\ %\hline
 \S\ref{gsetinitialattributes} &
   gsetinitialattributes &
   Set the attributes of the windows opened with {\tt gopen()} 
   \\ %\hline
 \S\ref{ggetinitialattributes} &
   ggetinitialattributes &
   Get the attributes of the windows opened with {\tt gopen()} 
   \\ %\hline
 \S\ref{gsetinitialbgcolor} &
   gsetinitialbgcolor &
   Set the background color of the windows opened with {\tt gopen()} 
   \\ %\hline
 \S\ref{gsetborder} &
   gsetborder & 
   Set the width and color of window borders 
   \\ %\hline
 \S\ref{gsetinitialborder} &
   gsetinitialborder &
   Set the borders of the windows opened with {\tt gopen()} 
   \\ %\hline
 \S\ref{gsetinitialgeometry} &
   gsetinitialgeometry &
   {\small Set appearance position and other attributes of the windows opened with {\tt gopen()} from a string including x and y values}
   \\ %\hline
 \S\ref{gsetinitialwinname} &
   gsetinitialwinname &
   {\small Set a window name, an icon name, a resource name, and a class name of the windows opened with {\tt gopen()}}
   \\ %\hline
 \S\ref{gsetscrollbarkeymask} &
   gsetscrollbarkeymask &
   {\small Set a keymask for the key operation of EGGX's scrollbar} 
   \\ %\hline
 \S\ref{generatecolor} &
   generatecolor &
   {\small Generate a color from variables (contrast, brightness and gamma can be modified)}
   \\
% \S\ref{ggetdisplayinfo} &
%   ggetdisplayinfo & 
%   Xサーバの情報(depth,画面サイズ)を取得する
%   \\ %\hline
% \S\ref{gsetnonflush} &
%   {\small gsetnonflush, ggetnonflush} &
%   描画関数等におけるフラッシュに関する設定 
%   \\ %\hline
% \S\ref{gflush} &
%   gflush & 
%   描画命令等をフラッシュする 
%   \\ %\hline
% \S\ref{gsetinitialattributes} &
%   gsetinitialattributes &
%   {\tt gopen()}でのウィンドゥ属性を変更する 
%   \\ %\hline
% \S\ref{ggetinitialattributes} &
%   ggetinitialattributes &
%   {\tt gopen()}でのウィンドゥ属性を取得する
%   \\ %\hline
% \S\ref{gsetinitialbgcolor} &
%   gsetinitialbgcolor &
%   {\tt gopen()}での背景カラーを指定する 
%   \\ %\hline
% \S\ref{gsetborder} &
%   gsetborder & 
%   ウィンドゥのホーダーと色を指定する 
%   \\ %\hline
% \S\ref{gsetinitialborder} &
%   gsetinitialborder &
%   {\tt gopen()}でののウィンドゥのボーダーを指定する 
%   \\ %\hline
% \S\ref{gsetinitialgeometry} &
%   gsetinitialgeometry &
%   {\small x,yの値を含む文字列から{\tt gopen()}でのウィンドゥ出現座標等を設定する}
%   \\ %\hline
% \S\ref{gsetinitialwinname} &
%   gsetinitialwinname &
%   {\small {\tt gopen()}でのウィンドゥ名,アイコン名,リソース名,クラス名を指定する}
%   \\ %\hline
% \S\ref{gsetscrollbarkeymask} &
%   gsetscrollbarkeymask &
%   {\small EGGXによるスクロールバーのキー操作のためのキーマスクを設定する} 
%   \\ %\hline
% \S\ref{generatecolor} &
%   generatecolor &
%   {\small 変数からカラーを生成する(コントラスト，ブライトネス，$\gamma$補正等が可能)}
%   \\
 \hline
\end{tabular}
}
\end{center}

\subsection{TIPS}

\subsubsection{How to Speed Up Drawing}
%
\begin{itemize}
 \item
%      レイヤ(ダブルバッファリング)を使う
    Use layers (double buffering)

%      layer()関数(\S\ref{layer})と
%      copylayer()関数(\S\ref{copylayer})とを使って，
%      描画関数では常に非表示レイヤに描きましょう．描き終わったら，
%      非表示レイヤを表示レイヤにコピーします(copylayer()関数)．
%      このようにする事で，かなり描画速度が改善されます．
    Draw always in an invisible layer when you use drawing functions by using the {\tt layer()}(\S\ref{layer}) and {\tt copylayer()}(\S\ref{copylayer}). After finishing drawing, copy the invisible layer to the visible layer (with the {\tt copylayer()}). This approach can enhance the drawing speed appreciably.

%      次の例は，アニメーションを描く場合の典型的なコードです．
    The following example shows a typical code written to draw an animation.

%\renewcommand{\arraystretch}{0.95}
\begin{tabular}{|l|}
\hline
%\verb|#include <eggx.h>|\\
%\verb| |\\
%\verb|int main()|\\
%\verb|{|\\
%\verb|    int win;|\\
%\verb|    win = gopen(640,400);|\\
%\verb|    layer(win,0,1);                 /* 表示対象をレイヤ0，描画対象をレイヤ1に設定 */|\\
%\verb|    while ( 1 ) {|\\
%\verb|        gclr(win);                  /* レイヤ1を初期化 */|\\
%\verb|            :                       /* ←この部分に描画関数を書く */|\\
%\verb|        copylayer(win,1,0);         /* レイヤ1をレイヤ0に「瞬時に」コピー */|\\
%\verb|        msleep(10);                 /* 10ミリ秒遅らせる(アニメーションの速度調整) */|\\
%\verb|    }|\\
\verb|#include <eggx.h>|\\
\verb| |\\
\verb|int main()|\\
\verb|{|\\
\verb|    int win;|\\
\verb|    win = gopen(640,400);|\\
\verb|    layer(win,0,1);             /* Set layer 0 for display and layer 1 for drawing */|\\
\verb|    while ( 1 ) {|\\
\verb|        gclr(win);              /* Initialize layer 1 */|\\
\verb|            :                   /* Write drawing functions here */|\\
\verb|        copylayer(win,1,0);     /* Copy the layer 1 to layer 0 ``instantly''  */|\\
\verb|        msleep(10);             /* Wait 10 millisecond (to adjust animation speed) */|\\
\verb|    }|\\
\hline
\end{tabular}

 \item
%      色設定は，newcolor()関数以外を使う．
    Use other functions than {\tt newcolor()} to set a color

%      できるだけnewpen()関数(\S\ref{newpen})，
%      newrgbcolor()関数(\S\ref{newrgbcolor})など，
%      数値で色を指定する関数を使いましょう．
    Use the functions that specify a color by numerical values such as {\tt newpen()} and {\tt newrgbcolor()} as far as possible.
 \item
%      色設定の頻度を最小化する
Minimize the frequency of color setting

%      {\tt newpen()}→{\tt pset()}→{\tt newpen()}→{\tt pset()}→
%      {\tt newpen()}→{\tt pset()}→{\tt newpen()}→{\tt pset()}→…
%      のように頻繁に色設定を行なうと，
%      描画パフォーマンスが得られない事があります．
If colors are set frequently as follows, drawing performance might become worse: 
{\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ ...

%      {\tt newpen()}→{\tt pset()}→{\tt pset()}→{\tt pset()}→
%      {\tt newpen()}→{\tt pset()}→{\tt pset()}→{\tt pset()}→…
%      のように，できるだけ同じ色ごとに描画命令をまとめるようにします．
It is better to arrange drawing commands by the same color as follows, as far as possible: 
{\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt pset()} $\rightarrow$ 
{\tt newpen()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt pset()} $\rightarrow$ {\tt pset()} $\rightarrow$ ...
 \item
%      非自動フラッシュを使う(上級者向き)
Use manual flush (for expert users)

%      \S \ref{gsetnonflush}と\S \ref{gflush}をご覧ください．
See \S \ref{gsetnonflush} and \S \ref{gflush}
\end{itemize}

\subsubsection{How to Change the Origin (0,0) of the Window Coordinate to Top Left}
%
%次のように，gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で，\verb|BOTTOM_LEFT_ORIGIN|属性を無効化してから，ウィンドゥを開きます．
As below, disable the \verb|BOTTOM_LEFT_ORIGIN| attribute by using {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes})
and then open a window: 

\rei {\verb|gsetinitialattributes(DISABLE, BOTTOM_LEFT_ORIGIN);|}

\subsubsection{Usage from C++}
%
%C++の場合，EGGXで提供しているヘッダファイルで，
%「\verb|extern "C" {|…\verb|}|」
%が宣言されますので，
%C++の場合もそのまま{\tt eggx.h}をインクルードできます．
%コンパイル方法はCの場合と同様です．ソースファイル名のサフィックスは
%「{\tt .cc}」としてください．
In the case of C++, include {\tt eggx.h} as is the case with C, because 
``\verb|extern "C" {...}|'' 
is declared in the header file that EGGX offers. The compiling method is the same as C.
Add the suffix ``{\tt .cc}'' to the source filename.

\rei {\verb|egg program.cc -o program|}

\vspace*{2.5mm}

%デフォルトではコンパイラとして，「{\tt g++}」が設定されています．
%他のコンパイラを使いたい場合は，スクリプト egg を編集してください．
The compiler is ``{\tt g++}'' by default. To use another compiler, edit script egg.

\subsubsection{When Using EGGX in Fully-Fledged Software Development}
\label{eggxlib.h}

%EGGXの実際の関数名(シンボル名)は，必ず先頭に「\verb|eggx_|」
%がつく名称となっていますが，
%情報教育等での利用のしやすさを考慮して，
%ヘッダファイル{\tt eggx.h}では，
%例えば\\
All actual names of the functions (names of symbols) in EGGX start with \verb|eggx_|.
In consideration of usability in informational education, etc., the macro to 
shorten the names of functions is defined in the header file {\tt eggx.h} as below:\\
\verb|    #define gopen eggx_gopen|\\
%のように，
%関数名を短く書けるようにするためのマクロが定義されています．
%しかし，こういったマクロ定義は，
%構造体やC++のクラスを使う場合にはトラブルを引き起こす事があります．
However, such macro definitions might cause trouble when the structure or class of C++ is used.

%したがって，
%EGGXを本格的なソフトウェア開発で利用する場合は，次のように
%{\tt eggx.h}のかわりに
%{\tt eggxlib.h}を使う事をお勧めします:\\
Therefore, it is recommended to use {\tt eggxlib.h} instead of {\tt eggx.h} when using EGGX
 in fully-fledged software development as below:\\
\verb|    #include <eggxlib.h>|\\
%{\tt eggxlib.h}では関数名に対するマクロは定義されないので，
%実際の関数名をソースコードに記述する必要がありますが，
%上記のマクロ定義によって「構造体等のメンバ名」が置換されてエラーとなる，
%といったトラブルを避ける事ができます．
%この場合には，
%次のように，このマニュアルに書かれている
%関数名の先頭に「\verb|eggx_|」をつけて関数を利用します．
You need to write the actual names of function in the source code because the macro on the names of functions
is not defined in {\tt eggxlib.h}.
However, you can avoid such troubles as the error caused by the macro definition mentioned above, which replaces the member name of structure.
In this case, add ``\verb|eggx_|'' to the beginning of the names of the functions written in this manual as below:

\rei {\verb|win = eggx_goepn(800,600) ;|}


%
%
%日本語の描画は，
%日本語EUCの環境(環境変数{\tt LANG}が「{\tt ja\_JP.eucJP}」あるいは
%「{\tt ja}」)
%でのみサポートしています．
%UTF-8の環境では，日本語を描画する事はできません．

\clearpage

\setlength{\tabcolsep}{1.5mm}

\subsection{EGGX STANDARD FUNCTIONS REFERENCE}
%
%
\subsubsection{int gopen( int xsize, int ysize )}
\label{gopen}

%\kino{~~任意のサイズのグラフィックス画面を開く}
\kino{Open a graphics screen of any size}

%グラフィックス用ウィンドゥを開き，
%返り値として，EGGXで使用するウィンドゥ番号を返します．
%EGGXでは，この番号を描画関数に与えてグラフィックスを扱います．
This function opens a window for graphics and returns the window index used in the EGGX.
In the case of EGGX, graphics are handled by giving this number to the drawing function.

%引数{\tt xsize}，{\tt ysize}にはそれぞれ横方向，
%縦方向の描画領域のピクセル数を指定します．
%指定できる最大値は，32767です．
Specify horizontal and vertical pixels of the drawing area by the arguments {\tt xsize} and {\tt ysize}, respectively.
The maximum pixels are 32767. 

%デフォルトでは，
%ルートウィンドゥ(つまり背景)のピクセル数とほぼ同じ，
%あるいはそれを越えるサイズの描画領域が指定された場合には，
%描画領域よりも小さいウィンドゥを開きます%
%\footnt{%
%EGGX/ProCALLのビルド時にXineramaが有効にされていた場合は，
%最小サイズのディスプレイのピクセルサイズと比較されます．
%}%
%．
If the drawing area that is almost the same size as or larger than the root window (background) is specified, a smaller window than the drawing area is opened by default
\footnt{%
If Xinerama is available upon the build of EGGX/ProCALL, 
it is compared with the pixel size of the smallest display. 
}%
．
%この場合，スクロールバー・インタフェースが提供され，
%マウスまたはキーボードから任意の描画領域を表示する事が可能です．
In this case, the scrollbar interface is offered, 
and it is possible to display anywhere in the drawing area by using the mouse or the keyboard.

\shiyorei{\verb|win = gopen(800,600) ;|}
%
\subsubsection{void gclose( int wn )}
\label{gclose}

%\kino{グラフィックス用ウィンドゥを閉じる}
\kino{Close a window for the graphics}

%{\tt wn}で指定されたウィンドゥを閉じます．
This function closes a window specified with {\tt wn}.

\shiyorei{\verb|gclose(win) ;|}
%
\subsubsection{void gcloseall( void )}
\label{gcloseall}

%\kino{すべてのグラフィックス用ウィンドゥを閉じ，Xサーバと接続を断つ}
\kino{Close all windows for graphics and disconnect from the X server}

%全てのウィンドゥを閉じ，Xサーバと接続を断ち，
%ライブラリの内部処理で利用しているメモリ領域を開放します．
This function closes all windows, disconnects from the X server, 
and frees the memory area used by the internal processing of the library.

\shiyorei{\verb|gcloseall() ;|}
%
\subsubsection{void gresize( int wn, int xsize, int ysize )}
\label{gresize}

%\kino{グラフィックス描画領域のサイズ変更を行なう}
\kino{Resize the graphics drawing area}

%{\tt wn}で指定されたウィンドゥの描画領域のサイズを
%変更します．引数{\tt xsize}，{\tt ysize}にはそれぞれ横方向，
%縦方向のピクセル数を指定します．
This function changes the size of the drawing area in the window specified with {\tt wn}. 
The number of pixels in the horizontal and vertical directions is specified for the arguments {\tt xsize} and {\tt ysize}, respectively.

%デフォルトでは，描画領域と同時にウィンドゥの大きさも変更されますが，
%スクロールバー・インタフェースが有効な場合に
%gsetinitialgeometry()関数(\S\ref{gsetinitialgeometry})による
%指定があった場合，ウィンドゥのサイズはその指定に従います．
The window size is changed together with the drawing area by default.
However, when the scrollbar interface is enabled, the window size matches the specification by {\tt gsetinitialgeometry()} (\S\ref{gsetinitialgeometry}) if it is specified. 

%描画領域のサイズ変更は，デフォルトでは左下を原点として行ないますが，
%gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で，\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%左上が原点となります．
The size change in the drawing area is performed with the origin set to the bottom-left corner.
 On other hand, if the \verb|BOTTOM_LEFT_ORIGIN| attribute is disabled with {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}), the top-left corner becomes the origin.

\shiyorei{\verb|gresize(win, 1280,960) ;|}
%
\subsubsection{int winname( int wn, const char *argsformat, ... )}
\label{winname}

%\kino{ウィンドゥのタイトルを変更する}
\kino{Change the title of a window}

%{\tt gopen()}で開いたウィンドゥはデフォルトでは
%ユーザの実行ファイル名がウィンドゥのタイトルとして設定されますが，
%このタイトルは自由に変更できます．
The user's execution filename is set to the title of the windows opened with {\tt gopen()}  by default.
This title can be changed freely.
%最初の引数{\tt wn}はウィンドゥ番号で，
%{\tt argsformat}(とそれに続く引数)で指定される文字列が
%タイトルとして設定されます．
The first argument {\tt wn} is a window index, and the string specified with {\tt argsformat} (and subsequent arguments) is set as the title. 
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
%使用例のように，変数の値を表示するような使い方もあります．
This can be used to displays the value of a variable as shown in the example below.

%返り値は設定したウィンドゥタイトルの文字列の長さです．
The return value is the length of the string set to the window title. 

\shiyorei{\verb|winname(win,"penguin x=\%f y=\%f",x,y) ;|}

%
%\subsubsection{void orgeometry( int x, int y, int bw )}
%
%\kino{gopen()で開くウィンドゥ座標を指定する}
%
%この関数を呼ぶと，
%{\tt gopen()}で次に開くウィンドゥに限り，
%{\gt Xサーバでの座標}({\tt x},{\tt y})に
%{\tt bw}で指定した幅で外枠をつけて表示します
%(ウィンドゥマネージャによるデコレーションはつきません)．
%{\tt bw}が0の場合は外枠をつけません．
%
%\begin{center}
%\includegraphics[scale=1.0]{procall_orgeometry_C.eps}
%\end{center}
%
%\shiyorei{\verb|orgeometry(60,128,0) ;|}
%
\subsubsection{void coordinate( int wn, int xw, int yw, double xa, double ya, \\~~~~~~~~~~~~~~~~~~~~~~double xscale, double yscale )}
\label{coordinate}

%\kino{アプリケーション座標系の変更(参照点の座標とスケールを与える)}
\kino{Change the application coordinate system (set the reference point and the scale)}


%{\tt wn}で指定したウィンドゥのアプリケーション座標系を変更します
This function changes the application coordinate system in the window specified with {\tt wn}. 

%ウィンドゥ上のウィンドゥ座標系(座標値は整数)は，
%左下が({\tt 0}, {\tt 0})で，
%右上が({\tt xsize-1}, {\tt ysize-1})であり，デフォルトでは
%アプリケーション座標系(座標値は実数)の座標値は
%ウィンドゥ座標系のそれに一致しています．
The bottom-left corner is ({\tt 0}, {\tt 0}) and the top-right corner is ({\tt xsize-1}, {\tt ysize-1}) in the window coordinate system. (The coordinate value is an integer.)
The coordinate value of the application coordinate system corresponds to that of the window coordinate system by default. (The coordinate value of the application coordinate system is a real number.)

%coordinate()関数を使う事により，
%アプリケーション座標系の({\tt xa}, {\tt ya})を
%ウィンドゥ座標系の({\tt xw}, {\tt yw})に対応させ，それぞれの
%スケーリングファクターを{\tt xscale}，{\tt yscale}で指定します．
({\tt xa}, {\tt ya}) of the application coordinate system can be corresponded to ({\tt xw}, {\tt yw}) of the window coordinate system by using the {\tt coordinate()}, and each scaling factor is specified with {\tt xscale} and {\tt yscale}. 
%すなわち，描画関数等におけるアプリケーション座標$(x,y)$から
%ウィンドゥ座標$(\mbox{\tt x},\mbox{\tt y})$
%への変換は，次の式により行なわれる事を意味します:\\
This means that the conversion from the application coordinates $(x,y)$ to the window coordinates $(\mbox{\tt x},\mbox{\tt y})$ in the drawing functions, etc. is done by the following expressions:\\
~~~~~~~~
$\mbox{\tt x} = \mbox{\tt xw} + (x - \mbox{ \tt xa}) \cdot \mbox{\tt xscale}$\\
~~~~~~~~
$\mbox{\tt y} = \mbox{\tt yw} + (y - \mbox{ \tt ya}) \cdot \mbox{\tt yscale}$

%EGGXの描画関数は，アプリケーション座標系(座標値は実数)で指定するので，
%この関数を一度使えば，座標系の変換は各描画関数が自動的に行なうようになります．
Once this function is called, each drawing function converts the coordinate system automatically because the application coordinate system is used in the EGGX drawing functions.

%次の使用例では，ウィンドゥの左下を
%アプリケーション座標系の(-40.0, -20.0)に対応させ，
%スケーリングファクターを縦・横とも2.0に設定します．
In the following example, the bottom-left of the window is set to (-40.0, -20.0) in the application coordinate system, and scaling factors of both x and y are set to 2.0: 



\shiyorei{\verb|coordinate(win, 0,0, -40.0,-20.0, 2.0,2.0) ;|}

\vspace*{2.5mm}

%なお，gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で，\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%ウィンドゥ座標系の原点({\tt 0}, {\tt 0})は左上になります．
When the \verb|BOTTOM_LEFT_ORIGIN| attribute in {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}) is disabled, the origin in the window coordinate system ({\tt 0}, {\tt 0}) is at the top-left corner.

%座標系の変更には，
%window()関数(\S \ref{window})を使う方法もあります．
%ご検討ください．
You can also use {\tt window()} (\S \ref{window}) to change the coordinate system.
Please consider it. 
%
\subsubsection{void window( int wn, double xs, double ys, double xe, double ye )}
\label{window}

%\kino{アプリケーション座標系の変更(左下と右上の座標を与える)}
\kino{Change the application coordinate system {\footnotesize (set the the bottom-left and the top-right coordinates)}}

%{\tt wn}で指定したウィンドゥのアプリケーション座標系を変更します
%(実際のグラフィックスエリアの大きさが変わるわけではありません)．
This function changes the application coordinate system in the window specified with {\tt wn}. 
(The size of an actual graphics area does not change.)

%ウィンドゥ上のウィンドゥ座標系(座標値は整数)は，左下が({\tt 0}, {\tt 0})で，
%右上が({\tt xsize-1}, {\tt ysize-1})であり，デフォルトでは
%アプリケーション座標系(座標値は実数)の座標値は
%ウィンドゥ座標系のそれに一致しています．
The bottom-left corner is ({\tt 0}, {\tt 0}) and the top-right corner is ({\tt xsize-1}, {\tt ysize-1}) in the window coordinate system. (The coordinate value is an integer.)
The coordinate value of the application coordinate system corresponds to that of the window coordinate system by default. (The coordinate value of the application coordinate system is a real number.)

%window()関数を使う事により，
%アプリケーション座標系の左下
%(つまりウィンドゥ座標系での({\tt 0}, {\tt 0}))を({\tt xs}, {\tt ys})，
%右上を({\tt xe}, {\tt ye})に変更できます．
The bottom-left corner (({\tt 0}, {\tt 0}) in the window coordinate system) and the top-right corner can be changed to ({\tt xs}, {\tt ys}) and ({\tt xe}, {\tt ye}), respectively, by using {\tt window()}.

%EGGXの描画関数は，アプリケーション座標系(座標値は実数)で指定するので，
%この関数を一度使えば，座標系の変換は各描画関数が自動的に行なうようになります．
Once this functions is called, each drawing function converts the coordinate system automatically because the application coordinate system is used in the EGGX drawing functions.

%次の使用例では，アプリケーション座標系の左下を(-20.0, -10.0)，
%右上を(799.0, 599.0)に変更します．
In the following example, the bottom-left and the top-right corner in the application coordinate system are set to (-20.0, -10.0) and (799.0, 599.0), respectively: 

\shiyorei{\verb|window(win, -20.0, -10.0, 799.0, 599.0) ;|}

\vspace*{2.5mm}

%なお，gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で，\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%ウィンドゥ座標系の原点({\tt 0}, {\tt 0})は左上になります．
When the \verb|BOTTOM_LEFT_ORIGIN| attribute in {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}) is disabled, the origin in the window coordinate system ({\tt 0}, {\tt 0}) is at the top-left corner.

%座標系の変更には，
%coordinate()関数(\S \ref{coordinate})を使う方法もあります．
%ご検討ください．
You can also use {\tt coordinate()} (\S \ref{coordinate}) to change the coordinate system.
Please consider it. 

%
\subsubsection{void layer( int wn, int lys, int lyw )}
\label{layer}

%\kino{レイヤの設定をする}
\kino{Configure a layer}

%EGGXではグラフィックス用ウィンドゥ毎に8枚のレイヤを持ち，
%表示するレイヤと書き込むレイヤを独立に指定できます．
%{\tt wn}にはウィンドウ番号を指定し，
%{\tt lys}には表示するレイヤ番号，
%{\tt lyw}には書き込むレイヤ番号を{\tt 0}〜{\tt 7}で指定します．
In EGGX, each window for the graphics has eight layers.
You can specify the layers for displaying and drawing separately.
Set the window index for {\tt wn}.
Set the layer index for displaying and for drawing in the range of {\tt 0} to {\tt 7} for {\tt lys} and {\tt lyw}, respectively.

%現在表示しているレイヤに対して
%({\tt lys == lyw}の場合に)
%連続して描画関数を実行すると，描画パフォーマンスが得られない事があり
%ます．
%高速な描画が必要な場合には，現在表示していないレイヤに対して描画し，
%copylayer()関数(\S\ref{copylayer})で
%描画レイヤの画像を表示レイヤにコピーするようにします．
Consecutive execution of drawing functions against the currently displayed layer (in the case of {\tt lys == lyw}) might cause decrease in drawing performance.
If high-speed drawing is necessary, draws in the hidden layer and copy an image of the drawing layer to the displayed layer by using {\tt copylayer()} (\S\ref{copylayer}). 

%デフォルトでは{\tt layer(wn,0,0)}の状態となっています．
{\tt layer(wn,0,0)} is set by default.

\shiyorei{\verb|layer(win,0,1) ;|}
%
\subsubsection{void copylayer( int wn, int lysrc, int lydest )}
\label{copylayer}

%\kino{レイヤのコピーをする}
\kino{Copy a layer}

%{\tt wn}のウィンドウ番号の，
%レイヤ{\tt lysrc}の画像をレイヤ{\tt lydest}
%にそのままコピーします．
%このコピーは瞬時に行われるため，
%アニメーションの再生に使うことができます．
This function copies an image in the layer {\tt lysrc} in the window {\tt wn} to the layer {\tt lydest} as it is. 
Copying is instantaneously done, so it can be used for playing an animation. 

\shiyorei{\verb|copylayer(win,1,0) ;|}
%
\subsubsection{void gsetbgcolor( int wn, const char *argsformat, ... )}
\label{gsetbgcolor}

%\kino{ウィンドゥの背景色を変更する}
\kino{Set the background color of a window}

%{\tt wn}で指定されたウィンドゥの背景色
%(gclr()関数(\S\ref{gclr})で初期化される色)
%を変更します．
%{\tt argsformat}(とそれに続く引数)で指定される文字列
%を背景色に設定します．
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
%この背景色の文字列には，
%Xサーバの{\tt rgb.txt}\footnt{%
%{\tt rgb.txt}はUNIX系のOSなら {\tt /usr/X11R6/lib/X11/}
%などにあります．}
%に設定されている色か，
%\verb|"#c0c0ff"|のように，16進数のRed,Green,Blue
%を指定します．
This function changes the background color (initialized with {\tt gclr()} (\S\ref{gclr})) of the windows specified with {\tt wn}. 
The character string specified with {\tt argsformat} (and the subsequent arguments) is set to the background color. 
These arguments are variable arguments as is the case with {\tt printf()} in C standard functions.
Specify a color included in {\tt rgb.txt}\footnt{%
{\tt rgb.txt} may be included in /usr/X11R6/lib/X11/ in UNIX OS.}
 on the X server or hexadecimal RGB values such as \verb|"#c0c0ff"| as this string of the background color.

\shiyorei{\verb|gsetbgcolor(win,"white") ;|}
%
\subsubsection{void gclr( int wn )}
\label{gclr}

%\kino{描画レイヤの全消去}
\kino{Clear the drawing layer}

%{\tt wn}で指定したウィンドゥの描画レイヤを
%gsetinitialbgcolor()関数(\S\ref{gsetinitialbgcolor})
%あるいは
%gsetbgcolor()関数(\S\ref{gsetbgcolor})
%で指定した色で初期化します．
%gsetbgcolor()関数，
%gsetinitialbgcolor()関数での指定がない場合の色は黒となっています．
This function initializes the drawing layer of the windows specified with {\tt wn} with the colors specified with {\tt gsetinitialbgcolor()} (\S\ref{gsetinitialbgcolor}) or {\tt gsetbgcolor()} (\S\ref{gsetbgcolor}).
If the color is not specified with {\tt gsetbgcolor()} and {\tt gsetinitialbgcolor()}, it is initialized with the black.

\shiyorei{\verb|gclr(win) ;|}
%
\subsubsection{void tclr( void )}
\label{tclr}

%\kino{端末のクリア}
\kino{Clear a terminal}

%端末をクリアし，カーソルの位置をホームポジションに戻します．
This function clears a terminal, and restores the cursor position to the home position. 

\shiyorei{\verb|tclr() ;|}
%
\subsubsection{void newpen( int wn, int cn )}
\label{newpen}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt wn}で指定したウィンドゥでの描画色を
%変更します．{\tt cn}と色との関係は以下の通りです．
This function changes a drawing color in the window specified with {\tt wn}. 
The correspondence between {\tt cn} and the colors is as follows: 

\begin{center}
\begin{tabular}{llllllll}
%{\tt 0}:黒 &
%{\tt 1}:白 &
%{\tt 2}:赤 &
%{\tt 3}:緑 &
%{\tt 4}:青 &
%{\tt 5}:シアン &
%{\tt 6}:マゼンタ &
%{\tt 7}:黄\\
{\tt 0}: Black &
{\tt 1}: White &
{\tt 2}: Red &
{\tt 3}: Green &
{\tt 4}: Blue &
{\tt 5}: Cyan &
{\tt 6}: Magenta &
{\tt 7}: Yellow \\
{\tt 8}: DimGray &
{\tt 9}: Gray &
{\tt 10}: red4 &
{\tt 11}: green4 &
{\tt 12}: blue4 &
{\tt 13}: cyan4 &
{\tt 14}: magenta4 &
{\tt 15}: yellow4
\end{tabular}
\end{center}
%
%red4，green4…の''4''のつく色は，
%暗い赤，暗い緑…となっています．
The colors end with letter ``4'' such as red4 and green4, which are dark red, dark green. 

%デフォルトでは，白が指定されています．
White is set by default.

\shiyorei{\verb|newpen(win,2) ;|}
%
\subsubsection{void newcolor( int wn, const char *argsformat, ... )}
\label{newcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt wn}で指定したウィンドゥでの描画色を変更します．
%{\tt argsformat}(とそれに続く引数)で指定される文字列
%を描画色に設定します．
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
%この描画色の文字列には，
%Xサーバの{\tt rgb.txt}\footnt{%
%{\tt rgb.txt}はUNIX系のOSなら {\tt /usr/X11R6/lib/X11/}
%などにあります．}
%に設定されている色か，
%\verb|"#c0c0ff"|のように，16進数のRed,Green,Blue
%を指定します．
This function changes a drawing color in the window specified with {\tt wn}. 
The character string specified with {\tt argsformat} (and the subsequent arguments) is set to the drawing color. 
These arguments are variables argument as is the case with {\tt printf()} in C standard functions.
Specify a color included in {\tt rgb.txt}\footnt{%
{\tt rgb.txt} may be included in /usr/X11R6/lib/X11/ in UNIX OS.}
 on the X server or hexadecimal RGB values such as \verb|"#c0c0ff"| as this string of the drawing color.

\shiyorei{\verb|newcolor(win,"Violet") ;|}
%
\subsubsection{void newrgbcolor( int wn, int r, int g, int b )}
\label{newrgbcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt wn}で指定したウィンドゥでの描画色を変更します．
%{\tt r,g,b}にはそれぞれRed,Green,Blueの
%輝度を256段階の整数(0〜255)で指定します．
This function changes a drawing color in the window specified with {\tt wn}. 
Specify the brightness of Red, Green, and Blue in an integer in the range of 0 to 255 as {\tt r,g,b}.

\shiyorei{\verb|newrgbcolor(win,255,127,0) ;|}
%
\subsubsection{void newhsvcolor( int wn, int h, int s, int v )}
\label{newhsvcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt wn}で指定したウィンドゥでの描画色を変更します．
%{\tt h,s,v}にはそれぞれ，Hue, Saturation, Valueを指定します%
%\footnt{newhsvcolor()関数は，京都産業大学の安田様からいただきました．}%
%．
%{\tt s}と{\tt v}は256段階の整数(0〜255)を，
%{\tt h}は0〜359までの整数(角度)を指定します．
This function changes a drawing color in the window specified with {\tt wn}. 
Specify Hue, Saturation, and Value as {\tt h}, {\tt s}, and {\tt v}, respectively
\footnt{The {\tt newhsvcolor()} function is offered by Mr. Yasuda, Kyoto Sangyo University.}.
Specify an integer in the range of 0 to 255 as {\tt s} and {\tt v}.
Specify an integer in the range of 0 to 359 (angle) as {\tt h}.

\shiyorei{\verb|newhsvcolor(win,120,250,240) ;|}
%
\subsubsection{int makecolor( int cmode, double dmin, double dmax, double data,\\~~~~~~~~~~~~~~~~~~~~int *r, int *g, int *b )}
\label{makecolor}

%\kino{変数からカラーを生成する(カラーバー生成)}
\kino{Generate a color from a variables (generate a color bar)}

%変数{\tt data}の値を使って，{\tt r},{\tt g},{\tt b} それぞれに
%256段階のRed,Greed,Blueのカラーを生成します．
%変数の最小，最大は{\tt dmin},{\tt dmax}で指定します．
%この関数で得た，{\tt r},{\tt g},{\tt b}の
%値はnewrgbcolor()関数(\S\ref{newrgbcolor})
%にそのまま与えて使う事ができます．
This function generates 256 RGB color values to {\tt r}, {\tt g} and {\tt b} from the values of a variable {\tt data}.
Specify the minimum and the maximum of the variable with {\tt dmin} and {\tt dmax}.
The values of {\tt r}, {\tt n} and {\tt b} acquired through this function can be used to set for the argument of {\tt newrgbcolor} (\S\ref{newrgbcolor}) as it is. 

%返り値は{\tt data}が{\tt dmin},{\tt dmax}の範囲内に
%あった場合は{\tt 0}を返し，{\tt dmin}未満であれば負の値を，
%{\tt dmax}を越えていれば，正の値を返します．
This function returns {\tt 0} if {\tt data} is in the range of {\tt dmin} to {\tt dmax}, 
a negative value if {\tt data} is smaller than {\tt dmin} or a positive value if {\tt data} is larger than {\tt dmax}.

%{\tt cmode}はカラーパターンの番号で，以下に示す
%約50種類のカラーパターンが
%利用できます．{\tt DS9\_GRAY}等はマクロで，実際の値は
%0から始まる整数です．詳細は，
%{\tt eggx\_color.h}を見てください．
Specify the color pattern index with {\tt cmode}.
About 50 kinds of the color patterns shown below are available.
The names such as {\tt DS9 GRAY} are the macros, and an actual value is an integer starting from 0. 
See {\tt eggx\_color.h} for more information. 

%以下は fitsビューア DS9 コンパチのカラーパターンです．
The following are the fits viewer DS9-compatible color patterns.

\begin{center}
%\renewcommand{\arraystretch}{0.90}
\begin{tabular}{ll}
 \verb|DS9_GRAY|  & \includegraphics[scale=0.5]{color000.eps2} \\
 \verb|DS9_RED|   & \includegraphics[scale=0.5]{color001.eps2} \\
 \verb|DS9_GREEN| & \includegraphics[scale=0.5]{color002.eps2} \\
 \verb|DS9_BLUE|  & \includegraphics[scale=0.5]{color003.eps2} \\
 \verb|DS9_A|     & \includegraphics[scale=0.5]{color004.eps2} \\
 \verb|DS9_B|     & \includegraphics[scale=0.5]{color005.eps2} \\
 \verb|DS9_BB|    & \includegraphics[scale=0.5]{color006.eps2} \\
 \verb|DS9_HE|    & \includegraphics[scale=0.5]{color007.eps2} \\
 \verb|DS9_I8|    & \includegraphics[scale=0.5]{color008.eps2} \\
 \verb|DS9_AIPS0| & \includegraphics[scale=0.5]{color009.eps2} \\
 \verb|DS9_SLS|   & \includegraphics[scale=0.5]{color010.eps2} \\
 \verb|DS9_HEAT|  & \includegraphics[scale=0.5]{color011.eps2} \\
 \verb|DS9_COOL|  & \includegraphics[scale=0.5]{color012.eps2} \\
 \verb|DS9_RAINBOW|   & \includegraphics[scale=0.5]{color013.eps2} \\
 \verb|DS9_STANDARD|  & \includegraphics[scale=0.5]{color014.eps2} \\
 \verb|DS9_STAIRCASE| & \includegraphics[scale=0.5]{color015.eps2} \\
 \verb|DS9_COLOR|     & \includegraphics[scale=0.5]{color016.eps2} \\
\end{tabular}
\end{center}

%以下は可視化ソフトウェア IDL コンパチのカラーパターンです．
The following are the visualization software IDL-compatible color patterns.

\begin{center}
%\renewcommand{\arraystretch}{0.85}
\begin{tabular}{ll}
 \verb|IDL1_B_W_LINEAR|  & \includegraphics[scale=0.5]{color017.eps2} \\
 \verb|IDL1_BLUE_WHITE|  & \includegraphics[scale=0.5]{color018.eps2} \\
 \verb|IDL1_GRN_RED_BLU_WHT|  & \includegraphics[scale=0.5]{color019.eps2} \\
 \verb|IDL1_RED_TEMPERATURE|  & \includegraphics[scale=0.5]{color020.eps2} \\
 \verb|IDL1_BLUE_GREEN_RED_YELLOW|  & \includegraphics[scale=0.5]{color021.eps2} \\
 \verb|IDL1_STD_GAMMA_II|  & \includegraphics[scale=0.5]{color022.eps2} \\
 \verb|IDL1_PRISM|  & \includegraphics[scale=0.5]{color023.eps2} \\
 \verb|IDL1_RED_PURPLE|  & \includegraphics[scale=0.5]{color024.eps2} \\
 \verb|IDL1_GREEN_WHITE_LINEAR|  & \includegraphics[scale=0.5]{color025.eps2} \\
 \verb|IDL1_RGN_WHT_EXPONENTIAL|  & \includegraphics[scale=0.5]{color026.eps2} \\
 \verb|IDL1_GREEN_PINK|  & \includegraphics[scale=0.5]{color027.eps2} \\
 \verb|IDL1_BLUE_RED|  & \includegraphics[scale=0.5]{color028.eps2} \\
 \verb|IDL1_16_LEVEL|  & \includegraphics[scale=0.5]{color029.eps2} \\
 \verb|IDL1_RAINBOW|  & \includegraphics[scale=0.5]{color030.eps2} \\
 \verb|IDL1_STEPS|  & \includegraphics[scale=0.5]{color031.eps2} \\
 \verb|IDL1_STERN_SPECIAL|  & \includegraphics[scale=0.5]{color032.eps2} \\
\end{tabular}
\end{center}

\begin{center}
%\renewcommand{\arraystretch}{0.85}
\begin{tabular}{ll}
 \verb|IDL2_HAZE|  & \includegraphics[scale=0.5]{color033.eps2} \\
 \verb|IDL2_BLUE_PASTEL_RED|  & \includegraphics[scale=0.5]{color034.eps2} \\
 \verb|IDL2_PASTELS|  & \includegraphics[scale=0.5]{color035.eps2} \\
 \verb|IDL2_HUE_SAT_LIGHTNESS_1|  & \includegraphics[scale=0.5]{color036.eps2} \\
 \verb|IDL2_HUE_SAT_LIGHTNESS_2|  & \includegraphics[scale=0.5]{color037.eps2} \\
 \verb|IDL2_HUE_SAT_VALUE_1|  & \includegraphics[scale=0.5]{color038.eps2} \\
 \verb|IDL2_HUE_SAT_VALUE_2|  & \includegraphics[scale=0.5]{color039.eps2} \\
 \verb|IDL2_PURPLE_RED_WITH_STRIPES|  & \includegraphics[scale=0.5]{color040.eps2} \\
 \verb|IDL2_BEACH|  & \includegraphics[scale=0.5]{color041.eps2} \\
 \verb|IDL2_MAC_STYLE|  & \includegraphics[scale=0.5]{color042.eps2} \\
 \verb|IDL2_EOS_A|  & \includegraphics[scale=0.5]{color043.eps2} \\
 \verb|IDL2_EOS_B|  & \includegraphics[scale=0.5]{color044.eps2} \\
 \verb|IDL2_HARDCANDY|  & \includegraphics[scale=0.5]{color045.eps2} \\
 \verb|IDL2_NATURE|  & \includegraphics[scale=0.5]{color046.eps2} \\
 \verb|IDL2_OCEAN|  & \includegraphics[scale=0.5]{color047.eps2} \\
 \verb|IDL2_PEPPERMINT|  & \includegraphics[scale=0.5]{color048.eps2} \\
 \verb|IDL2_PLASMA|  & \includegraphics[scale=0.5]{color049.eps2} \\
 \verb|IDL2_BLUE_RED|  & \includegraphics[scale=0.5]{color050.eps2} \\
 \verb|IDL2_RAINBOW|  & \includegraphics[scale=0.5]{color051.eps2} \\
 \verb|IDL2_BLUE_WAVES|  & \includegraphics[scale=0.5]{color052.eps2} \\
 \verb|IDL2_VALCANO|  & \includegraphics[scale=0.5]{color053.eps2} \\
 \verb|IDL2_WAVES|  & \includegraphics[scale=0.5]{color054.eps2} \\
 \verb|IDL2_RAINBOW18|  & \includegraphics[scale=0.5]{color055.eps2} \\
 \verb|IDL2__RAINBOW|  & \includegraphics[scale=0.5]{color056.eps2} \\
 \verb|IDL2_ORBIT_VIEWER_COLOR|  & \includegraphics[scale=0.5]{color057.eps2} \\
 \verb|IDL2_ORBIT_VIEWER_GRAY|  & \includegraphics[scale=0.5]{color058.eps2} \\
\end{tabular}
\end{center}

\shiyorei{\verb|makecolor(DS9_SLS,v_min,v_max,v,&r,&g,&b) ;|}
%
%
%
\subsubsection{void newlinewidth( int wn, int width )}
\label{newlinewidth}

%\kino{線幅の変更}
\kino{Change line width}

%{\tt wn}で指定したウィンドゥで線を描く時の線幅を変更します．
%デフォルトでは幅1が設定されています．
This function changes the width of a line to be drawn in the window specified with {\tt wn}.
The line width 1 is set by default.

%この関数で線幅を変更すると，drawsym()関数(\S \ref{drawsym})
%やdrawarrow()関数(\S \ref{drawarrow})等で描かれる図形にも影響を与えるので
%注意してください．
Note that once the line width is changed by this routine, graphics drawn by {\tt drawsym()} (\S \ref{drawsym}) or {\tt drawarrow()} (\S \ref{drawarrow}), etc. are also affected.

\shiyorei{\verb|newlinewidth(win, 2) ;|}
%
\subsubsection{void newlinestyle( int wn, int style )}
\label{newlinestyle}

%\kino{線のスタイルの変更}
\kino{Change the line style}

%{\tt wn}で指定したウィンドゥで線を描く時のスタイルを変更します．
%引数{\tt style}に与える事ができる値は，
%{\tt LineSolid}(実線)と{\tt LineOnOffDash}(点線)です．
%デフォルトでは実線({\tt LineSolid})が設定されています．
This function changes the style of a line to be drawn in the window specified with {\tt wn}.
Set {\tt LineSolid} to draw a solid line or {\tt LineOnOffDash} to draw a dashed line for the argument {\tt style}.
The solid line ({\tt LineSolid}) is set by default.

%この関数で線のスタイルを変更すると，drawsym()関数(\S \ref{drawsym})
%やdrawarrow()関数(\S \ref{drawarrow})等で描かれる図形にも影響を与えるので
%注意してください．
Note that once the style of a line is changed by this routine, graphics drawn by {\tt drawsym()} (\S \ref{drawsym}) or {\tt drawarrow()} (\S \ref{drawarrow}), etc. are also affected.

\shiyorei{\verb|newlinestyle(win, LineOnOffDash) ;|}
%
\subsubsection{void newgcfunction( int wn, int fnc )}
\label{newgcfunction}

%\kino{GCファンクションの変更}
\kino{Change the GC function}

%{\tt wn}で指定したウィンドゥでの描画関数(画像の転送等も含む)
%を実行する時の，GCファンクションを変更します．
This function changes the GC function when executing of drawing functions (including image transfers) in the window specified with {\tt wn}.

%GCファンクションとは，
%源泉RGB値(例えばnewcolor()関数で指定したカラーのRGB値)と
%描画先ピクセルのRGB値との論理演算により，
%描画されるRGB値を決定する仕組みです．
The GC function is a mechanism to determine the RGB values to be drawn by the logical operation of the source RGB value (for example, an RGB value specified in the {\tt newcolor()}) and the RGB value of the drawing destination pixel.

%指定可能なGCファンクションは次の16種類で，デフォルトでは
%{\tt GXcopy}が設定されています．「src」は源泉RGB値，「dst」は
%描画先ピクセルのRGB値を示しています．
Sixteen kinds of GC functions shown below can be specified.
{\tt GXcopy} is set by default. 
``src'' and ``dst'' indicate the source RGB value and the RGB value of the drawing destination pixel, respectively. 

\begin{center}
%\renewcommand{\arraystretch}{0.83}
\begin{tabular}{ll}
  \hline 
  Function Name & Logical Operation \\
  \hline 
       {\tt GXclear}            &    0 \\
       {\tt GXand}              &    src AND dst \\
       {\tt GXandReverse}       &    src AND NOT dst \\
       {\tt GXcopy}             &    src \\
       {\tt GXandInverted}      &    (NOT src) AND dst \\
       {\tt GXnoop}             &    dst \\
       {\tt GXxor}              &    src XOR dst \\
       {\tt GXor}               &    src OR dst \\
       {\tt GXnor}              &    (NOT src) AND (NOT dst) \\
       {\tt GXequiv}            &    (NOT src) XOR dst \\
       {\tt GXinvert}           &    NOT dst \\
       {\tt GXorReverse}        &    src OR (NOT dst) \\
       {\tt GXcopyInverted}     &    NOT src \\
       {\tt GXorInverted}       &    (NOT src) OR dst \\
       {\tt GXnand}             &    (NOT src) OR (NOT dst) \\
       {\tt GXset}              &    1 \\
  \hline 
\end{tabular}
\end{center}


%よく用いられるGCファンクションの1つとして「{\tt GXxor}」があります．
%源泉RGB値と描画先ピクセルのRGB値とのXORをとった値を描画するので，
%2回同じ場所を描画すると必ず元の値に戻ります．
%カーソル描画や領域表示を行なう場合によく用いられます．
%この他，画像の反転表示や，
%Red，Green，Blueの合成などでの利用が考えられます．
``{\tt GXxor}'' is one of the commonly used GC functions. 
Since it sets the value of XOR from the source RGB value and the RGB value of the drawing destination pixel, the RGB value of a pixel is restored to the former value after it is drawn twice.
This is often used when the cursor drawing and the region are displayed. 
Additionally, it can be used in such cases as the reversal of an image and the combination of Red, Green, and Blue. 

%この関数で設定したGCファンクションは各種描画関数と
%gputarea()関数(\S\ref{gputarea})，
%gputimage()関数(\S\ref{gputimage})で有効です．
The GC function set by this function is effective in various drawing functions, {\tt gputarea()} (\S\ref{gputarea}), and {\tt gputimage()} (\S\ref{gputimage}). 

%なお，複数回同じ場所を描画した場合にそれぞれが同じ結果にならない
%GCファンクションを指定した場合，
%drawsym()関数(\S \ref{drawsym})，drawsyms()関数(\S \ref{drawsyms})，
%drawarrow()関数(\S \ref{drawarrow})で描かれる図形についての結果は
%定義されていません．
With a GC function that produces different results each time something is drawn in the same area more than once being specified, the result of the graphics drawn by {\tt drawsym()} (\S\ref{drawsym}), {\tt drawsyms()} (\S\ref{drawsyms}), and {\tt drawarrow()} (\S\ref{drawarrow}) is not defined. 

\shiyorei{\verb|newgcfunction(win, GXxor) ;|}
%
\subsubsection{void pset( int wn, double x, double y )}
\label{pset}

%\kino{点の描画}
\kino{Draw a point}

%{\tt wn}で指定したウィンドゥに点を描画します．
This function draws a point in the window specified with {\tt wn}. 

%描画関数等で用いられる
%アプリケーション座標系は，デフォルトでは左下が({\tt 0.0}, {\tt 0.0})で
%右上が({\tt xsize-1.0}, {\tt ysize-1.0})になっています．
%この座標は，coordinate()関数(\S\ref{coordinate})または
%window()関数(\S\ref{window})で変更が可能です．
In the application coordinate system using by drawing functions, the bottom-left corner is ({\tt 0.0}, {\tt 0.0}) and the top-right corner is ({\tt xsize-1.0}, {\tt ysize-1.0}) by default.
This coordinate system can be changed with {\tt coordinate()} (\S\ref{coordinate}) or {\tt window()} (\S\ref{window}).

\shiyorei{\verb|pset(win,gx,gy) ;|}
%
\subsubsection{void drawline( int wn, double x0, double y0, double x1, double y1 )}
\label{drawline}

%\kino{直線の描画}
\kino{Draw a line}

%{\tt wn}で指定したウィンドゥの({\tt x0}, {\tt y0})から
%({\tt x1}, {\tt y1})に直線を描画します．
This function draws a line from ({\tt x0}, {\tt y0}) to ({\tt x1}, {\tt y1}) in the window specified with {\tt nw}.

\shiyorei{\verb|drawline(win,gx0,gy0,gx1,gy1) ;|}
%
\subsubsection{void moveto( int wn, double x, double y ), void lineto( int wn, double x, double y )}
\label{lineto}

%\kino{連続的に直線を描く}
\kino{Draw a line continuously}

%lineto()関数を複数回使う事により，
%{\tt wn}で指定したウィンドゥに連続的に直線を描画します．
Lines can be drawn continuously in the window specified with {\tt wn} by using {\tt lineto()} multiple times.

%moveto()関数は，({\tt x}, {\tt y})をlineto()関数のための初期位置に設定します．
%lineto()関数は，以前{\tt moveto()}または{\tt lineto()}が呼ばれた時に
%指定された座標から，({\tt x}, {\tt y})へ直線を引きます．
%{\tt moveto()}でペンを上げて移動，
%{\tt lineto()}でペンを下ろして描画，
%と考えるとわかりやすいでしょう．
The {\tt moveto()} function sets ({\tt x}, {\tt y}) as the initial position of {\tt lineto()}.
The {\tt lineto()} function draws a line from the point specified when {\tt moveto()} or {\tt lineto()} were called previously to ({\tt x}, {\tt y}).
It might make sense that {\tt moveto()} is like lifting and moving a pen and {\tt lineto()} is like lowering a pen and drawing something.

%これらの関数は，この後のline()関数の{\tt mode}に{\tt PENUP}，{\tt PENDOWN}
%を与えた場合と同じ動作をします．

\shiyorei{\verb|lineto(win,gx,gy) ;|}
%
%\subsubsection{void line( int wn, double x, double y, int mode )}
%\label{line}

%\kino{Draw a line continuously}

%This function works just the same as {\tt moveto()} and {\tt lineto()} in \S \ref{lineto}.

%{\bf Use {\tt moveto()} and {\tt lineto()} in a new program}

%Lines can be drawn continuously in the window specified with {\tt wn} by using the {\tt line()} function multiple times.
%This function draws a line from the point specified when it was called previously to ({\tt x}, {\tt y}) if {\tt PENDOWN} is set for {\tt mode}.
%If {\tt PENUP} is set for {\tt mode}, ({\tt x}, {\tt y}) is set as the initial position of {\tt line()} function.
%It might make sense that this function is like lowering a pen and drawing something where {\tt mode=PENDOWN} and lifting and moving a pen where {\tt mode=PENUP}.

%\shiyorei{\verb|line(win,gx,gy,PENDOWN) ;|}
%
\subsubsection{void drawpts( int wn, const double x[], const double y[], int n )}
\label{drawpts}

%\kino{複数の点を描く}
\kino{Draw points}

%{\tt wn}で指定したウィンドゥで，{\tt n}個の点を描きます．
This function draws {\tt n} points in the window specified with {\tt wn}.
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x[0]}〜{\tt x[n-1]}，
%{\tt y[0]}〜{\tt y[n-1]}に各点の座標を入れておきます．
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put the coordinate of each point to {\tt x[0]} to {\tt x[n-1]} and {\tt y[0]} to {\tt y[n-1]} preliminarily.

%引数{\tt x}，{\tt y}がfloat型の配列の場合も，
%double型の場合と同じ関数名で使用可能です．
When the arguments {\tt x} and {\tt y} are float type arrays, the same function name as that of double type is available.

\shiyorei{\verb|drawpts(win,plx,ply,5) ;|}
%
\subsubsection{void drawlines( int wn, const double x[], const double y[], int n )}
\label{drawlines}

\kino{Draw a polygonal line}

%{\tt wn}で指定したウィンドゥで，折れ線を描きます．
This function draws a polygonal line in the window specified with {\tt wn}.
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x[0]}〜{\tt x[n-1]}，
%{\tt y[0]}〜{\tt y[n-1]}に折れ線の各点の座標を入れておきます．
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put the coordinate of each point of the polygonal line to {\tt x[0]} to {\tt x[n-1]} and {\tt y[0]} to {\tt y[n-1]} preliminarily.
%引数{\tt x}，{\tt y}がfloat型の配列の場合も，
%double型の場合と同じ関数名で使用可能です．
When the arguments {\tt x} and {\tt y} are float type arrays,
 the same function name as that of double type is available.

\shiyorei{\verb|drawlines(win,plx,ply,5) ;|}
%
\subsubsection{void drawpoly( int wn, const double x[], const double y[], int n )}
\label{drawpoly}

\kino{Draw a polygon}

%{\tt wn}で指定したウィンドゥで，多角形を描きます．
This function draws a polygon in the window specified with {\tt wn}.
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x[0]}〜{\tt x[n-1]}，
%{\tt y[0]}〜{\tt y[n-1]}に多角形の各点の座標を入れておきます．
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put each vertex coordinate of the polygon to {\tt x[0]} to {\tt x[n-1]} and {\tt y[0]} to {\tt y[n-1]} preliminarily.

%引数{\tt x}，{\tt y}がfloat型の配列の場合も，
%double型の場合と同じ関数名で使用可能です．
When the arguments {\tt x} and {\tt y} are float type arrays,
 the same function name as that of double type is available.

\shiyorei{\verb|drawpoly(win,plx,ply,5) ;|}
%
\subsubsection{void fillpoly( int wn, const double x[], const double y[], int n, int i )}
\label{fillpoly}

\kino{Fill a polygon}

%{\tt wn}で指定したウィンドゥで，多角形の領域を塗り潰します．
This function fills a polygon in the window specified with {\tt wn}.
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x[0]}〜{\tt x[n-1]}，
%{\tt y[0]}〜{\tt y[n-1]}に多角形の各点の座標を入れておきます．
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put each vertex coordinate of the polygon to {\tt x[0]} to {\tt x[n-1]} and {\tt y[0]} to {\tt y[n-1]} preliminarily.
%{\tt i}は塗り潰す時の形状で通常は{\tt 0}を，
%凸多角形の時は{\tt 1}を指定します．
{\tt 1} represents the shape of the polygon to be filled. Set {\tt 0} normally or {\tt 1} in the case of a convex polygon for {\tt i}.

%引数{\tt x}，{\tt y}がfloat型の配列の場合も，
%double型の場合と同じ関数名で使用可能です．
When the arguments {\tt x} and {\tt y} are float type arrays,
 the same function name as that of double type is available.

\shiyorei{\verb|fillpoly(win,plx,ply,5,0) ;|}
%
%
\subsubsection{void drawrect( int wn, double x, double y, double w, double h )}
\label{drawrect}

\kino{Draw a rectangle}

%{\tt wn}で指定したウィンドゥに，
%頂点({\tt x}, {\tt y})から正の方向に
%幅{\tt w}，高さ{\tt h}
%の長方形を描きます．
This function draws a rectangle beginning at ({\tt x}, {\tt y}) with the given width {\tt w} and the height {\tt h} in the window specified with {\tt wn}.

\shiyorei{\verb|drawrect(win,50.0,60.0,30.0,20.0) ;|}
%
\subsubsection{void fillrect( int wn, double x, double y, double w, double h )}
\label{fillrect}

\kino{Fill a rectangle}

%{\tt wn}で指定したウィンドゥで，
%頂点({\tt x}, {\tt y})から正の方向に
%幅{\tt w}，高さ{\tt h}
%の長方形の領域を塗り潰します．
This function fills a rectangle beginning at ({\tt x}, {\tt y}) with the given width {\tt w} and the height {\tt h} in the window specified with {\tt wn}.

\shiyorei{\verb|fillrect(win,50.0,60.0,30.0,20.0) ;|}
%
\subsubsection{void drawcirc( int wn, double xcen, double ycen, double xrad, double yrad )}
\label{drawcirc}

%\kino{中心座標，半径を与えて円を描く}
\kino{Draw a circle by specifying the center coordinate and the radius}

%{\tt wn}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円を描きます．
This function draws a circle with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt wn}.

%別名として，{\tt circle}が使えます．
%次の2つの使用例は，同じ動作となります．
{\tt circle} can be used as an alias.
The following two example codes work identically:

\shiyorei{\verb|drawcirc(win,50.0,60.0,30.0,40.0) ;   circle(win,50.0,60.0,30.0,40.0) ;|}
%
\subsubsection{void fillcirc( int wn, double xcen, double ycen, double xrad, double yrad )}
\label{fillcirc}

%\kino{中心座標，半径を与えて円を塗り潰す}
\kino{Fill a circle by specifying the center coordinate and the radius}

%{\tt wn}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円を塗り潰します．
This function fills a circle with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt wn}.

\shiyorei{\verb|fillcirc(win,50.0,60.0,30.0,40.0) ;|}
%
\subsubsection{void drawarc( int wn, double xcen, double ycen, double xrad, double yrad,\\~~~~~~~~~~~~~~~~~~~double sang, double eang, int idir )}
\label{drawarc}

%\kino{円の中心，半径，始点，終点の角度を与えて円弧を描く}
\kino{Draw an arc} %by specifying the center and radius of a circle and the angle of the starting point and the ending point}

%{\tt wn}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円弧を描きます．
%{\tt sang}は開始角，{\tt eang}は終了角で，度で与えます．
%{\tt idir}は円弧を描く方向で{\tt 1}で左廻り，{\tt -1}で右廻りとなります．
This function draws an arc with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt wn}.
{\tt sang} and {\tt eang} are the angle to start and to end, respectively, expressed in degrees.
{\tt idir} is a direction to draw the arc to. 
When {\tt 1} is set for {\tt idir} it draws the arc counterclockwise, and when {\tt -1} is set it draws the arc clockwise.

\shiyorei{\verb|drawarc(win,50.0,60.0,30.0,40.0,-10.0,-170.0,-1) ;|}
%
\subsubsection{void fillarc( int wn, double xcen, double ycen, double xrad, double yrad,\\~~~~~~~~~~~~~~~~double sang, double eang, int idir )}
\label{fillarc}

%\kino{円の中心，半径，始点，終点の角度を与えて円弧を塗り潰す}
\kino{Fill an arc} %by specifying the center and radius of a circle and the angle of the starting point and the ending point}

%{\tt wn}で指定したウィンドゥで，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%の円弧を塗り潰します．
%{\tt sang}は開始角，{\tt eang}は終了角で，度で与えます．
%{\tt idir}は円弧を描く方向で{\tt 1}で左廻り，{\tt -1}で右廻りとなります．
This function fills an arc with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt wn}.
{\tt sang} and {\tt eang} are the angle to start and to end, respectively, expressed in degrees.
{\tt idir} is a direction to draw the arc to. 
When {\tt 1} is set for {\tt idir} it draws the arc counterclockwise, and when {\tt -1} is set it draws the arc clockwise.

\shiyorei{\verb|fillarc(win,50.0,60.0,30.0,40.0,-10.0,-170.0,-1) ;|}
%
%
%
\subsubsection{void drawsym( int wn, int x, int y, int size, int sym\_type )}
\label{drawsym}

%\kino{センターシンボルの描画}
\kino{Draw a center symbol}

%{\tt wn}で指定したウィンドゥに
%センターシンボルを座標({\tt x}, {\tt y})に描きます．
%{\tt size}はシンボルの大きさでピクセル単位，
%{\tt sym\_type}でシンボルの種類を指定します．
This function draws a center symbol at the position ({\tt x}, {\tt y}) in the window specified with {\tt wn}.
Specify the symbol size in pixels with {\tt size} and the kind of the symbol with {\tt sym\_type}.

%{\tt sym\_type}とシンボルの関係は，次の図のとおりです．
The correspondence between {\tt sym\_type} and the symbols is as follows:

\begin{center}
\includegraphics[scale=1.0]{syms.eps}
\end{center}

\shiyorei{\verb|drawsym(win,gx,gy,16,2) ;|}
%
%
\subsubsection{void drawsyms( int wn, const double x[], const double y[], int n, int size,\\~~~~~~~~~~~~~~~~~~~~~int sym\_type )}
\label{drawsyms}

%\kino{複数のシンボルを描く}
\kino{Draw symbols}

%{\tt wn}で指定したウィンドゥで，{\tt n}個のシンボルを描きます．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x[0]}〜{\tt x[n-1]}，
%{\tt y[0]}〜{\tt y[n-1]}に各シンボルの座標を入れておきます．
This function draws {\tt n} number of symbols in the window specified with {\tt wn}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put a coordinate of each symbol to {\tt x[0]} to {\tt x[n-1]} and {\tt y[0]} to {\tt y[n-1]} preliminarily.

%{\tt size}はシンボルの大きさでピクセル単位，
%{\tt sym\_type}でシンボルの種類を指定します．
Specify the symbol size in pixels with {\tt size} and the kind of the symbol by {\tt sym\_type}.

%{\tt sym\_type}とシンボルの関係については，
%\S \ref{drawsym}をご覧ください．
See \S \ref{drawsym} for the correspondence between {\tt sym\_type} and the symbols.

%引数{\tt x}，{\tt y}がfloat型の配列の場合も，
%double型の場合と同じ関数名で使用可能です．
If the arguments {\tt x} and {\tt y} are a float typed array, this function can be used under the same name as that of double type.

\shiyorei{\verb|drawsyms(win,plx,ply,5,16,8) ;|}
%
\subsubsection{void drawarrow( int wn, double xs, double ys, double xt, double yt,\\~~~~~~~~~~~~~~~~~~~~~~double s, double w, int 10{\tt *}i+j )}
\label{drawarrow}

\kino{Draw various types of arrows}

%矢印の形状は以下の図の通りで，{\tt s}と{\tt w}は実数で指定します．
%{\tt i}が{\tt 0}〜{\tt 2}の場合には{\tt w},{\tt s}はピクセル数を，
%{\tt i}が{\tt 10}〜{\tt 12}の場合には{\tt w},{\tt s}は矢印の長さに対する
%割合で{\tt 0.0}〜{\tt 1.0}の値を指定します．
Specify {\tt s} and {\tt w} in real numbers to decide the shape of the arrow as follows.
When {\tt i} is in the range of {\tt 0} to {\tt 2}, set pixels for {\tt w} and {\tt s}. 
When {\tt i} is in the range of {\tt 10} to {\tt 12}, set the ratios against the arrow length in the range of {\tt 0.0} to {\tt 1.0}.

\begin{center}
\includegraphics[scale=0.7]{procall_arohd0.eps}
\end{center}

%\begin{center}
% \includegraphics[scale=0.30]{roche_arr_f.eps2}\\
% {\tt i}={\tt 11}での矢印の描画例
%\end{center}

\shiyorei{\verb|drawarrow(win,gx0,gy0,gx1,gy1,0.3,0.2,114) ;|}
%
%
\subsubsection{int newfontset( int wn, const char *argsformat, ... )}
\label{newfontset}

%\kino{フォントセット(日本語フォント)の指定}
\kino{Specify a font set} %(Japanese font)}

%{\tt wn}で指定したウィンドゥで描くフォントセットを指定します．
%文字の描画はdrawstr()関数を利用します．
This function sets a font set to draw in the window specified with {\tt wn}.
To draw a string, use {\tt drawstr()}.

%{\tt argsformat}(とそれに続く引数)で指定される文字列
%がフォントセットに設定されます．
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっているため，
%文字を拡大・縮小する時など，使用例のように引数を与えると大変便利です．
The string specified with {\tt argsformat} (and the subsequent arguments) is set as the font set.
Since the arguments after {\tt argsformat} are variable arguments as is the case with {\tt printf()} in C standard functions, it is very convenient if the arguments are given as the example below, for example when enlarging or reducing a string.

%返り値は，指定されたフォントセットが
%取得できた場合は{\tt 0}，代替フォントで取得できた場合は正の値，
%フォントセットの取得に失敗した場合は負の値となります．
The return value is {\tt 0} if the specified font set can be acquired; it is positive if the alternative font set can be acquired; or it is negative if it fails to acquire the font set.

%フォントセットの設定は，Xサーバにインストールされたフォントを
%指定する必要があり，OSやディストリビューションに依存します．
%確実に表示したい場合は，次のような設定を推奨します:
To set the font set, you need to specify a font installed to the X server, so it depends on your OS and distribution.
To ensure that a string is displayed, we recommend the following settings:

\begin{center}
\begin{tabular}{|l|l|}
  \hline 
  14 dot font & \verb|"-*-fixed-medium-r-normal--14-*"| \\
  \hline 
  16 dot font & \verb|"-*-fixed-medium-r-normal--16-*"| \\
  \hline 
  24 dot font & \verb|"-*-fixed-medium-r-normal--24-*"| \\
  \hline 
\end{tabular}
\end{center}

\shiyorei{\verb|st = newfontset(win,"-kochi-gothic-medium-r-normal--%d-*-*-*-*-*-*-*",fsize) ;|}

\shiyorei{\verb|st = newfontset(win,"-adobe-helvetica-medium-r-*-*-12-*-*-*-*-*-iso8859-1,"|\\
\verb|                            "-*-fixed-medium-r-normal--14-*") ;| } 
%
%
\subsubsection{int drawstr( int wn, double x, double y, int size, double theta,\\~~~~~~~~~~~~~~~~~const char *argsformat, ... )}
\label{drawstr}

\kino{Draw a string}

%{\tt wn}で指定したウィンドゥに，
%文字列を座標({\tt x}, {\tt y})から描きます．
This function draws a string at the position {\tt (x,y)} in the window specified with {\tt wn}.
Specify a character size in pixels for {\tt size}.
%{\tt size}は文字の大きさで，ピクセル単位で指定します．
%{\tt theta}は文字列の回転を指定する引数ですが，現バージョンでは
%機能しません．
{\tt theta} is the argument to specify the rotation of a string, however, it is disabled in the current version.
%{\tt argsformat}(とそれに続く引数)で指定される文字列が描かれます．
The string specified with {\tt argsformat} (and the subsequent arguments) is drawn.
%なお，{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっていますので，
%使用例のように変数の値などを描く事もできます．
Since the arguments after {\tt argsformat} are variable arguments as is the case with {\tt printf()} in C standard functions, values of variables can also be drawn as the example below.

%文字のサイズ{\tt size}は{\tt 1}〜{\tt 24}の範囲で指定できます．
%{\tt size}と実際のフォントとの関係は以下の表のようになっています．
%この場合，文字は半角英数字のみ描画できます．
The character size {\tt size} can be specified in the range of 1 to 24.
The correspondence between {\tt size} and the actual font size is shown in the table below.
In this case, only English one byte characters can be drawn.

%マルチバイト文字(漢字)を描画する場合は，
%{\tt size}には{\tt FONTSET}を指定します．
%この場合のフォントの指定は，newfontset()関数(\S\ref{newfontset})
%を利用します．
%{\tt newfontset()}でのフォント指定がない場合は，
%デフォルトの14ドットのフォントセットで描画されます．
To draw a multi byte character (Kanji), set {\tt FONTSET} for {\tt size}.
Use {\tt newfontset()} (\S\ref{newfontset})) to specify a font in this case.
If a font is not specified with {\tt newfontset()}, a string is drawn in the default 14-dot font set.

%この関数の返り値は描いた文字列の長さです．
The return value of this function is the length of the drawn string.

\begin{center}
\begin{tabular}{|ccc|ccc|ccc|ccc|ccc|}
  \hline 
 {\tt 1}〜{\tt 7}&:& $5 \times 7$ &
 {\tt 8}&:& $5 \times 8$ &
 {\tt 9}&:& $6 \times 9$ &
 {\tt 10}〜{\tt 11}&:& $6 \times 10$ &
 {\tt 12}&:& $6 \times 12$  \\
 \hline
 {\tt 13}&:& $7 \times 13$ &
 {\tt 14}〜{\tt 15}&:& $7 \times 14$ &
 {\tt 16}〜{\tt 19}&:& $8 \times 16$ &
 {\tt 20}〜{\tt 23}&:& $10 \times 20$ &
 {\tt 24}&:& $12 \times 24$ \\
  \hline 
\end{tabular}
\end{center}

\shiyorei{\verb|drawstr(win,gx,gy,16,0,"velocity v=\%f",v) ;|}

\shiyorei{\verb|drawstr(win,gx,gy,FONTSET,0,"It is also possible to draw specified font.") ;|}
%
%
\subsubsection{void gscroll( int wn, int inc\_x, int inc\_y, int clr )}
\label{gscroll}

\kino{Scroll the drawing layer in pixel unit}

%{\tt wn}で指定したウィンドゥの描画レイヤを，({\tt inc\_x}, {\tt inc\_y})
%ピクセル分スクロールさせます．
This function scrolls the drawing layer of the windows specified with {\tt wn} for the amount equivalent to ({\tt inc\_x}, {\tt inc\_y}) pixels.
%引数{\tt inc\_x}と{\tt inc\_y}はウィンドゥ座標系(座標値は整数)での増分を与えます．
The arguments {\tt inc\_x} and {\tt inc\_y} give the increment in the window coordinate system (the coordinate value is an integer). 
%{\tt clr}が{\tt 0}の場合，画面の上下左右がつながっている状態でスクロールします
%が，{\tt clr}が{\tt 1}の場合はスクロール・インした部分を背景色で初期化しま
%す．
When {\tt clr} is {\tt 0}, it scrolls with the left, right, top, and bottom of the screen all connected. 
However, when {\tt clr} is {\tt 1}, the part where the scroll in was done is initialized with the background color. 

\shiyorei{\verb|gscroll(win,0,2,1) ;|}

\vspace*{2.5mm}

%なお，gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で，\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%この例では下方向にスクロールします．
When the \verb|BOTTOM_LEFT_ORIGIN| attribute is nullified by the gsetinitialattributes() function (\S\ref{gsetinitialattributes}), it scrolls down as shown in the above example. 

\subsubsection{void gputarea( int wn, double x, double y, int src\_wn, int src\_ly,\\~~~~~~~~~~~~~~~~~~~~double src\_xs, double src\_ys, double src\_xe, double src\_ye )}
\label{gputarea}

\kino{Copy an image data in any window, layer and area to the drawing layer}

%ウィンドウ番号\verb|src_wn|，レイヤ番号\verb|src_ly|の
%(\verb|src_xs|, \verb|src_ys|)から(\verb|src_xe|, \verb|src_ye|)の範囲の画像を，
%ウィンドゥ番号{\tt wn}の座標({\tt x}, {\tt y})にコピーします．
%座標({\tt x}, {\tt y})には取り出した画像の原点を指定します．
This function copies an image data in the range from (\verb|src_xs|, \verb|src_ys|) to (\verb|src_xe|, \verb|src_ye|) in the layer \verb|src_ly| in the window \verb|src_wn| to the position ({\tt x}, {\tt y}) in the window {\tt wn}.
The origin of the copied image is set to ({\tt x}, {\tt y}).

%デフォルトでは，\verb|src_wn|から取り出した画像の原点は左下として
%扱われますが，
%gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%画像の原点は左上として扱われます．
While the origin of the image copied from \verb|src_wn| is regarded as the lower left corner by default, it is regarded as the top-left corner if \verb|BOTTOM_LEFT_ORIGIN| is disabled in {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}).

%この関数の動作は，
%newgcfunction()関数(\S\ref{newgcfunction})による設定の影響を受けます．
Behaviors of this function are affected by the settings of {\tt newgcfunction()} (\S\ref{newgcfunction}).

\shiyorei{\verb|gputarea(win,gx,gy, wn1,0, 0.0,0.0,99.0,99.0) ;|}
%
%
\subsubsection{int gputimage( int wn, double x, double y,\\~~~~~~~~~~~~~~~~~~~~unsigned char *buf, int width, int height, int msk )}
\label{gputimage}

\kino{\small Transfer images {\footnotesize (with a mask)} in a memory buffer to the drawing layer % collectively
{\footnotesize(background can be transparent)}}

%{\tt wn}で指定したウィンドゥの座標({\tt x}, {\tt y})に
%{\tt buf}に用意した，幅{\tt width}，高さ{\tt height}の
%24-bit画像データを一括転送します．
%デフォルトでは，バッファに用意された画像の原点は左下として
%扱われますが，
%gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で\verb|BOTTOM_LEFT_ORIGIN|属性が無効化されている場合は，
%画像の原点は左上として扱われます．
This function transfers image data with the width {\tt width} and the height {\tt height} prepared in {\tt buf} to the position ({\tt x}, {\tt y}) in the window specified with {\tt wn} collectively.
While the origin of the image prepared in the buffer is regarded as the bottom-left corner by default, it is regarded as the top-left corner if \verb|BOTTOM_LEFT_ORIGIN| is disabled in {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}).

%この関数の動作は，
%newgcfunction()関数(\S\ref{newgcfunction})による設定の影響を受けます．
Behaviors of this function are affected by the settings of {\tt newgcfunction()} (\S\ref{newgcfunction}).

%バッファ{\tt buf}には，データをマスク値,Red,Green,Blueの順に
%4つずつ，水平方向に走査しながら画像の上から下へ用意します
%({\tt buf[0]=0x0ff}，
%{\tt buf[1]=red[0]}，
%{\tt buf[2]=green[0]}，
%{\tt buf[3]=blue[0]}，といった具合いです)．
%Red,Green,Blueの値には{\tt 0x000}〜{\tt 0x0ff}の範囲の輝度を与えて，
%マスク値は{\tt 0x0ff}(不透明)か{\tt 0x000}(透明)を与えます．
In the buffer {\tt buf}, data are stored in the order of Alpha(mask value), Red, Green and Blue, scanning the image horizontally from top down
(that is, buf[0]=0x0ff, buf[1]=red[0], buf[2]=green[0], buf[3]=blue[0],...).
Set the level of brightness in the range of {\tt 0x000} to {\tt 0x0ff} for the values of Red, Green and Blue, and set 0x0ff (opacity) or 0x000 (transparency) for the mask value.

%引数{\tt msk}にはマスク値の有無を与えます．
%マスク値を有効にする場合(背景透過処理を有効にする場合)
%は{\tt 1}を，そうでない場合は{\tt 0}とします(これ以外の値は，
%将来アルファに対応した時に使う予定です)．
Configure the presence of the mask value using the argument {\tt msk}.
To enable the mask value (to enable transparent background) set {\tt 1}, or otherwise set {\tt 0}
(other values than these are to be used when Alpha is supported in the future).

%なお，Xサーバのdepthが16以上でない等の
%エラーの場合は，返り値として負の値を返します．
%正常終了の場合は{\tt 0}を返します．
%Xサーバのdepthは
%ggetdisplayinfo()関数(\S\ref{ggetdisplayinfo})で調べる事ができます．
In case of errors, (e.g., the depth of the X server is less than 16) this function returns a negative value; otherwise it returns {\tt 0}.
The depth of the X server can be checked by {\tt ggetdisplayinfo()} (\S\ref{ggetdisplayinfo}).

%EGGX/ProCALLのソースパッケージに収録している{\tt tools/ppmtoh.c}
%または
%{\tt tools/xpmtoh.c}%
%\footnt{xpmtohの利用には，netpbmのインストールが必要です．}%
%を利用すると，
%gputimage()関数の第4引数から第6引数に与えるための値と配列を，
%ppmまたはxpmファイルから作成する事ができます．
%次のようにして，ヘッダファイルを作成すると便利です．\\
Using {\tt tools/ppmtoh.c} or {\tt tools/xpmtoh.c}%
\footnt{netpbm needs to be installed to use xpmtoh.}%
 included in the EGGX/ProCALL source package, the values and the array to be given to the fourth to sixth arguments of {\tt gputimage()} can be generated from a ppm or xpm file.
It is convenient if you create a header file as follows. \\
\verb|  $ ./ppmtoh my_image1.ppm >> my_images.h|\\
\verb|  $ ./xpmtoh my_image1.xpm >> my_images.h|

\shiyorei{\verb|gputimage(win,gx,gy,buffer,640,400,1) ;|}
%
%
\subsubsection{unsigned char *ggetimage( int wn, int ly, double xs, double ys,\\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~double xe, double ye, int *r\_width, int *r\_height )}
\label{ggetimage}

\kino{Load an image data in any window, layer and area to a memory buffer}

%ウィンドウ番号{\tt wn}，レイヤ番号{\tt ly}の
%({\tt xs}, {\tt ys})から({\tt xe}, {\tt ye})
%の範囲の画像データをメモリバッファに取り込み，そのバッファの
%アドレスを返します．取り込まれた画像データの幅と高さは
%\verb|*r_width|と\verb|*r_height|に返ります．
This function loads image data in the range from ({\tt xs}, {\tt ys}) to ({\tt xe}, {\tt ye}) in the layer {\tt ly} in the window {\tt wn} to a memory buffer and returns an address of the buffer.
The width and height of the loaded image data are returned to \verb|*r_width| and \verb|*r_height|.

%メモリバッファには画像データが，{\tt 0x0ff},Red,Green,Blueの順に
%4つずつ，水平方向に走査しながら画像の上から下へ格納されます．
%({\tt buf[0]=0x0ff}，
%{\tt buf[1]=red[0]}，
%{\tt buf[2]=green[0]}，
%{\tt buf[3]=blue[0]}，といった具合いです)．
%Red,Green,Blueの値には{\tt 0x000}〜{\tt 0x0ff}の範囲の輝度が入ります．
In the buffer {\tt buf}, data are stored in the order of Alpha(mask value), Red, Green and Blue, scanning the image horizontally from top down
(that is, buf[0]=0x0ff, buf[1]=red[0], buf[2]=green[0], buf[3]=blue[0],...).
Set the level of brightness in the range of {\tt 0x000} to {\tt 0x0ff} for the values of Alpha, Red, Green and Blue.

%なお，
%{\bf 返されたバッファは，free()関数を使って
%ユーザ・プログラム側で開放する必要があります}．
{\bf The returned buffer has to be released with {\tt free()} from a user's program}.

%引数に設定された値が不正等のエラーの場合は，
%返り値としてNULLを返します．
This function returns {\tt NULL} in case of errors, for example where a value given to an argument is invalid.

\shiyorei{\verb|buffer = ggetimage(win, 0, 0.0,0.0, 639.0,399.0, &width, &height) ;|}
%
%
\subsubsection{int gsaveimage( int wn, int ly, double xs, double ys, double xe, double ye,\\~~~~~~~~~~~~~~~~~~~~~const char *conv, int nd, const char *argsformat, ... )}
\label{gsaveimage}

\kino{Save an image in any window, layer, and area to a file through a converter (netpbm, etc.)}

%バックグラウンドプロセスを起動し，
%ウィンドウ番号{\tt wn}，レイヤ番号{\tt ly}の
%({\tt xs}, {\tt ys})から({\tt xe}, {\tt ye})
%の範囲を
%コンバータ(netpbmの各種コマンド,ImageMagickのconvert等)
%を通してファイルに保存します\footnt{%
%netpbm は http://sourceforge.net/projects/netpbm/ ，%
%ImageMagick は http://www.imagemagick.org/ などで配布されています．}%
%．
This function runs a background process and saves an image in the range from ({\tt xs}, {\tt ys}) to ({\tt xe}, {\tt ye}) in the layer {\tt ly} in the window {\tt wn} to a file through a converter (various commands of netpbm, or convert of ImageMagick, etc.\footnt{%
netpbm is distributed in http://sourceforge.net/projects/netpbm/, and%
ImageMagick is distributed in http://www.imagemagick.org/.}%
).
%{\tt conv}にはppm形式から各画像フォーマットに変換するコンバータのコマンド
%ラインを指定します．
%例えば，netpbmを利用してpng形式に保存する場合は，\verb|"pnmtopng"|とします．
%ImageMagickを利用する場合は，\verb|"convert"|とします．
%もちろん，オプションスイッチも含める事もでき，
%\verb|"pnmtops -scale 0.125"|，あるいは
%\verb|"convert -compress ZIP"|
%といった指定も可能です．
%次の引数{\tt nd}は減色パラメータで，
%R,G,B 1チャンネルあたりの色の段階数を指定します．
%{\tt nd}は簡単な図形では{\tt 16}くらいで十分ですが，
%多くの色を使っている場合は最大値の{\tt 256}を指定してください．
Set the command line of the converter to convert from ppm to each image format for {\tt conv}.
For example, to save in the png format by using netpbm, set \verb|"pnmtopng"|.
When using ImageMagick, set \verb|"convert"|.
Of course, option switches can be included, 
so such commands as \verb|"pnmtops -scale 0.125"|
%and \verb|"convert -compress ZIP"| 
are also enabled.
{\tt nd} is the subtractive color parameter.
Set a gradation level per each channel in R,G,B for it.
As for {\tt nd}, while around {\tt 16} is enough for simple graphics, set the maximum value {\tt 256} in case many colors are used.

%{\tt argsformat}(とそれに続く引数)で指定される文字列
%がファイル名として扱われます．
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっているため，
%使用例のようにファイル名に変数の値を含む，といった事も可能です．
%このようにすると動画作成時に大変便利です．
Strings specified with {\tt argsformat} (and subsequent arguments) are treated as filenames.
Variable values can be included in the filename as shown in the example below, because these arguments are variable arguments as is the case with {\tt printf()} in C standard functions.
This is very convenient when making an animation.

%ppmから他の画像フォーマットに変換するnetpbmのコマンドの例を挙げておきます．
%各コンバータの使用方法に関しては端末から{\tt man }コンバータ名 とタイプ
%する事で調べることができます．
%ImageMagickのconvertコマンドを利用する場合は，
%ファイル名のサフィックス(ドット以降の文字列，
%例えば{\tt .jpg}，{\tt .png}，{\tt .eps2}など)から保存フォーマットが決定されます．
Examples of commands in netpbm to convert from ppm to another image format are listed below.
You can check the usage of each command by typing ``{\tt man command-name}'' from your terminal.
When using the convert command of ImageMagick, a file format is determined by the suffix of a filename (a string after a dot, for example, .jpg, .png or .eps).

%\\
%\vspace{-1\baselineskip}
\begin{center}
{\small
\begin{tabular}{cc}
{
\begin{tabular}{ll}
 \hline
 Image Format & Converter Name \\
 \hline
 AutoCAD DXB     	& {\tt ppmtoacad} \\
 windows bitmap 	& {\tt ppmtobmp} \\
 Berkeley YUV           & {\tt ppmtoeyuv}\\
 GIF			& {\tt ppmtogif} \\
 NCSA ICR graphics	& {\tt ppmtoicr} \\
 IFF ILBM		& {\tt ppmtoilbm} \\
 Interleaf image        & {\tt ppmtoleaf} \\
 HP LaserJet PCL 5 Color & {\tt ppmtolj} \\
% mag			& {\tt ppmtomag} \\
 map			& {\tt ppmtomap} \\
 Mitsubishi S340-10 printer 	& {\tt ppmtomitsu} \\
 Atari Neochrome .neo   & {\tt ppmtoneo} \\
 PPC Paintbrush 	& {\tt ppmtopcx} \\
 portable graymap	& {\tt ppmtopgm} \\
% pi			& {\tt ppmtopi} \\
 Atari Degas .pi1	& {\tt ppmtopi1} \\
% pic			& {\tt ppmtopic} \\
 Macintosh PICT		& {\tt ppmtopict} \\
 HP PaintJet 	& {\tt ppmtopj} \\
 HP PaintJet XL PCL 		& {\tt ppmtopjxl} \\
 X11 ''puzzle'' 	& {\tt ppmtopuzz} \\
 three portable graymaps		& {\tt ppmtorgb3} \\
 DEC sixel 	& {\tt ppmtosixel} \\
 TrueVision Targa 	& {\tt ppmtotga} \\
 \hline
\end{tabular}
} 
 ~~&~~
{
\begin{tabular}{ll}
 \hline
 Image Format & Converer Name \\
 \hline
 Motif UIL icon 	& {\tt ppmtouil} \\
 Windows .ico           & {\tt ppmtowinicon} \\
 XPM format		& {\tt ppmtoxpm} \\
 Abekas YUV 	& {\tt ppmtoyuv} \\
 YUV triplets		& {\tt ppmtoyuvsplit} \\
% & (以下,{\tt pnmto***})\\
 DDIF			& {\tt pnmtoddif} \\
 FIASCO compressed      & {\tt pnmtofiasco} \\
 FITS			& {\tt pnmtofits} \\
 JBIG                   & {\tt pnmtojbig} \\
 JFIF (``JPEG'') image    & {\tt pnmtojpeg} \\
 Palm pixmap            & {\tt pnmtopalm} \\
 plain (ASCII) anymap   & {\tt pnmtoplainpnm} \\
 Portable Network Graphics  & {\tt pnmtopng} \\
 PostScript		& {\tt pnmtops} \\ 
 Sun raster 	& {\tt pnmtorast} \\
 RLE image              & {\tt pnmtorle} \\
 sgi image 	& {\tt pnmtosgi} \\
 Solitaire image recorder  & {\tt pnmtosir} \\
 TIFF file		& {\tt pnmtotiff} \\
 CMYK encoded TIFF      & {\tt pnmtotiffcmyk} \\
 X11 window dump	& {\tt pnmtoxwd} \\
 \hline
\end{tabular}
\vspace{1mm}
}
\end{tabular}
}
\end{center}

%ここに挙げた以外のコンバータも，標準入力からppm形式で入力し，
%標準出力から変換データを出力するものであれば使用する事ができます．
Converters other than described here can also be used as long as they can import ppm format data to the standard input and export converted data from the standard output.

%コンバータを通さずに直接ppm形式で保存する場合は{\tt conv}には
%\verb|""|と指定してください．
%ただしその場合，非圧縮のバイナリデータが
%保存されるので，ファイルのサイズが大きくなります．
To save in the ppm format directly without using a converter, set {\tt ""} for {\tt conv}.
Please note that the size of the saved file is rather big because the ppm format is uncompressed binary data.

%この関数ではXサーバから画像データを転送し，保存するわけですが，
%ネットワークが遅かったりすると非常に時間がかかります．
%その事を考慮してこの関数では子プロセスを起動して，
%バックグラウンドでXサーバからの画像の転送・ディスクへの書き込みを行うように
%しています．したがってユーザプログラムは{\tt gsaveimage();}の後
%すぐに他の作業ができるようになります．ただし，この子プロセスが
%終わるまではXサーバでの描画等ができないので，もし{\tt gsaveimage();}
%のすぐ後にEGGXの描画関数
%などを呼んだ場合は画像の転送・保存が完了するまで待たされる事になります．
Since this function transfers an image data from the X server and saves it, it takes a long time if the network speed is slow.
In consideration of this, EGGX allows a child process to start and image data to be transferred from the X server and written to the disk.
Therefore, another operation can be done immediately after {\tt gsaveimage();} in a user's program.
However, if a drawing function in EGGX is called immediately after {\tt gsaveimage();} it is suspended until the transfer and the saving of an image are finished, because drawing on the X server cannot be performed until this child process is finished.

%なお，{\tt gsaveimage}を使っている場合は
%\underline{プログラムは必ずgclose()関数(\S\ref{gclose})を呼んでから終了する}
%ようにしてください．
If you use {\tt gsaveimage}, please make sure to 
\underline{call {\tt gclose()} (\S\ref{gclose}) before finishing the program.}

%返り値は，子プロセスの起動失敗などのエラーの場合は負の値，
%正常終了の場合は{\tt 0}となります．
The return value is {\tt -1} if the child process fails to start; or otherwise it is {\tt 0}.

\shiyorei{
\verb|gsaveimage(win,0, 0.0,0.0, 639.0,399.0, "pnmtopng",256,"img\%d.png",i) ;|}

%png形式に保存する例です．gif形式の場合は {\tt conv} は
%\verb|"ppmtogif"| にします．
This is an example to save in the png format.
To save in the gif format, set \verb|"ppmtogif"| for {\tt conv}.

\shiyorei{\small
\verb|gsaveimage(win,0, 0.0,0.0, 639.0,399.0,|\\\verb|             "pnmtops -noturn -dpi 72 -equalpixels -psfilter -flate -ascii85",256,"figure.eps") ;|}

%PostScript形式に保存する例です．netpbmの{\tt pnmtops}では
%RunLength圧縮(可逆圧縮)をサポートしています．上記のように「{\tt -rle}」
%をつける事で画質を損うことなくファイルサイズを小さくできます．
This is an example to save in the PostScript format. 
pnmtops in netpbm supports RunLength compression and GZIP compression
(lossless compression).
By adding ``{\tt -psfilter -flate -ascii85}'' as above, the file size can be reduced without deterioration of image quality.

%%ImageMagickではRunLengthの他，LZW，ZIP(使用例)などのアルゴリズムでより効率良く
%%圧縮したビットマップイメージをPostscript Level 2ファイルに埋め込む事ができます．
%%ただし，ImageMagickのPostscript Level 2の出力は5.3.3以降で改悪され，
%%一般的なPostscriptインタープリタ(Adobe Postscript 3など)
%%では読めません．ImageMagick-{\bf 5.3.2}の利用をお勧めします．
%A bitmap image compressed more efficiently by algorithms such as LZW and ZIP (see abov%e example) along with RunLength can be embedded in Postscript Level 2 file in ImageMag%ick.
%However, export of Postscript Level 2 in ImageMagick was made worse after Ver. 5.3.3, %so commonly-used Postscript interpreter (such as Adobe Postscript 3) cannot read it.
%We recommend to use ImageMagick-{\bf 5.3.2}.
%
%
\subsubsection{unsigned char *readimage( const char *conv, const char *filename,\\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~int *r\_width, int *r\_height, int *r\_msk ) }
\label{readimage}

\kino{Load image data in a file to a memory buffer through a converter (netpbm, etc.)}

%ファイル{\tt filename}の画像データを
%コンバータ(netpbmの各種コマンド,ImageMagickのconvert等)
%を通してメモリバッファに読み込み，そのバッファのアドレスを返します．
%取り込まれた画像データの幅と高さが，
%\verb|*r_width|と\verb|*r_height|に返ります．
%アルファ値が読み込まれた場合には，\verb|*r_msk|
%に{\tt 1}以上の値が返り，そうでない場合には{\tt 0}が返ります．
%{\tt 1}が返るのは，アルファ値が
%{\tt 0x000}，{\tt 0x0ff}の二値だった場合です．
This function loads image data in the file {\tt filename} to a memory buffer through a converter (various commands of netpbm, or convert of ImageMagick, etc.) and returns an address of the buffer.
The width and height of the loaded image data are returned to \verb|*r_width| and \verb|*r_height|.
When Alpha value is loaded, a value not less than {\tt 1} is returned to \verb|*r_msk|; or otherwise {\tt 0} is returned.
If Alpha value is {\tt 0x000} and {\tt 0x0ff} binary, {\tt 1} is returned.

%引数{\tt conv}には，各画像フォーマットから
%pbm,pgm,ppm,pamのいずれかの形式に変換するコンバータのコマンド
%ラインを指定します．
%例えば，netpbmを利用してpng形式のファイルを読み取る場合は，
%\verb|"pngtopnm"|(新しいバージョンでは\verb|"pngtopam"|)とします．
%ImageMagickを利用する場合は，\verb|"convert"|とします．
%netpbm，ImageMagick以外のコンバータも，標準入力から
%{\tt filename}の内容を入力し，
%標準出力から変換データを出力するものであれば使用する事ができます．
%もちろん，{\tt conv}にはオプションスイッチも含める事もできます．
Set a command line of a converter to convert each image format to any one of pbm, pgm, ppm and pam for {\tt conv}.
For example, to load a png-format file by using netpbm, set
\verb|"pngtopnm"|(\verb|"pngtopam"| in the newer version).
When using ImageMagick, set {\tt "convert"}.
Also other converters than netpbm and ImageMagick are can be used as long as they import a content of {\tt filename} to the standard input and export converted data from the standard output.
Of course, option switches can be included to {\tt conv}.

%コンバータを通さずに直接ファイルを読み込む場合は{\tt conv}には
%\verb|""|と指定してください．
%ただし，読み込めるフォーマットはバイナリ形式の
%pbm,pgm,ppm,pamのいずれかに限定されます．
To load a file directly without using a converter, set \verb|""| for {\tt conv}.
Please note that loadable formats are limited to binary pbm, pgm, ppm and pam.

%メモリバッファには画像データが，Alpha(マスク値),Red,Green,Blueの順に
%4つずつ，水平方向に走査しながら画像の上から下へ格納されます．
%({\tt buf[0]=alpha[0]}，
%{\tt buf[1]=red[0]}，
%{\tt buf[2]=green[0]}，
%{\tt buf[3]=blue[0]}，といった具合いです)．
%Alpha,Red,Green,Blueの値には{\tt 0x000}〜{\tt 0x0ff}の範囲の輝度が入ります．
In the memory buffer, an image data are stored in the order of Alpha (mask value), Red, Green and Blue, scanning the image horizontally from top down
(that is, buf[0]=0x0ff, buf[1]=red[0], buf[2]=green[0], buf[3]=blue[0],...).
Set the level of brightness in the range of {\tt 0x000} to {\tt 0x0ff} for the values of Alpha, Red, Green and Blue.

%なお，
%{\bf 返されたバッファは，free()関数を使って
%ユーザ・プログラム側で開放する必要があります}．
{\bf The returned buffer has to be released with {\tt free()} from a user's program}.

%ファイルが読み込めない等のエラーが発生した場合は，
%返り値としてNULLを返します．
This function returns {\tt NULL} in case of errors, for example where it fails to read the file.

\shiyorei{\verb|buffer = readimage("pngtopnm", "myimage.png", &width, &height, &msk) ;|}

%コンバータはすでにインストールされている必要があり，
%インストールされていない場合は指定できません．

%
%
\subsubsection{int writeimage( const unsigned char *buf, int width, int height, int msk,\\~~~~~~~~~~~~~~~~~~~~~const char *conv, int nd, const char *argsformat, ... )}
\label{writeimage}

\kino{Save image data in a memory buffer through a converter (netpbm, etc.)}

%引数{\tt buf}で指定されたメモリバッファに格納された，
%高さ{\tt width}，幅{\tt height}の画像データを
%コンバータ(netpbmの各種コマンド,ImageMagickのconvert等)
%を通してファイルに保存します．
This function saves image data with the width {\tt width} and the height {\tt height} stored in the memory buffer specified with {\tt buf} through a converter (various commands of netpbm, or convert of ImageMagick, etc).
%引数{\tt msk}には，アルファ値(マスク)を保存する場合は{\tt 1}以上の値を，
%そうでない場合は{\tt 0}を指定します．
Set a value not less than {\tt 1} for the argument {\tt msk} when saving alpha value (mask); or otherwise set {\tt 0}.
%{\tt conv}にはppmまたはpam形式から各画像フォーマットに変換する
%コンバータのコマンドラインを指定します．
Set a command line of a converter to convert the ppm or pam format to each image format for {\tt conv}.
%例えば，netpbmを利用してpng形式に保存する場合は，
%\verb|"pnmtopng"|(アルファなし)または\verb|"pamrgbatopng"|(アルファあり)
%とします．
For example, to save in the png format by using netpbm, set
\verb|"pnmtopng"|(without alpha) or \verb|"pamrgbatopng"|(with alpha).
%ImageMagickを利用する場合は，\verb|"convert"|とします．
When using ImageMagick, set {\tt "convert"}.
%もちろん，オプションスイッチも含める事もでき，
%\verb|"pnmtops -scale 0.125"|，あるいは
%\verb|"convert -compress ZIP"|
%といった指定も可能です．
Of course, option switches can be included, so such commands as
``pnmtops -scale 0.125'' %and ``convert -compress ZIP''
are also enabled.
%次の引数{\tt nd}は減色パラメータで，
%R,G,B 1チャンネルあたりの色の段階数を指定します．
%{\tt nd}は簡単な図形では{\tt 16}くらいで十分ですが，
%多くの色を使っている場合は最大値の{\tt 256}を指定してください．
{\tt nd} is the subtractive color parameter.
Set a gradation level per channel in R,G,B for it.
As for {\tt nd}, while around {\tt 16} is enough for simple graphics, set the maximum value {\tt 256} in case many colors are used.

%{\tt argsformat}(とそれに続く引数)で指定される文字列
%がファイル名として扱われます．
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっているため，
%使用例のようにファイル名に変数の値を含む，といった事も可能です．
%このようにすると動画作成時に大変便利です．
Strings specified with {\tt argsformat} (and subsequent arguments) are treated as filenames.
Variable values can be included in the filename as shown in the example below, because these arguments are variable arguments as is the case with {\tt printf()} in C standard functions.
This is very convenient when making an animation.

%バッファ{\tt buf}には，データをAlpha(マスク値),Red,Green,Blueの順に
%4つずつ，水平方向に走査しながら画像の上から下へ用意します
%({\tt buf[0]=0x0ff}，
%{\tt buf[1]=red[0]}，
%{\tt buf[2]=green[0]}，
%{\tt buf[3]=blue[0]}，といった具合いです)．
%Alpha,Red,Green,Blueの値には{\tt 0x000}〜{\tt 0x0ff}の範囲の輝度を与えます．
In the buffer {\tt buf}, data are stored in the order of Alpha(mask value), Red, Green and Blue, scanning the image horizontally from top down
(that is, buf[0]=0x0ff, buf[1]=red[0], buf[2]=green[0], buf[3]=blue[0],...).
Set the level of brightness in the range of {\tt 0x000} to {\tt 0x0ff} for the values of Alpha, Red, Green and Blue.

%ImageMagickのconvertコマンドを利用する場合は，
%ファイル名のサフィックス(ドット以降の文字列，
%例えば{\tt .jpg}，{\tt .png}，{\tt .eps2}など)
%から保存フォーマットが決定されます．
When using the convert command of ImageMagick, file format is determined by suffix of filename (a string after a dot, for example, .jpg, .png or .eps).

%netpbm，ImageMagick以外のコンバータも，
%標準入力からppmまたはpam形式で入力し，
%標準出力から変換データを出力するものであれば使用する事ができます．
Also other converters than netpbm and ImageMagick can be used as long as they can import ppm or pam-format data to the standard input and export converted data from the standard output.

%コンバータを通さずに直接ppmまたはpam形式で保存する場合は{\tt conv}には
%\verb|""|と指定してください．ただしその場合，非圧縮のバイナリデータが
%保存されるので，ファイルのサイズが大きくなります．
To save in the ppm or pam format directly without using a converter, set \verb|""| for {\tt conv}.
Please note that the size of the saved file is rather big because the ppm and pam format is uncompressed binary data.

%コンバータあるいはファイルに対して，ppmとpamのどちらが出力されるかは，
%引数{\tt msk}とファイル名のサフィックスで決まります．
%pamが出力されるのは，
%「ファイル名のサフィックスが\verb|".pam"|の場合」
%「{\tt msk}が{\tt 1}以上の場合」
%です．それ以外の場合はppmが出力されます．
Whether ppm or pam is outputted to a converter or a file is determined by the argument {\tt msk} and a suffix of a filename.
When the suffix of a filename is \verb|".pam"| or {\tt msk} is not less than {\tt 1}, pam is outputted. Otherwise, ppm is outputted.

%返り値は，子プロセスの起動失敗などのエラーの場合は負の値，
%正常終了の場合は{\tt 0}となります．
The return value is a negative value in case of errors, for example where the child process fails to start; or otherwise it is {\tt 0}.

%コンバータのコマンドの詳細については，
%\S\ref{gsaveimage}をご覧ください．
See \S\ref{gsaveimage} for more information about the commands of converters.

\shiyorei{
\verb|writeimage(buffer,640,400,0,"pnmtopng",256,"img\%d.png",i) ;|}

%コンバータはすでにインストールされている必要があり，
%インストールされていない場合は指定できません．

%
%
\subsubsection{void gsetnonblock( int flag )}
\label{gsetnonblock}

\kino{Configure the operating mode of {\tt ggetch()}, {\tt ggetevent()}, and {\tt ggetxpress()}}

%デフォルトでは，
%キーボードやマウスの入力情報を取得する関数
%{\tt ggetch()}，{\tt ggetevent()}，{\tt ggetxpress()}
%が呼ばれると，入力があるまで関数から抜けずに待ち続けます(ブロッキングモード)．
%
%{\tt flag}に{\tt ENABLE}を設定してgsetnonblock()関数が呼ばれると
%ノンブロッキングモードとなり，
%{\tt ggetch()}，{\tt ggetevent()}，{\tt ggetxpress()}
%は入力の有無にかかわらずすぐに関数から戻るようになります．
%
%デフォルトのブロッキングモードに戻すには，{\tt flag}に{\tt DISABLE}
%を与えてください．
%
%gsetnonblock()関数の呼び出しは，
%ウィンドゥのオープンの前あるいは後のどのタイミングでも有効です．
When {\tt ggetch()}, {\tt ggetevent()}, and {\tt ggetxpress()}, which are the functions to get input information from the keyboard or the mouse, are called, they wait inside themselves until an input occurs by default (in the blocking mode).

If {\tt gsetnonblock()} is called with {\tt flag} set to {\tt ENABLE}, it changes to the non-blocking mode, and then {\tt ggetch()},
{\tt ggetevent()}, and {\tt ggetxpress()} will return immediately whether an input occurs or not.

To restore the default blocking mode, set {\tt flag} to {\tt DISABLE}.

{\tt gsetnonblock()} can be called anytime before or after a window is opened.

\shiyorei{\verb|gsetnonblock(ENABLE) ;|}


\subsubsection{int ggetch()}
\label{ggetch}

\kino{Return a character inputted from the keyboard}

%EGGXで開いたすべてのウィンドゥからの
%キーボードの入力情報を返します．
%ブロッキングモード(デフォルト)ではキー入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐに関数から
%戻ります(動作モードについては\S \ref{gsetnonblock}のgsetnonblock()関数を
%参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，負の値が返ります．
%
%ggetch()関数は，端末からの1文字入力{\tt fgetc(stdin)}と似ていますが，
%改行まで待たないという点と，
%0x001〜0x01f，0x07fの「特殊キー」と「Ctrl+アルファベットキー」
%の入力を拾う点が異っています．
%
%次の表で16進の文字コードを知る事ができます．
%イタリック体の数字が16進
%2桁の上位を表します．
This function returns input information from the keyboard from all windows opened in EGGX.
While it waits until a key input occurs in the blocking mode (default), it finishes immediately whether a key input occurs or not in the non-blocking mode. (See {\tt gsetnonblock()} in \S \ref{gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

While {\tt ggetch()} is similar to the function {\tt fgetc(stdin)} to input a character from a terminal, there are differences: (1) the former does not wait until the break; and (2) it picks up the input of ``special key'' 0x001〜0x01f, 0x07f and ``Ctrl + Alphabet.''

The following table indicates hexadecimal character codes.
The upper figures of two hexadecimal-digits are shown in Italic.

\input charcode0

%例えば，「a」は 0x061，「A」は 0x041 です．
%
%0x001〜0x01a の中にはいくつか特殊キーが含まれていますが，
%この区間は「Ctrl+アルファベットキー」のコードと共有となります．
%例えば，「BackSpace」と「Ctrl+H」のコードはどちらも 0x008 となります．
%0x001〜0x01a で空白になっている個所は，
%「Ctrl+アルファベットキー」にのみコードが割り当てられています．
%
%キーボード入力があったウィンドゥ番号をチェックしたい場合は，
%ggetxpress()関数(\S \ref{ggetxpress})を使ってください．
For example, ``a'' is 0x061 and ``A'' is 0x041.
There are some special keys in the range of 0x001 - 0x01a.
Their codes are shared with those of Ctrl + Alphabet.
For example, both codes of BackSpace and Ctrl + H are 0x008.
As for blanks in the range of 0x001 - 0x01a, codes are assigned only to Ctrl + Alphabet.

Use {\tt ggetxpress()} (\S \ref{ggetxpress}) to check the index of a window where keyboard input occured.

\shiyorei{\verb|key=ggetch() ;|}


\subsubsection{int ggetevent( int *type, int *button, double *x, double *y )}
\label{ggetevent}

\kino{Return input information from the mouse or the keyboard}

%EGGXで開いたすべてのウィンドゥからの
%マウスやキーボードの入力情報を返します．
%ブロッキングモード(デフォルト)では入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐに関数から
%戻ります(動作モードについては\S \ref{gsetnonblock}のgsetnonblock()関数を
%参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，負の値が返ります．
%
%この関数の返り値は，入力のあったウィンドゥ番号です．
%これを使って，ユーザ・プログラム側で
%意図したウィンドゥからの入力かどうかをチェックします．
%
%{\tt *type}には，
%マウスのモーションの場合は{\tt MotionNotify}，{\tt EnterNotify}，
%{\tt LeaveNotify}のいずれか，
%マウスのボタンが押された場合は{\tt ButtonPress}，
%キーボードからの入力の場合は{\tt KeyPress}
%が返ります．
%{\tt EnterNotify}，{\tt LeaveNotify}は，それぞれ
%マウスカーソルがウィンドゥに入った時，ウィンドゥから出た時に
%発行されます．
%
%マウスの入力の場合，
%{\tt *button}にはクリック(on・off)された，または押されている
%ボタンの番号({\tt 1,2,3,}…)が代入され，
%ウィンドゥ上でのマウスポインタの座標
%(アプリケーション座標系)が{\tt *x}，{\tt *y}に代入されます．
%
%キー入力の場合は，キーコードが{\tt *button}に返ります．
%キーコードはggetch()関数(\S\ref{ggetch})の返り値と同一です．
%
%4つの引数
%{\tt type}，{\tt button}，{\tt x}，{\tt y}
%それぞれについて値を取り出す必要がない場合は，{\tt NULL}
%を与えてもかまいません．なお，C++のコードでは，
%{\tt NULL}は必ず{\tt (double *)}または{\tt (float *)}でキャストしてください．
%
%引数{\tt x}，{\tt y}がfloat型のポインタ変数の場合も，
%double型の場合と同じ関数名で使用可能です．
This function returns input information from the mouse or the keyboard from all windows opened in EGGX.
While it waits until an input occurs in the blocking mode (default), it finishes immediately whether an input occurs or not in the non-blocking mode. (See {\tt gsetnonblock()} in \S \ref{gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

The return value of this function is the index of a window where an input occurred.
By using this value, check whether the input occurred in the intended window in a user's program or not.

The values returned to {\tt *type} are {\tt MotionNotify} for mouse motion, {\tt ButtonPress} where the mouse button is pressed, {\tt ButtonRelease} where the mouse button is released, or {\tt KeyPress} for input from the keyboard.

In the case of input from the mouse, click on/off or the index of the clicked button ({\tt 1, 2, 3,}...) is returned to {\tt *button}, and the mouse pointer position (application coordinate system) upon a click is returned to {\tt *x}, {\tt *y}.

For key input, the key code is returned to {\tt *button}.
The key code is the same as the return value of {\tt ggetch()} (\S\ref{ggetch}).

If you do not need to get each value of {\tt type}, {\tt button}, {\tt x} and {\tt y}, you can set {\tt NULL} for them.
In C++ codes, {\tt NULL} has to be casted to {\tt double} or {\tt float}.

If the arguments {\tt x} and {\tt y} are a float typed pointer variable, this function can be used with the same name as that of double type.


\shiyorei{\verb|win_ev=ggetevent(&type,&b,&x,&y) ;|}


\subsubsection{int ggetxpress( int *type, int *button, double *x, double *y )}
\label{ggetxpress}

\kino{Return information of clicking mouse buttons or input from the keyboard}

%EGGXで開いたすべてのウィンドゥからの
%マウスのボタンクリック，キータイプ
%の入力情報を返します．この関数は，
%ggetevent()関数(\S \ref{ggetevent})の簡易版です．
%ブロッキングモード(デフォルト)では入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐに関数から
%戻ります(動作モードについては\S \ref{gsetnonblock}のgsetnonblock()関数を
%参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，負の値が返ります．
%
%この関数の返り値は，入力のあったウィンドゥ番号です．
%これを使って，ユーザ・プログラム側で
%意図したウィンドゥからの入力かどうかをチェックします．
%
%{\tt *type}には，
%マウスのボタンクリックの場合は{\tt ButtonPress}，
%キーボードからの入力の場合は{\tt KeyPress}
%が返ります．
%
%マウスのボタンクリックの場合，
%{\tt *button}にはクリックされたボタンの番号({\tt 1,2,3,}…)，
%クリックされた時のウィンドゥ上でのマウスポインタの
%座標(アプリケーション座標系)が{\tt *x}，{\tt *y}に代入されます．
%
%キー入力の場合は，キーコードが{\tt *button}に返ります．
%キーコードはggetch()関数(\S \ref{ggetch})の返り値と同一です．
%
%4つの引数
%{\tt type}，{\tt button}，{\tt x}，{\tt y}
%それぞれについて値を取り出す必要がない場合は，{\tt NULL}
%を与えてもかまいません．なお，C++のコードでは，
%{\tt NULL}は必ず{\tt (double *)}または{\tt (float *)}でキャストしてください．
%
%引数{\tt x}，{\tt y}がfloat型のポインタ変数の場合も，
%double型の場合と同じ関数名で使用可能です．
This function returns information of clicking mouse buttons or input 
from the keyboard from all windows opened in EGGX.
This function is a simplified version of {\tt ggetevent()} (\S \ref{ggetevent}).
While it waits until an input occurs in the blocking mode (default), 
it finishes immediately whether an input occurs or not in the non-blocking mode. 
(See {\tt gsetnonblock()} in \S \ref{gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

The return value of this function is the index of a window where an input occurred.
By using this value, check whether the input occurred in the intended window in a user's program or not.

The values returned to {\tt *type} are {\tt ButtonPress} for clicking mouse buttons or {\tt KeyPress} for input from the keyboard.

For clicking mouse buttons, the index of the clicked button ({\tt 1, 2, 3,}...) and the mouse pointer position (application coordinate system) upon a click are returned to {\tt *button} and {\tt *x}, {\tt *y}, respectively.

For key input, the key code is returned to {\tt *button}.
The key code is the same as the return value of {\tt ggetch()} (\S \ref{ggetch}).

If you do not need to get each value of {\tt type}, {\tt button}, {\tt x} and {\tt y},
 you can set {\tt NULL} for them.
In C++ codes, {\tt NULL} has to be casted to {\tt double} or {\tt float}.

If the arguments {\tt x} and {\tt y} are a float typed pointer variable, this function can be used with the same name as that of double type.\\

\shiyorei{\verb|win_ev=ggetxpress(&type,&b,&x,&y) ;|}


\subsubsection{void msleep( unsigned long msec )}
\label{msleep}

\kino{Wait an execution in milliseconds}

%少なくとも{\tt msec}ミリ秒の間，プログラムの実行をなにもせずに待ちます．
%アニメーション速度の調整に利用できます．
%
%一般的には，時間の精度は10ミリ秒の単位です．
This function waits for at least {\tt msec} millisecond doing nothing.
This can be used for adjusting animation speed.

Generally, the accuracy of the time is in the order of 10 millisecond.

\shiyorei{\verb|msleep(100) ;|}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{EGGX ADVANCED FUNCTIONS REFERENCE}

%以下でとりあげる関数は，より細かい制御を行なったりするためのもので，
%C言語に習熟していないと利用が難しい関数もあります．
%なお，これらの関数のほとんどは，
%それぞれに対応するFORTRANのルーチンは用意していません．
Functions described below are for more detailed control. 
Some of them are difficult to use for beginners or people who don't have enough knowledge on C. 
We don't offer FORTRAN routines corresponding to these functions.

\subsubsection{int ggetdisplayinfo( int *depth, int *root\_width, int *root\_height )}
\label{ggetdisplayinfo}

%\kino{Xサーバの情報(depth，画面サイズ)を取得する}
\kino{Get information on the X server (depth and screen size)}

%Xサーバに接続し，depth，画面サイズを調べます．
%{\tt *depth}はEGGXでウィンドゥをオープンした時に使われるdepth
%値(ピクセルに何ビット使っているか)，すなわち
%{\tt 8}(PseudoColor：256色カラー)，
%{\tt 16}(TrueColor：65536色カラー)，
%{\tt 24}(TrueColor：1677万色カラー)
%といった値が代入されます．
%{\tt *root\_width},
%{\tt *root\_height}
%はそれぞれXサーバの画面のピクセルサイズが代入されます．
This function connects to the X server and checks its depth and screen size.
The values returned to {\tt *depth} are those of the depth used upon opening of a window in EGGX, for example 
{\tt 8}(PseudoColor: 256 colors), 
{\tt 16}(TrueColor: 65536 colors), and 
{\tt 24}(TrueColor: 16 million colors).
The screen size in pixels of the X server is returned to {\tt *root\_width} and {\tt *root\_height}.

%3つの引数
%{\tt depth}，{\tt root\_width}, {\tt root\_height}
%それぞれについて値を取り出す必要がない場合は，{\tt NULL}
%を与えてもかまいません．
If you do not need to get each value of {\tt depth}, {\tt root\_width} and {\tt root\_height}, you can set {\tt NULL} for them.

%関数の返り値は，Xサーバへの接続が成功した場合は{\tt 0}，
%．
When the connection to the X server succeeds, the return value of the function becomes {\tt 0}. 
If it fails, it becomes a negative value. 

%putimg24()関数(\S\ref{putimg24})を使用する時は，
%必ずdepth値を調べるようにします．

\shiyorei{\verb|status = ggetdisplayinfo(&depth,NULL,NULL) ;|}
%
\subsubsection{void gsetnonflush( int flag ), int ggetnonflush()}
\label{gsetnonflush}

%\kino{描画関数等におけるフラッシュに関する設定}
\kino{Configure the flush in drawing functions}

%デフォルトでは，
%EGGXの描画関数やウィンドゥの装飾に関する関数は，
%関数から抜ける直前に{\tt XFlush()}を呼んで，
%直ちにXサーバがEGGXからの命令を反映するようにしています(自動フラッシュモード)．
By default, EGGX functions on drawing or window decoration call {\tt XFlush()} just before the end of the functions and the X server reflects a command from EGGX immediately (auto flush mode).
%しかし，
%Xサーバによっては，{\tt XFlush()}の連発によって描画パフォーマンスが
%低下する事があります．
However, on some X servers, drawing performance might be lowered by using {\tt XFlush()} too often.

%{\tt flag}に{\tt ENABLE}を設定してgsetnonflush()関数が呼ばれると，
%それ以降，EGGXの関数内部で{\tt XFlush()}
%が呼ばれなくなり，
%ユーザ・プログラム側で，gflush()関数(\S \ref{gflush})
%を呼んで任意のタイミングでフラッシュする事ができるようになります
(%非自動フラッシュモード)．
Once {\tt gsetnonflush()} is called with {\tt flag} set to {\tt ENABLE}, {\tt XFlush} will never be called inside the EGGX functions.
Then you can flush whenever you want by calling {\tt gflush()} (\S \ref{gflush}) from a user's program (manual flush mode).

%デフォルトの状態に戻すには，{\tt flag}に{\tt DISABLE}
%を与えてください．
To change the setting back to the default, set {\tt flag} to {\tt DISABLE}.
%gsetnonflush()関数の呼び出しは，
%ウィンドゥのオープンの前あるいは後のどのタイミングでも有効です．
{\tt gsetnonflush()} can be called anytime before or after a window is opened.

%ggetnonflush()関数は，現在の自動フラッシュに関する設定を
%読み取ります．gsetnonflush()関数で設定された値が返ります．
{\tt ggetnonflush()} gets the current value on the settings of auto flush. It returns the value set by {\tt gsetnonflush()}.

\shiyorei{\verb|gsetnonflush(ENABLE) ;|}


\subsubsection{void gflush()}
\label{gflush}

\kino{Flush drawing commands}

%描画関数等で発行したXサーバに対する一連の命令をフラッシュします．
%gsetnonflush()関数で非自動フラッシュモードを設定した時に使います．
This function flushes a series of commands against the X server ordered by drawing functions.
Use this when the manual flush mode is set by {\tt gsetnonflush()}.

\shiyorei{\verb|gflush() ;|}

\subsubsection{void gsetinitialattributes( int values, int att\_msk )}
\label{gsetinitialattributes}

\kino{Set the attributes of the window opened with {\tt gopen()}}

%gopen()関数で開かれる新規ウィンドゥの
%各種属性を変更します．gsetinitialattributes()関数で
%一旦ある属性を変更すると，以降gopen()関数で
%開くウィンドゥすべてにその指定が反映されます．
This function sets various window attributes opened with {\tt gopen()}.
Once an attribute is set by {\tt gsetinitialattributes()}, the attribute is reflected to all windows opened with {\tt gopen()} after that.

%ウィンドゥ属性は，次に示す4つのビットフラグで表現され，
%{\tt values}には，{\tt ENABLE}(全有効)，{\tt DISABLE}(全無効)
%あるいは任意の属性値を指定し，
%{\tt att\_msk}には各属性に対する変更フラグ(マスク)を指定します．
The window attribute is expressed with four-bit flags shown below,
{\tt values} is specified with {\tt ENABLE}(all is effective) or {\tt DISABLE} (all is invalid)
 or the arbitrary property value, {\tt att\_msk} is specified by a change flag to each attribute (mask).

\begin{itemize}
 \item
      \verb|BOTTOM_LEFT_ORIGIN|

      %ウィンドゥの左下をウィンドゥ座標系の原点(0,0)にします．
      %デフォルトではこの属性は有効になっています．
      This attribute sets the bottom-left corner of a window as the origin (0,0) of the window coordinate system.
      This attribute is enabled by default.

      %この属性を無効に設定すると，
      %ウィンドゥ座標系の原点はウィンドゥの左上になります．
      If this attribute is set to disabled, the origin is changed to the top-left of the window.
\item
      \verb|SCROLLBAR_INTERFACE|

      %EGGXによるスクロールバー・インタフェースを提供します．
      %デフォルトではこの属性は有効になっています．
      The scrollbar interface by EGGX is offered.
      This attribute is enabled by default.

      %この属性を無効に設定すると，
      %ウィンドゥがリサイズされてもスクロールバーはつきません．
      If this attribute is disabled, the scrollbar does not appear even if a window is resized.
 \item
      \verb|OVERRIDE_REDIRECT|

      %XにおけるOverrideRedirect属性を指定します．
      %デフォルトではこの属性は無効になっています．
      The OverrideRedirect attribute in X is specified.
      This attribute is disabled by default.

      %OverrideRedirect属性で開いたウィンドゥは，ウィンドゥマネージャの
      %介入をうけず，ウィンドゥに枠がつきません．また，
      %ウィンドゥを開いた時は常に最前面に表示されます．
      %このモードはアプリケーション起動時の
      %バナー表示などに用いられる事があります．
      The window opened with the OverrideRedirect attribute is not interposed by a window manager and has no window frame.
      This window is displayed on top at all times.
      This mode is sometimes used for displaying a banner upon launch of an application.
\item
      \verb|DOCK_APPLICATION|

      %この属性を有効にすると，
      %AfterStep，WindowMakerのアプレットとなるための各種設定を
      %行なうようになります．
      %デフォルトではこの属性は無効になっています．
      If this attribute is enabled, the window is configured to become an applet of AfterStep or WindowMaker.
      This attribute is disabled by default.

      %この属性を有効に設定すると，
      %ウィンドゥがリサイズされてもスクロールバーはつきません．
      If this attribute is enabled, the scrollbar does not appear even if the window is resized.
\end{itemize}

%次の例は，\verb|DOCK_APPLICATION|属性を有効にする例です．
The following is an example to enable the \verb|DOCK_APPLICATION| attribute: 

\shiyorei{\verb|gsetinitialattributes(ENABLE, DOCK_APPLICATION) ;|}

\vspace*{2.5mm}

%複数の属性を変更する場合は，次のようにします．
%この例では，\verb|OVERRIDE_REDIRECT|属性を有効にし，
%\verb|BOTTOM_LEFT_ORIGIN|属性を無効にしています．
To change multiple attributes, set as follows.
In this example, \verb|OVERRIDE_REDIRECT| is enabled and \verb|BOTTOM_LEFT_ORIGIN| is disabled.

\shiyorei{\verb'gsetinitialattributes(OVERRIDE_REDIRECT, BOTTOM_LEFT_ORIGIN | OVERRIDE_REDIRECT) ;'}

\vspace*{2.5mm}

%属性値のすべてのビットを設定する場合は，次のように{\tt att\_msk}を{\tt -1}に
%(すなわち全ビットを1に)します．
To set all bits of the attribute, set {\tt -1} for {\tt att\_msk} (that is, set 1 for all bits) as follows:

\shiyorei{\verb'gsetinitialattributes(SCROLLBAR_INTERFACE | BOTTOM_LEFT_ORIGIN, -1) ;'}


\subsubsection{int ggetinitialattributes()}
\label{ggetinitialattributes}

\kino{Get the attributes of the window opened with {\tt gopen()}}

%現在設定されている，{\tt gopen()}のための属性値を読み取ります．
%gsetinitialattributes()関数で設定された値が返ります．
This function reads the current attribute value for {\tt gopen()}.
The value set by {\tt gsetinitialattributes()} is returned.

\shiyorei{\verb|att=ggetinitialattributes() ;|}


\subsubsection{void gsetinitialbgcolor( const char *argsformat, ... )}
\label{gsetinitialbgcolor}

\kino{Set the background color of the window opened with {\tt gopen()}}

%gopen()関数で開かれる新規ウィンドゥの
%背景色(gclr()関数(\S\ref{gclr})で初期化される色)を指定します．
%{\tt argsformat}(とそれに続く引数)で指定される文字列
%を背景色として設定します．
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
%この背景色の文字列には，
%Xサーバの{\tt rgb.txt}\footnt{%
%{\tt rgb.txt}はUNIX系のOSなら {\tt /usr/X11R6/lib/X11/}
%などにあります．}
%に設定されている色か，
%\verb|"#c0c0ff"|のように，16進数のRed,Green,Blue
%を指定します．
This function specifies the background color (that is initialized with {\tt gclr()} (\S\ref{gclr})) of the windows opened with {\tt gopen()}. 
The character string specified with {\tt argsformat} (and the subsequent arguments) is set to the background color. 
These arguments are variable arguments as is the case with {\tt printf()} in C standard functions.
Specify a color included in {\tt rgb.txt}\footnt{%
{\tt rgb.txt} may be included in /usr/X11R6/lib/X11/ in UNIX OS.}
 on the X server or hexadecimal RGB values such as \verb|"#c0c0ff"| as this string of the background color.

%{\tt argsformat}が{\tt NULL}の場合は，
%デフォルトの設定(黒)に戻します．
If {\tt NULL} is set for {\tt argsformat}, it restore to the default setting (black).

\shiyorei{\verb|gsetinitialbgcolor("white") ;|}

\subsubsection{void gsetborder( int wn, int width, const char *argsformat, ... )}
\label{gsetborder}

\kino{Set the width and color of window borders}

%{\tt wn}で指定されたウィンドゥのボーダー(枠)の幅ととカラーを変更します．
This changes the width and color of borders (frames) of a the window specified with {\tt wn}.
%引数{\tt width}にはボーダーの幅をピクセル単位で指定します．
Set the border width in dots for the argument {\tt width}.
%{\tt argsformat}(とそれに続く引数)で指定される文字列
%をボーダーの色に設定します．
The string specified with {\tt argsformat} (and subsequent arguments) is set as the border color.
%3つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
The third and higher arguments are variable arguments as is the case with {\tt printf()} in C standard functions.

%この関数でのボーダーの指定は，
%gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%で\verb|OVERRIDE_REDIRECT|のウィンドゥ属性を
%指定した時だけ機能します．

%一般的に，ウィンドゥのボーダーは
%ウィンドゥマネージャによって再設定されるので，
%ここで設定した値は無効になります．
Generally, since the window border is reset by a window manager, the value set by this function is disabled.
%ただし，OverrideRedirect属性なウィンドゥの場合は，
%この設定が反映されます．
However, as for a window that has the OverrideRedirect attribute, this setting is reflected.
%OverrideRedirect属性については，
%gsetinitialattributes()関数(\S\ref{gsetinitialattributes})
%の解説を参照してください．
See the description of {\tt gsetinitialattributes()} (\S\ref{gsetinitialattributes}) for the OverrideRedirect attribute.

%{\tt width}が負の場合，{\tt argsformat}が{\tt NULL}の場合は
%それぞれ設定変更を行ないません．
If the {\tt width} is a negative value or {\tt argsformat} is {\tt NULL}, the setting is not changed.

\shiyorei{\verb|gsetborder(win,1,"white") ;|}
%
\subsubsection{void gsetinitialborder( int width, const char *argsformat, ... )}
\label{gsetinitialborder}

\kino{Set the borders of the window opened with {\tt gopen()}}

%gopen()関数で開かれる新規ウィンドゥの
%ボーダー(枠)の幅とカラーを指定します．
This specifies the width and color of borders (frames) of the window opened with {\tt gopen()}.
%引数{\tt width}にはボーダーの幅をピクセル単位で指定します．
Set the border width in pixels for the argument {\tt width}.
%{\tt argsformat}(とそれに続く引数)で指定される文字列をボーダーの色に設定します．
The string specified with {\tt argsformat} (and subsequent arguments) is set as the border color.
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
The second and higher arguments are variable arguments as is the case with {\tt printf()} in C standard functions.

%{\tt width}が負の場合，{\tt argsformat}が{\tt NULL}の場合は
%それぞれ設定変更を行ないません．
If the {\tt width} is a negative value or {\tt argsformat} is {\tt NULL}, the setting is not changed.

%デフォルトではボーダー幅は{\tt 0}，
%ボーダーカラーは{\tt Black}に設定されています．
The border width and the border color are set to {\tt 0} and {\tt Black}, respectively, by default.

\shiyorei{\verb|gsetinitialborder(1,"White") ;|}
%
\subsubsection{void gsetinitialgeometry( const char *argsformat, ... )}
\label{gsetinitialgeometry}

\kino{Set the size and the appearance position of new windows from a string}

%gopen()関数で開かれる新規ウィンドゥの
%大きさと出現位置を，
%{\tt argsformat}(とそれに続く引数)で指定される文字列
%から決定します．
This specifies the size and the appearance position of new window opened with {\tt gopen()} from strings 
specified with {\tt argsformat} (and subsequent arguments).
%2つめの引数
%{\tt argsformat}以降は，C標準関数のprintf()関数の場合と同様の
%可変引数となっています．
The second and higher arguments are variable arguments as is the case with {\tt printf()} in C standard functions.
%X11のクライアントでは標準的な「{\tt -geometry}」に続く
%コマンドオプション，例えば \verb|"800x600+100-200"| ような文字列を
%与えることができます．
Command options following ``{\tt -geometry}'' such as string
\verb|"800x600+100-200"|, which are standard in X11 clients, can be set for the argument.
%{\tt argsformat}が{\tt NULL}の場合には
%デフォルトすなわち無指定の状態に戻します．
If {\tt argsformat} is {\tt NULL}, this function restores to the default setting, which means neither size nor the appearance position is specified.
%使用例のようにすると，整数値を与えることもできます．
Integer values also can be set for the argument as follows:

\shiyorei{\verb|gsetinitialgeometry("800x600\%+d\%+d",-30,40) ;|}
%
\subsubsection{void gsetinitialwinname( const char *storename, const char *iconname,\\
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~const char *resname, const char *classname )}
\label{gsetinitialwinname}

\kino{Set a window name, an icon name, a resource name and a class name of new windows}

%デフォルトでは，ウィンドゥ名やアイコン名はユーザプログラムの
%コマンド名から決定されますが，この関数を使う事で
%gopen()関数で開かれる新規ウィンドゥの
%ウィンドゥ名，アイコン名，リソース名，クラス名を
%引数{\tt storename}，{\tt iconname}，{\tt resname}，{\tt classname}
%で指定できます．
A window name, an icon name, a resource name, and a class name are determined from a command name of a user's program.
However, by using this function, those names of new window opened with {\tt gopen()} can be specified 
with the arguments {\tt storename}, {\tt iconname}, {\tt resname} and{\tt classname}.

%それぞれの引数に{\tt NULL}を与えると，それぞれをデフォルトの設定
%に戻します．
If {\tt NULL} is set for each argument, the corresponding name is restored to the default setting.

\shiyorei{\verb|gsetinitialwinname("AyuClock","AyuClock","ayuclock","AyuClock") ;|}


\subsubsection{void gsetscrollbarkeymask( int wn, unsigned int keymask )}
\label{gsetscrollbarkeymask}

\kino{Set a keymask for the key operation of EGGX's scrollbar}

%EGGXでは，ディスプレイのサイズに収まりきらない画素サイズを引数として
%gopen()関数が呼ばれた場合や，ユーザがウィンドゥをリサイズした
%場合に，スクロールバー・インタフェースを提供します．
EGGX offers a scrollbar interface when {\tt gopen()} is called with the argument greater than the display size or when a user resizes a window.

%このスクロールバーは，デフォルトでは
%Altキーを押しながらカーソルキー等で操作できるようになっていますが，
%この関数でこの仕様を変更できます．
This scrollbar can be moved by pressing the Alt-arrow key by default.
With this function, you can change this specification.

%引数{\tt keymask}には，次の表にある値を与えます．
Set the values listed in the following table for argument {\tt keymask}:

\begin{center}
%\renewcommand{\arraystretch}{0.90}
\begin{tabular}{ll}
  \hline 
  Mask Value & Description \\
  \hline 
  {\tt ShiftMask}
    %& Shiftキーが押されている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while the Shift key is pressed \\
  {\tt LockMask}
    %& CapsLockされている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while the CapsLock key is pressed \\
  {\tt ControlMask}
    %& Ctrlキーが押されている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while the Ctrl key is pressed \\
  {\tt Mod1Mask}
    %& Altキーが押されている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while the Alt key is pressed \\
  {\tt Mod2Mask}
    %& NumLockされている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while NumLock is on \\
  {\tt Mod5Mask}
    %& ScrollLockされている時のみスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled only while ScrollLock is on \\
  {\tt 0}
    %& 常にスクロールーバーのキー操作が有効 \\
    & Key operation of the scrollbar is enabled at all times \\
  \hline 
\end{tabular}
\end{center}

%{\tt keymask}に{\tt 0}を与えた場合には，
%ggetch()関数(\S \ref{ggetch})等でカーソルキー等の入力イベントを
%扱う事ができなくなりますので，注意してください．
Note that if {\tt 0} is set for {\tt keymask}, input event of arrow keys is disabled in {\tt ggetch()} (\S \ref{ggetch}), etc.

\shiyorei{\verb|gsetscrollbarkeymask(win, ShiftMask) ;|}


\subsubsection{int generatecolor( color\_prms *p, double dmin, double dmax, double data,\\
~~~~~~~~~~~~~~~~~~~~~~~~int *r, int *g, int *b )}
\label{generatecolor}

\kino{Generate a color from variables (contrast, brightness and gamma can be modified)}

%変数{\tt data}の値を使って，{\tt r},{\tt g},{\tt b} それぞれに
%256段階のRed,Greed,Blueのカラーを生成します．
This generates 256 RGB color values to {\tt r}, {\tt g}, and {\tt b} from the values of a variable {\tt data}.
%変数の最小，最大は{\tt dmin},{\tt dmax}で指定します．
Specify the minimum and the maximum of the variable with {\tt dmin} and {\tt dmax}.
%この関数で得た，{\tt r},{\tt g},{\tt b}の
%値はnewrgbcolor()関数(\S\ref{newrgbcolor})
%にそのまま与えて使う事ができます．
The values of {\tt r}, {\tt g}, and {\tt b} can be used to set for the argument of {\tt newrgbcolor()} (\S\ref{newrgbcolor}) as it is.

%返り値は{\tt data}が{\tt dmin},{\tt dmax}の範囲内に
%あった場合は{\tt 0}を返し，{\tt dmin}未満であれば負の値を，
%{\tt dmax}を越えていれば，正の値を返します．
This function returns {\tt 0} if {\tt data} is between {\tt dmin} and {\tt dmax}, 
{\tt -1} if {\tt data} is smaller than {\tt dmin} or {\tt 1} if {\tt data} is larger than {\tt dmax}.

%現在のEGGXでは，
%構造体{\tt color\_prms}は次のようなメンバ構成になっていますが，
%将来拡張する可能性がありますので，
%変数宣言時に初期値を代入するコードは書かない事をお勧めします．
In the current version of EGGX, the {\tt struct color\_prms} consists of the following members, however, this may be extended in the future.
So it is not recommended to set the initial values upon declaration of variables.

{\small
\begin{verbatim}
    typedef struct _color_prms {
        int colormode ;
        int flags ;
        double contrast ;
        double brightness ;
        double gamma ;
        int seplevel ;
        void *ptr ;
        void (*function)( double,void *,double,double,double,double *,double *,double * ) ;
    } color_prms ;
\end{verbatim}
}

%{\tt colormode}はカラーパターンの番号で，
%詳細は，makecolor()関数(\S\ref{makecolor})をご覧ください．
{\tt colormode} is the index of a color pattern. See {\tt makecolor()} (\S\ref{makecolor}) for more information.

%{\tt flags}は，
%コントラスト{\tt contrast}，
%ブライトネス{\tt brightness}，
%ガンマ補正{\tt gamma}，
%カラーセパレーションレベル{\tt seplevel}，
%ユーザ関数{\tt function}，
%のどれを有効にするかを示すためのフラグです．
{\tt flags} is the flag to enable the contrast {\tt contrast}, the brightness {\tt brightness}, the gamma correction {\tt gamma}, the color separation level {\tt seplevel}, and/or the user function {\tt function}.

%\vspace*{4mm}
%\begin{center}
%\renewcommand{\arraystretch}{0.90}
%\begin{tabular}{lll}
%\hline
%フラグ & 対応するメンバ & 解説 \\
%\hline
%{\tt C\_REVERSE} & - & カラーパターンをデータ{\tt data}の大小と逆にする \\
%{\tt CP\_CONTRAST} & {\tt contrast} & コントラスト制御を有効化．
%                            ({\tt 0} $\le$ {\tt contrast} $\le$ {\tt 1}) \\
%{\tt CP\_BRIGHTNESS} & {\tt brightness} & ブライトネス制御を有効化．
%                            ({\tt 0} $\le$ {\tt brightness} $\le$ {\tt 1}) \\
%{\tt CP\_GAMMA} & {\tt gamma} & ガンマ補正を有効化．
%                            ({\tt 0} $\le$ {\tt gamma} $\le$ {\tt 1}) \\
%{\tt CP\_SEPLEVEL} & {\tt seplevel} & カラーセパレーションレベルを有効化．
%                            ({\tt 2} $\le$ {\tt seplevel}) \\
%{\tt CP\_FUNCTION} & {\tt function} & ユーザ関数呼出しを有効化． \\
%\hline
%\end{tabular}
%\end{center}
\begin{center}
%\renewcommand{\arraystretch}{0.90}
\begin{tabular}{lll}
\hline
Flag                 & Corresponding Member & Description \\
\hline
{\tt C\_REVERSE}     & -                & Reverse the order of the color pattern for the value of {\tt data}\\
{\tt CP\_CONTRAST}   & {\tt contrast}   & Enable the control of the contrast.({\tt 0} $\le$ {\tt contrast} $\le$ {\tt 1}) \\
{\tt CP\_BRIGHTNESS} & {\tt brightness} & Enable the control of the brightness.({\tt 0} $\le$ {\tt brightness} $\le$ {\tt 1}) \\
{\tt CP\_GAMMA}      & {\tt gamma}      & Enable the gamma correction.({\tt 0} $\le$ {\tt gamma} $\le$ {\tt 1}) \\
{\tt CP\_SEPLEVEL}   & {\tt seplevel}   & Enable the color separation level.({\tt 2} $\le$ {\tt seplevel}) \\
{\tt CP\_FUNCTION}   & {\tt function}   & Enable to call user functions. \\
\hline
\end{tabular}
\end{center}


%\vspace*{4mm}
%{\tt seplevel}を使うと，リニアに変化するカラーをデジタイズできます．
Using {\tt seplevel}, linear color gradation can be digitized.
%例えば，{\tt DS9\_GRAY8}ではリニアに黒から白へ変化しますが，
%{\tt seplevel=10}に設定しておくと，10色を使って段階的に変化するよう
%になります．
For example, the color changes from black to white linearly in {\tt DS9\_GRAY8}, however, it changes in a phased manner in the range of 10 colors when {\tt seplevel} is set to {\tt 10}.

%{\tt function}は{\tt generatecolor()}が処理の最後に
%実行するユーザ関数です．
{\tt function} is a user function executed at the end of processing by {\tt generatecolor()}.
%{\tt function}の引数はそれぞれ，
%{\tt data}をMax=1.0,Min=0.0で標準化した値，
%{\tt ptr}，Red,Green,Blueの値(inとout)となっています．
Arguments of {\tt function} are normalized {\tt data} by Max=1.0 and Min=0.0, {\tt ptr} and values of Red, Green, and Blue (in and out), respectively.
%この部分はEGGXのソースを見て理解できる方のみご利用ください．
Use this part only if you understand the source code of EGGX.

\shiyorei{\\
\vspace*{-2\baselineskip}\\
\verb|             color_prms cl ;|\\
\verb|             cl.colormode  = DS9_RAINBOW ;|\\
\verb#             cl.flags      = CP_CONTRAST | CP_BRIGHTNESS | CP_GAMMA ;#\\
\verb|             cl.contrast   = 1.0 ;|\\ 
\verb|             cl.brightness = 0.0 ;|\\ 
\verb|             cl.gamma      = 1.0 ;|\\ 
\verb|                 : |\\ 
\verb|             generatecolor(&cl,zmin,zmax,zvalue,&cl_r,&cl_g,&cl_b) ; |\\
}
%
%
%
%
%
%

\clearpage

\section{FORTRAN}
%
\subsection{ProCALL ROUTINES LIST}
\label{procall}
%
\subsubsection{ProCALL Standard Routines}
\begin{center}

%\renewcommand{\arraystretch}{0.90}
%\begin{tabular}{lll}
%{\small
\begin{tabular}{p{3zw}p{9zw}p{33zw}}
 \hline
 %章 & ルーチン名 & 機能 \\
 Chapter & Routine & Description \\
 \hline
 \S\ref{f_ggetdisplayinfo} &
   ggetdisplayinfo &
   %Xサーバの情報(depth,画面サイズ)を取得する
   Get informations (depth, display size) of the X server
   \\ %\hline
 \S\ref{f_gopen} &
   gopen & 
   %任意のサイズのグラフィックス用ウィンドゥを開く
   Open a graphics window of any size 
   \\ %\hline
 \S\ref{f_gclose} &
   gclose &
   %任意のグラフィックス用ウィンドゥを閉じる
   Close any windows for graphics
   \\ %\hline
 \S\ref{f_gcloseall} &
   gcloseall &
   %すべてのグラフィックス用ウィンドゥを閉じ，Xサーバと接続を断つ
   Close all windows for graphics and disconnect from the X server
   \\ %\hline
 \S\ref{f_newcoordinate} &
   newcoordinate &
   %アプリケーション座標系の変更(参照点の座標とスケールを与える)
   Change the application coordinate system (set the reference point and the scale)
   \\ %\hline
 \S\ref{f_newwindow} &
   newwindow &
   %アプリケーション座標系の変更(左下と右上の座標を与える)
   Change the application coordinate system (set the the bottom-left and the top-right coordinates)
   \\ %\hline
 \S\ref{f_layer} &
   layer &
   %レイヤの設定を行う
   Configure a layer setting
   \\ %\hline
 \S\ref{f_copylayer} &
   copylayer &
   %レイヤのコピーを行う
   Copy a layer
   \\ %\hline
 \S\ref{f_gsetbgcolor} &
   gsetbgcolor &
   %ウィンドゥのバックグラウンドカラー(gclrでの色)を指定する
   Set the background color (in {\tt gclr}) of a window
   \\ %\hline
 \S\ref{f_gclr} &
   gclr &
   %グラフィックス用ウィンドゥの消去
   Clear a window for graphics
   \\ %\hline
 \S\ref{f_tclr} &
   tclr &
    %端末画面の消去
   Clear a terminal display
   \\ %\hline
 \S\ref{f_newpencolor} &
   newpencolor &
   %描画色(16色)の変更
   Change a drawing color (16 colors)
   \\ %\hline
 \S\ref{f_newcolor} &
   newcolor &
   %描画色の変更(Xサーバの持つ色を直接指定)
   Change a drawing color (specify the X server's colors directly)
   \\ %\hline
 \S\ref{f_newrgbcolor} &
   newrgbcolor &
   %描画色の変更(Red,Green,Blueの輝度を指定)
   Change a drawing color (specify the brightness of Red, Green and Blue)
   \\ %\hline
 \S\ref{f_newhsvcolor} &
   newhsvcolor &
   %描画色の変更(Hue,Saturation,Valueを指定)
   Change a drawing color (specify Hue, Saturation and Value)
   \\ %\hline
 \S\ref{f_makecolor} &
   makecolor &
   %変数からカラーを生成する(カラーバー生成)
   Generate a color from variables (generate a color bar)
   \\ %\hline
 \S\ref{f_newlinewidth} &
   newlinewidth &
   %線幅の変更
   Change line width
   \\ %\hline
 \S\ref{f_newlinestyle} &
   newlinestyle &
   %線のスタイルの変更
   Change line style
   \\ %\hline
 \S\ref{f_pset} &
   pset &
   %点の描画
   Draw a point
   \\ %\hline
 \S\ref{f_drawline} &
   drawline &
   %直線の描画
   Draw a line
   \\ %\hline
 \S\ref{f_lineto} &
   moveto, lineto &
   %連続的に直線を描く
   Draw a line continuously
   \\ %\hline
% line & 連続的に直線を描く
% & \S\ref{f_line} \\ %\hline
 \S\ref{f_drawpts} &
   drawpts &
   %複数の点を描く
   Draw points
   \\ %\hline
 \S\ref{f_drawlines} &
   drawlines &
   %折れ線を描く
   Draw a polygonal line
   \\ %\hline
 \S\ref{f_drawpoly} &
   drawpoly &
   %多角形を描く
   Draw a polygon
   \\ %\hline
 \S\ref{f_fillpoly} &
   fillpoly &
   %多角形を塗り潰す
   Fill a polygon
   \\ %\hline
 \S\ref{f_drawrect} &
   drawrect &
   %長方形を描く
   Draw a rectangle
   \\ %\hline
 \S\ref{f_fillrect} &
   fillrect &
   %長方形の領域を塗り潰す
   Fill a rectangle
   \\ %\hline
 \S\ref{f_drawcirc} &
   drawcirc &
   %中心座標と半径を与えて円を描く
   Draw a circle by specifying the center coordinate and the radius
   \\ %\hline
 \S\ref{f_fillcirc} &
   fillcirc &
   %中心座標と半径を与えて円を塗り潰す
   Fill a circle by specifying the center coordinate and the radius
   \\ %\hline
 \S\ref{f_drawarc} &
   drawarc &
   %円の中心，半径，始点，終点の角度を与えて円弧を描く
   Draw an arc by specifying the center and radius of a circle and the angle of the starting point and the ending point
   \\ %\hline
 \S\ref{f_fillarc} &
   fillarc &
   %円の中心，半径，始点，終点の角度を与えて円弧を塗り潰す
   Fill an arc by specifying the center and radius of a circle and the angle of the starting point and the ending point
   \\ %\hline
 \S\ref{f_drawsym} &
   drawsym &
   %1個のシンボルの描画
   Draw a symbol 
   \\ %\hline
 \S\ref{f_drawsyms} &
   drawsyms &
   %複数のシンボルを描く
   Draw muliple symbols
   \\ %\hline
 \S\ref{f_drawarrow} &
   drawarrow &
   %種々の矢印の描画
   Draw various types of arrows
   \\ %\hline
 \S\ref{f_newfontset} &
   newfontset &
   %フォントセット(日本語フォント)の指定 
   Specify a font set (Japanese font)
   \\ %\hline
 \S\ref{f_drawstr} &
   drawstr &
   %文字列の描画 
   Draw a string
   \\ %\hline
 \S\ref{f_drawnum} &
   drawnum &
   %実数の値を描く
   Draw a real number
   \\ %\hline
 \S\ref{f_putimg24} &
   putimg24 &
   %整数配列に用意した画像をウィンドゥに一括転送する
   Transfer images prepared in an integer array to a window collectively
   \\ %\hline
 \S\ref{f_saveimg} &
   saveimg &
   %特定のレイヤの画像をコンバータ(netpbm等)を通してファイルに保存する
   Save an image to a file through the converter (netpbm, ImageMagick)
   \\ %\hline
 \S\ref{f_gsetnonblock} &
   gsetnonblock &
   %ggetch，ggetevent，ggetxpressルーチンの動作モードを設定する
   Configure the operating mode of ggetch, ggetevent and ggetxpress routines
   \\ %\hline
 \S\ref{f_ggetch} &
   ggetch &
   %キーボードから入力された文字を返す
   Return a character inputted from the keyboard
   \\ %\hline
 \S\ref{f_ggetevent} &
   ggetevent &
   %マウスやキーボードからの入力の情報を返す
   Return input information from the mouse or the keyboard
   \\ %\hline
 \S\ref{f_ggetxpress} &
   ggetxpress &
   %マウスからのボタンクリック，キーボードからの入力の情報を返す
   Return information of clicking mouse buttons or input from the keyboard
   \\ %\hline
 \S\ref{f_selwin} &
   selwin &
   %カルコンプ互換ルーチンで，どのウィンドゥにアクセスするか指定する
   Specify a window to be accessed with Calcomp-compatible routines
   \\ %\hline
 \hline
\end{tabular}
%}
\end{center}
%
\subsubsection{Calcomp-Compatible Routines}
{\small
\begin{center}
%\begin{tabular}{lll}
\begin{tabular}{p{3zw}p{9zw}p{33zw}}
 \hline
 Chapter & Routine & Description \\
 \hline
 \S\ref{f_plots} &
   plots &
   %640×400ピクセルのグラフィックス用ウィンドゥを開く
   Open a 640 × 400 dot window for graphics 
   \\ %\hline
 \S\ref{f_window} &
   window &
   %座標系の変更
   Change coordinate system
   \\ %\hline
 \S\ref{f_newpen} &
   newpen &
   %描画色の変更
   Change drawing color
   \\ %\hline
 \S\ref{f_clsc} &
   clsc &
   %端末画面の消去
   Clear a terminal display
   \\ %\hline
 \S\ref{f_clsx} &
   clsx &
   %グラフィックス画面の消去
   Clear a graphics display
   \\ %\hline
 \S\ref{f_plot} &
   plot &
   %直線・点の描画 
   Draw a line or a point
   \\ %\hline
 \S\ref{f_arc} &
   arc &
   %円の中心，半径，始点，終点の角度を与えて円弧を描く
   Draw an arc by specifying the center and radius of a circle and the angle of the starting point and the ending point
   \\ %\hline
 \S\ref{f_circ1} &
   circ1 &
   %中心座標と半径を与えて円を描く
   Draw a circle by specifying the center coordinate and the radius
   \\ %\hline
 \S\ref{f_arohd} &
   arohd &
   %種々の矢印の描画
   Draw various types of arrows
   \\ %\hline
 \S\ref{f_symbol} &
   symbol &
   %文字列または1個のシンボルの描画
   Draw a string or a symbol 
   \\ %\hline
 \S\ref{f_number} &
   number &
   %実数の値を描く
   Draw a real number
   \\ %\hline
 \hline
\end{tabular}
\end{center}
}
%
\subsubsection{Auxiliary Routines}
\begin{center}
\begin{tabular}{lll}
 \hline
 Chapter & Routine name & Function \\
 \hline
 \S\ref{f_msleep} &
   msleep &
   %ミリ秒単位で実行を延期する
   Wait an execution in milliseconds
    \\ %\hline
 \S\ref{f_isnan} &
   isnan &
   %実数型変数が非数(Not a Number)かどうか調べる
   Check whether a real number variable is ``Not a Number''
   \\ %\hline
 \S\ref{f_rtoc} &
   rtoc &
   %実数型変数を文字列に変換する
   Convert a real number variable to a string
   \\ %\hline
 \hline
\end{tabular}
\end{center}
%
%
\subsection{BASIC USAGE}
%
%ユーザプログラムについての特別な注意はありません．
%プログラムを書いたら，コンパイルは {\tt egg} コマンドを用います．
There is no special notice on user programs.
After coding a program, use the {\tt egg} command for compiling.

\rei {\verb|egg program.f -o program|}

\subsection{HOW TO SPEED UP DRAWING}
%
%layerルーチン(\S\ref{f_layer})と
%copylayerルーチン(\S\ref{f_copylayer})とを使って，
%描画ルーチンでは常に非表示レイヤに描きましょう．描き終わったら，
%copylayerルーチンを使って，
%非表示レイヤを表示レイヤにコピーします．
%このようにする事で，かなり描画速度が改善されます．
Draw always in an invisible layer when you use drawing routines, by using {\tt layer} (\S\ref{f_layer}) and {\tt copylayer} (\S\ref{f_copylayer}).
After finishing drawing, copy the invisible layer to the visible layer by using {\tt copylayer}.
This approach can enhance the drawing speed appreciably.
%
%\newpage
%\setlength{\tabcolsep}{1.5mm}
%
\subsection{ProCALL STANDARD ROUTINES REFERENCE}

%ここからは，PROCALL独自のルーチンです．
%
\subsubsection{ggetdisplayinfo(ndepth,nrwidth,nrheight)}
\label{f_ggetdisplayinfo}

%\kino{Xサーバの情報(depth，画面サイズ)を取得する}
\kino{Get information (depth and screen size) on the X server}

%Xサーバに接続し，depth，画面サイズを調べます．
%{\tt ndepth}には
%ProCALLでウィンドゥをオープンした時に使われる
%depth値(ピクセルに何ビット使っているか)，すなわち
%{\tt 8}(PseudoColor：256色カラー)，
%{\tt 16}(TrueColor：65536色カラー)，
%{\tt 24}(TrueColor：1677万色カラー)
%といった値が返ってきます．
%{\tt nrwidth}，{\tt nrheight}には，それぞれ
%Xサーバの画面のピクセルサイズが返ります．
%なお，Xサーバへの接続が失敗した場合は{\tt ndepth}には負の値
%が返ってきます．
This routine connects to the X server and check its depth and screen size.
The values returned to {\tt ndepth} are those of the depth used upon opening of a window in ProCALL, for example 
{\tt 8} (PseudoColor: 256 colors), 
{\tt 16} (TrueColor: 65536 colors), and 
{\tt 24} (TrueColor: 16 million colors) 
is returned to {\tt ndepth}.
The screen size of the X server is returned to {\tt nrwidth} and {\tt nrheight}.
If it fails to connect to the X server, a negative value is returned to {\tt ndepth}.

\shiyorei{\verb|call ggetdisplayinfo(ndepth,nrwidth,nrheight)|}
%
%
\subsubsection{gopen(nxsize,nysize,nw)}
\label{f_gopen}

%\kino{任意のサイズのグラフィックス画面を開く}
\kino{Open a graphics screen of any size}

%任意のサイズの描画領域を持つウィンドゥを開きます．
This routine opens a window that has a drawing area of arbitrary size.

%引数{\tt nxsize}，{\tt nysize}にはそれぞれ横方向，
%縦方向の描画領域のピクセル数を指定します．
%指定できる最大値は，32767です．
Specify horizontal and vertical pixels of the drawing area by the argument {\tt nxsize} and {\tt nysize}, respectively.
The maximum pixels are 32767. 

%{\tt nw}にはProCALLで使用するウィンドゥ番号(整数)が返ってきます．
%{\tt gopen}を呼ぶと，{\tt nw}には
%ProCALL側で生成されたウィンドゥ番号が設定されるため，
%{\bf ユーザが{\tt nw}に値を代入しておく必要はありません}．
%ここで取得したウィンドゥ番号はProCALLのグラフィックス
%描画ルーチンに渡します．
An integer window index used in ProCALL is returned to {\tt nw}.
Since the window index generated by ProCALL is set to {\tt nw} when {\tt gopen} is called, {\bf users do not need to set a value to {\tt nw}}．
Use this window index to set it to the drawing routines in ProCALL.

%デフォルトでは，
%ルートウィンドゥ(つまり背景)のピクセル数とほぼ同じ，
%あるいはそれを越えるサイズの描画領域が指定された場合には，
%描画領域よりも小さいウィンドゥを開きます%
%\footnt{%
%EGGX/ProCALLのビルド時にXineramaが有効にされていた場合は，
%最小サイズのディスプレイのピクセルサイズと比較されます．
%}%
%．
%この場合，スクロールバー・インタフェースが提供され，
%マウスまたはキーボードから任意の描画領域を表示する事が可能です．
If the drawing area that is almost the same size as or larger than the root window (background) is specified, a smaller window than the drawing area is opened by default
\footnt{%
If Xinerama is available upon the build of EGGX/ProCALL, 
it is compared with the pixel size of the smallest display. 
}%
．
In this case, the scrollbar interface is offered, 
and it is possible to display anywhere in the drawing area by using the mouse or the keyboard.

%互換ルーチンでどのウィンドゥにアクセスするかは，
%このウィンドゥ番号{\tt nw}を selwinルーチン(\S\ref{f_selwin})
%で指定します．
The window accessed with compatible routines is specified with the window index {\tt nw} in the routine selwin(\S\ref{f_selwin}).

\shiyorei{\verb|call gopen(800,600,nwin)|}
%
\subsubsection{gclose(nw)}
\label{f_gclose}

%\kino{グラフィックス用ウィンドゥを閉じる}
\kino{Close a window for graphics}

%{\tt nw}で指定されたウィンドゥを閉じます．
This routine closes any window specified with {\tt nw}.

\shiyorei{\verb|call gclose(nwin)|}
%
\subsubsection{gcloseall}
\label{f_gcloseall}

%\kino{すべてのグラフィックス用ウィンドゥを閉じ，Xサーバと接続を断つ}
\kino{Close all windows for graphics and disconnect from the X server}

%全てのウィンドゥを閉じ，Xサーバと接続を断ち，
%ライブラリの内部処理で利用しているメモリ領域を開放します．
This routine closes all windows, disconnects from the X server, 
and frees the memory area used by the internal processing of the library.

\shiyorei{\verb|call gcloseall|}
%
%\subsubsection{orgeometry(nx,ny,nb)}
%
%\kino{plotsやgopenで開くウィンドゥ座標を指定する}
%
%このルーチンを呼ぶと，
%{\tt call plots}または{\tt call gopen(…)}で次に開くウィンドゥ
%に限り，
%{\gt Xサーバでの座標}({\tt nx}, {\tt ny})に
%{\tt nb}で指定した幅で外枠をつけて表示します
%(ウィンドゥマネージャによるデコレーションはつきません)．
%{\tt nb}が0の場合は外枠をつけません．
%なお，引数はすべて整数値です．
%
%\begin{center}
%\includegraphics[scale=1]{procall_orgeometry.eps}
%\end{center}
%
%\shiyorei{\verb|call orgeometry(60,128,0)|}
%
\subsubsection{newcoordinate(nw,nxw,nyw,xa,ya,xscale,yscale )}
\label{f_newcoordinate}

%\kino{アプリケーション座標系の変更(参照点の座標とスケールを与える)}
\kino{Change the application coordinate system (set the reference point and the scale)}

%{\tt nw}で指定したウィンドゥのアプリケーション座標系を変更します
This routine changes the application coordinate system in the window specified with {\tt nw}.

%ウィンドゥ上のウィンドゥ座標系(座標値は整数)は，左下が({\tt 0}, {\tt 0})で，
%右上が({\tt nxsize-1}, {\tt nysize-1})であり，デフォルトでは
%アプリケーション座標系(座標値は実数)の座標値は
%ウィンドゥ座標系のそれに一致しています．
The bottom-left corner is ({\tt 0}, {\tt 0}) and the top-right corner is ({\tt nxsize-1}, {\tt nysize-1}) in the window coordinate system. (The coordinate value is an integer.)
The coordinate value of the application coordinate system corresponds to that of the window coordinate system by default. (The coordinate value of the application coordinate system is a real number.)

%newcoordinateルーチンを使う事により，
%アプリケーション座標系の({\tt xa}, {\tt ya})を
%ウィンドゥ座標系の({\tt nxw}, {\tt nyw})に対応させ，それぞれの
%スケーリングファクターを{\tt xscale}，{\tt yscale}で指定します．
({\tt xa}, {\tt ya}) of the application coordinate system can correspond to ({\tt nxw}, {\tt nyw}) of the window coordinate system by using {\tt newcoordinate}, and each scaling factor is specified with {\tt xscale} and {\tt yscale}. 
%すなわち，描画ルーチン等におけるアプリケーション座標$(x,y)$から
%ウィンドゥ座標$(\mbox{\tt nx},\mbox{\tt ny})$
%への変換は，次の式により行なわれる事を意味します:\\
This means that the conversion from the application coordinates $(x,y)$ to the window coordinates $(\mbox{\tt nx},\mbox{\tt ny})$ in the drawing functions etc. is done by the following expressions:\\
~~~~~~~~
$\mbox{\tt nx} = \mbox{\tt nxw} + (x - \mbox{ \tt xa}) \cdot \mbox{\tt xscale}$\\
~~~~~~~~
$\mbox{\tt ny} = \mbox{\tt nyw} + (y - \mbox{ \tt ya}) \cdot \mbox{\tt yscale}$

%ProCALLの描画ルーチンは，アプリケーション座標系(座標値は実数)で指定するので，
%このルーチンを一度使えば，座標系の変換は各描画ルーチンが自動的に行なうようになります．
Once this routine is called, each drawing routine converts the coordinate system automatically because the application coordinate system is used in the ProCALL drawing routines.

%次の使用例では，ウィンドゥの左下を
%アプリケーション座標系の(-40.0, -20.0)に対応させ，
%スケーリングファクターを縦・横とも2.0に設定します．
In the following example, the bottom-left of the window is set to (-40.0, -20.0) in the application coordinate system, and scaling factors of both x and y are set to 2.0. 

\shiyorei{\verb|call newcoordinate(nwin, 0,0, -40.0,-20.0, 2.0,2.0)|}

%座標系の変更には，
%newwindowルーチン(\S \ref{f_newwindow})を使う方法もあります．
%ご検討ください．
You can also use {\tt newwindow} (\S \ref{f_newwindow}) to change the coordinate system.
Please consider it. 
%
\subsubsection{newwindow(nw,xs,ys,xe,ye)}
\label{f_newwindow}

%\kino{アプリケーション座標系の変更(左下と右上の座標を与える)}
\kino{\small Change the application coordinate system (set the the bottom-left and the top-right coordinates)}

%{\tt nw}で指定したウィンドゥのアプリケーション座標系を変更します
%(実際のグラフィックスエリアの大きさが変わるわけではありません)．
This routine changes the application coordinate system in the window specified with {\tt nw}. 
(The size of an actual graphics area does not change.)

%ウィンドゥ上のウィンドゥ座標系(座標値は整数)は，左下が({\tt 0}, {\tt 0})で，
%右上が({\tt nxsize-1}, {\tt nysize-1})であり，デフォルトでは
%アプリケーション座標系(座標値は実数)の座標値は
%ウィンドゥ座標系のそれに一致しています．
The bottom-left corner is ({\tt 0}, {\tt 0}) and the top-right corner is ({\tt nxsize-1}, {\tt nysize-1}) in the window coordinate system. (The coordinate value is an integer.)
The coordinate value of the application coordinate system correspond to that of the window coordinate system by default. (The coordinate value of the application coordinate system is a real number.)

%newwindowルーチンを使う事により，
%アプリケーション座標系の左下
%(つまりウィンドゥ座標系での({\tt 0}, {\tt 0}))を({\tt xs}, {\tt ys})，
%右上を({\tt xe}, {\tt ye})に変更できます．
The bottom-left corner (({\tt 0}, {\tt 0}) in the window coordinate system) and the top-right corner can be changed to ({\tt xs}, {\tt ys}) and ({\tt xe}, {\tt ye}), respectively, by using {\tt newwindow}.

%ProCALLの描画ルーチンは，アプリケーション座標系(座標値は実数)で指定するので，
%このルーチンを一度使えば，座標系の変換は各描画ルーチンが自動的に行なうようになります．
Once this routine is called, each drawing routine convert the coordinate system automatically because the application coordinate system is used in the ProCALL drawing routines.

%次の使用例では，アプリケーション座標系の左下を(-20.0, -10.0)，
%右上を(799.0, 599.0)に変更します．
In the following example, the bottom-left and the top-right corner in the application coordinate system are set to (-20.0, -10.0) and (799.0, 599.0), respectively. 

\shiyorei{\verb|call newwindow(nwin, -20.0, -10.0, 799.0, 599.0)|}

%座標系の変更には，
%newcoordinateルーチン(\S \ref{f_newcoordinate})を使う方法もあります．
%ご検討ください．
You can also use {\tt newcoordinate} (\S \ref{f_newcoordinate}) to change the coordinate system.
Please consider it. 
%
\subsubsection{layer(nw,lys,lyw)}
\label{f_layer}

%\kino{レイヤの設定をする}
\kino{Configure a layer}

%ProCALLではグラフィックス用ウィンドゥ毎に8枚のレイヤを持ち，
%表示するレイヤと書き込むレイヤを独立に指定できます．
%{\tt nw}にはウィンドウ番号を指定し，
%{\tt lys}には表示するレイヤ番号，
%{\tt lyw}には書き込むレイヤ番号を{\tt 0}〜{\tt 7}の整数で指定します．
In ProCALL, each window for graphics has eight layers.
You can specify the layers for displaying and drawing separately.
Set the window index for {\tt nw}.
Set the layer index for displaying and for drawing in the range of {\tt 0} to {\tt 7} for {\tt lys} and {\tt lyw}, respectively.

%なお，現在表示しているレイヤに対して
%({\tt lys = lyw}の場合に)
%連続して描画ルーチンを実行すると，描画パフォーマンスが得られない事が
%あります．
%高速な描画が必要な場合には，現在表示していないレイヤに対して描画し，
%copylayerルーチン(\S\ref{f_copylayer})で
%描画レイヤの画像を表示レイヤにコピーするようにします．
Consecutive execution of drawing routines against the currently displayed layer (in the case of {\tt lys == lyw}) might cause decrease in drawing performance.
If high-speed drawing is necessary, draw in the hidden layer and copy an image of the drawing layer to the displayed layer by using the {\tt copylayer} routine (\S\ref{f_copylayer}). 

%デフォルトでは{\tt layer(nw,0,0)}の状態となっています．
{\tt layer(wn,0,0)} is set by default.

\shiyorei{\verb|call layer(nwin,0,1)|}
%
\subsubsection{copylayer(nw,lysrc,lydest)}
\label{f_copylayer}

%\kino{レイヤのコピーをする}
\kino{Copy a layer}

%{\tt nw}のウィンドウ番号の，
%レイヤ{\tt lysrc}の画像をレイヤ{\tt lydest}
%にそのままコピーします．
%このコピーは瞬時に行われるため，
%アニメーションの再生に使うことができます．
This routine copies the image in the layer {\tt lysrc} in the window {\tt nw} to the layer {\tt lydest} as it is. 
Copying is instantaneously done, so it can be used for playing an animation. 

\shiyorei{\verb|call copylayer(nwin,1,0)|}
%
\subsubsection{gsetbgcolor(nw,strc)}
\label{f_gsetbgcolor}

%\kino{ウィンドゥの背景色を変更する}
\kino{Set the background color of a window }

%{\tt nw}で指定されたウィンドゥの背景色
%(gclrルーチンで初期化される色)
%を変更します．
This routine changes the background color (initialized with {\tt gclr}) of the window specified with {\tt nw}. 

%{\tt strc}にはXサーバの{\tt rgb.txt}\footnt{%
%{\tt rgb.txt}はUNIX系のOSなら {\tt /usr/X11R6/lib/X11/}
%などにあります．}
%に設定されている色を指定し，
%「\verb|'Blue'//CHAR(0)|」のように
%必ず最後に「\verb|CHAR(0)|」を追加します．
%また，「\verb|'#c0c0ff'//CHAR(0)|」のように，16進数のRed,Green,Blue
%での指定も可能です．
For {\tt strc}, specify a color included in {\tt rgb.txt}\footnt{%
{\tt rgb.txt} may be included in /usr/X11R6/lib/X11/ in UNIX OS.}
 in the X server and add ``\verb|CHAR(0)|''  in the end of it just like \verb|'Blue'//CHAR(0)|.
You can also specify by hexadecimal RGB values such as \verb|'#c0c0ff'//CHAR(0)|.

\shiyorei{\verb|call gsetbgcolor(nwin,'white'//CHAR(0)) ;|}
%
\subsubsection{gclr(nw)}
\label{f_gclr}

%\kino{描画レイヤの全消去}
\kino{Clear the drawing layer}

%gsetbgcolorルーチン(\S\ref{f_gsetbgcolor})
%で指定した色で，描画レイヤを初期化します．
%{\tt gsetbgcolor}での指定がない場合の色は黒となっています．
This routine initializes the drawing layer with the color specified with {\tt gsetbgcolor} (\S\ref{f_gsetbgcolor}).
If the color is not specified with {\tt gsetbgcolor}, it is initialized with black.

\shiyorei{\verb|call gclr(nwin)|}
%
\subsubsection{tclr}
\label{f_tclr}

%\kino{端末のクリア}
\kino{Clear a terminal}

%端末をクリアし，カーソルの位置をホームポジションに戻します．
This routine clears a terminal, and restores the cursor position to the home position. 

\shiyorei{\verb|call tclr|}
%
\subsubsection{newpencolor(nw,nc)}
\label{f_newpencolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt nw}で指定したウィンドゥでの描画色を
%変更します．ncと色との関係は以下の通りです．
This routine changes a drawing color in the window specified with {\tt nw}. 
The correspondence between {\tt nc} and the colors is as follows: 

\begin{center}
\begin{tabular}{llllllll}
{\tt 0}: Black &
{\tt 1}: White &
{\tt 2}: Red &
{\tt 3}: Green &
{\tt 4}: Blue &
{\tt 5}: Cyan &
{\tt 6}: Magenta &
{\tt 7}: Yellow\\
{\tt 8}: DimGray &
{\tt 9}: Gray &
{\tt 10}: red4 &
{\tt 11}: green4 &
{\tt 12}: blue4 &
{\tt 13}: cyan4 &
{\tt 14}: magenta4 &
{\tt 15}: yellow4\\
\end{tabular}
\end{center}
%
%
%red4，green4…の``4''のつく色は，
%暗い赤，暗い緑…となっています．
The colors end with letter ``4'' such as red4 and green4, which are dark red and dark green. 

%デフォルトでは，白が指定されています．
White is set by default.

\shiyorei{\verb|call newpencolor(nwin,2)|}
%
\subsubsection{newcolor(nw,strc)}
\label{f_newcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt nw}で指定したウィンドゥでの描画色を変更します．
%{\tt strc}にはXサーバの{\tt rgb.txt}\footnt{%
%{\tt rgb.txt}はUNIX系のOSなら {\tt /usr/X11R6/lib/X11/}
%などにあります．}
%に設定されている色を指定し，
%「\verb|'Blue'//CHAR(0)|」のように
%必ず最後に「\verb|CHAR(0)|」を追加します．
%また，「\verb|'#c0c0ff'//CHAR(0)|」のように，16進数のRed,Green,Blue
%での指定も可能です．
This routine changes a drawing color in the window specified with {\tt nw}. 
For {\tt strc}, specify a color included in {\tt rgb.txt}\footnt{%
{\tt rgb.txt} may be included in /usr/X11R6/lib/X11/ in UNIX OS.}
 in the X server and add ``\verb|CHAR(0)|''  to the end of it just like \verb|'Blue'//CHAR(0)|.
You can also specify by hexadecimal RGB values such as \verb|'#c0c0ff'//CHAR(0)|.

\shiyorei{\verb|call newcolor(nwin,'Violet'//CHAR(0))|}
%
\subsubsection{newrgbcolor(nw,nr,ng,nb)}
\label{f_newrgbcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt nw}で指定したウィンドゥでの描画色を変更します．
%{\tt nr,ng,nb}にはそれぞれRed,Green,Blueの
%輝度を256段階の整数(0〜255)で指定します．
This routine changes a drawing color in the window specified with {\tt nw}. 
Specify the brightness of Red, Green, and Blue in an integer in the range of 0 to 255 as {\tt nr,ng,nb}.

\shiyorei{\verb|call newrgbcolor(nwin,255,127,0)|}
%
\subsubsection{newhsvcolor(nw,nh,ns,nv)}
\label{f_newhsvcolor}

%\kino{描画色の変更}
\kino{Change a drawing color}

%{\tt nw}で指定したウィンドゥでの描画色を変更します．
%{\tt nh,ns,nv}にはそれぞれ，Hue, Saturation, Valueを指定します．
%{\tt ns}と{\tt nv}は256段階の整数(0〜255)を，
%{\tt nh}は0〜359までの整数(角度)を指定します．
This routine changes a drawing color in the window specified with {\tt nw}. 
Specify Hue, Saturation, and Value as {\tt h}, {\tt s}, and {\tt v}, respectively.
Specify an integer in the range of 0 to 255 as {\tt s} and {\tt v}.
Specify an integer in the range of 0 to 359 (angle) as {\tt h}.

\shiyorei{\verb|call newhsvcolor(nwin,120,250,240)|}
%
\subsubsection{makecolor(ncolormode,dmin,dmax,data,nr,ng,nb)}
\label{f_makecolor}

%\kino{変数からカラーを生成する(カラーバー生成)}
\kino{Generate a color from variables (generate a color bar)}

%変数{\tt data}の値を使って，{\tt nr},{\tt ng},{\tt nb} それぞれに
%256段階のRed,Greed,Blueのカラーを生成します．
%変数の最小，最大は{\tt dmin},{\tt dmax}で指定します．
%このルーチンで得た，{\tt nr},{\tt ng},{\tt nb}の
%値はnewrgbcolorルーチン(\S\ref{f_newrgbcolor})
%にそのまま与えて使う事ができます．
This routine generates 256 RGB color values to {\tt nr}, {\tt ng} and {\tt nb} from the values of a variable {\tt data}.
Specify the minimum and the maximum of the variable with {\tt dmin} and {\tt dmax}.
The values of {\tt nr}, {\tt ng} and {\tt nb} acquired through this routine can be used to set for the argument of {\tt newrgbcolor} (\S\ref{f_newrgbcolor}) as it is.

%{\tt ncolormode}はカラーパターンの番号で，以下に示す
%約50種類のカラーパターンが
%利用できます．
Specify the color pattern index with {\tt ncolormode}.
About 50 kinds of the color patterns shown below are available.

%以下は fitsビューア DS9 コンパチのカラーパターンです．
The following are the fits viewer DS9-compatible color patterns:

\begin{center}
\begin{tabular}{ll}
 \verb|0|   & \includegraphics[scale=0.5]{color000.eps2} \\
 \verb|1|   & \includegraphics[scale=0.5]{color001.eps2} \\
 \verb|2|   & \includegraphics[scale=0.5]{color002.eps2} \\
 \verb|3|   & \includegraphics[scale=0.5]{color003.eps2} \\
 \verb|4|   & \includegraphics[scale=0.5]{color004.eps2} \\
 \verb|5|   & \includegraphics[scale=0.5]{color005.eps2} \\
 \verb|6|   & \includegraphics[scale=0.5]{color006.eps2} \\
 \verb|7|   & \includegraphics[scale=0.5]{color007.eps2} \\
 \verb|8|   & \includegraphics[scale=0.5]{color008.eps2} \\
 \verb|9|   & \includegraphics[scale=0.5]{color009.eps2} \\
 \verb|10|  & \includegraphics[scale=0.5]{color010.eps2} \\
 \verb|11|  & \includegraphics[scale=0.5]{color011.eps2} \\
 \verb|12|  & \includegraphics[scale=0.5]{color012.eps2} \\
 \verb|13|  & \includegraphics[scale=0.5]{color013.eps2} \\
 \verb|14|  & \includegraphics[scale=0.5]{color014.eps2} \\
 \verb|15|  & \includegraphics[scale=0.5]{color015.eps2} \\
 \verb|16|  & \includegraphics[scale=0.5]{color016.eps2} \\
\end{tabular}
\end{center}

%以下は可視化ソフトウェア IDL コンパチのカラーパターンです．
The following are the visualization software IDL-compatible color patterns:

\begin{center}
%\renewcommand{\arraystretch}{0.85}
\begin{tabular}{ll}
 \verb|17|  & \includegraphics[scale=0.5]{color017.eps2} \\
 \verb|18|  & \includegraphics[scale=0.5]{color018.eps2} \\
 \verb|19|  & \includegraphics[scale=0.5]{color019.eps2} \\
 \verb|20|  & \includegraphics[scale=0.5]{color020.eps2} \\
 \verb|21|  & \includegraphics[scale=0.5]{color021.eps2} \\
 \verb|22|  & \includegraphics[scale=0.5]{color022.eps2} \\
 \verb|23|  & \includegraphics[scale=0.5]{color023.eps2} \\
 \verb|24|  & \includegraphics[scale=0.5]{color024.eps2} \\
 \verb|25|  & \includegraphics[scale=0.5]{color025.eps2} \\
 \verb|26|  & \includegraphics[scale=0.5]{color026.eps2} \\
 \verb|27|  & \includegraphics[scale=0.5]{color027.eps2} \\
 \verb|28|  & \includegraphics[scale=0.5]{color028.eps2} \\
 \verb|29|  & \includegraphics[scale=0.5]{color029.eps2} \\
 \verb|30|  & \includegraphics[scale=0.5]{color030.eps2} \\
 \verb|31|  & \includegraphics[scale=0.5]{color031.eps2} \\
 \verb|32|  & \includegraphics[scale=0.5]{color032.eps2} \\
\end{tabular}
\end{center}

\begin{center}
%\renewcommand{\arraystretch}{0.85}
\begin{tabular}{ll}
 \verb|33|  & \includegraphics[scale=0.5]{color033.eps2} \\
 \verb|34|  & \includegraphics[scale=0.5]{color034.eps2} \\
 \verb|35|  & \includegraphics[scale=0.5]{color035.eps2} \\
 \verb|36|  & \includegraphics[scale=0.5]{color036.eps2} \\
 \verb|37|  & \includegraphics[scale=0.5]{color037.eps2} \\
 \verb|38|  & \includegraphics[scale=0.5]{color038.eps2} \\
 \verb|39|  & \includegraphics[scale=0.5]{color039.eps2} \\
 \verb|40|  & \includegraphics[scale=0.5]{color040.eps2} \\
 \verb|41|  & \includegraphics[scale=0.5]{color041.eps2} \\
 \verb|42|  & \includegraphics[scale=0.5]{color042.eps2} \\
 \verb|43|  & \includegraphics[scale=0.5]{color043.eps2} \\
 \verb|44|  & \includegraphics[scale=0.5]{color044.eps2} \\
 \verb|45|  & \includegraphics[scale=0.5]{color045.eps2} \\
 \verb|46|  & \includegraphics[scale=0.5]{color046.eps2} \\
 \verb|47|  & \includegraphics[scale=0.5]{color047.eps2} \\
 \verb|48|  & \includegraphics[scale=0.5]{color048.eps2} \\
 \verb|49|  & \includegraphics[scale=0.5]{color049.eps2} \\
 \verb|50|  & \includegraphics[scale=0.5]{color050.eps2} \\
 \verb|51|  & \includegraphics[scale=0.5]{color051.eps2} \\
 \verb|52|  & \includegraphics[scale=0.5]{color052.eps2} \\
 \verb|53|  & \includegraphics[scale=0.5]{color053.eps2} \\
 \verb|54|  & \includegraphics[scale=0.5]{color054.eps2} \\
 \verb|55|  & \includegraphics[scale=0.5]{color055.eps2} \\
 \verb|56|  & \includegraphics[scale=0.5]{color056.eps2} \\
 \verb|57|  & \includegraphics[scale=0.5]{color057.eps2} \\
 \verb|58|  & \includegraphics[scale=0.5]{color058.eps2} \\
\end{tabular}
\end{center}

\shiyorei{\verb|call makecolor(10,v_min,v_max,v,nr,ng,nb)|}
%
%
\subsubsection{newlinewidth(nw,nwidth)}
\label{f_newlinewidth}

%\kino{線幅の変更}
\kino{Change line width}

%{\tt nw}で指定したウィンドゥで線を描く時の線幅を変更します．
%デフォルトでは幅1が設定されています．
This routine changes the width of a line to be drawn in the window specified with {\tt nw}.
The line width 1 is set by default.

%このルーチンで線幅を変更すると，drawsymルーチン(\S \ref{f_drawsym})
%やdrawarrowルーチン(\S \ref{f_drawarrow})等で描かれる図形にも影響を与えるので
%注意してください．
Note that once the line width is changed by this routine, graphics drawn by {\tt drawsym} (\S \ref{f_drawsym}) or {\tt drawarrow} (\S \ref{f_drawarrow}), etc. are also affected.

\shiyorei{\verb|call newlinewidth(nwin, 2)|}
%
\subsubsection{newlinestyle(nw,nstyle)}
\label{f_newlinestyle}

%\kino{線のスタイルの変更}
\kino{Set line style}

%{\tt nw}で指定したウィンドゥで線を描く時のスタイルを変更します．
%引数{\tt style}に与える事ができる値は，
%{\tt 0}(実線)と{\tt 1}(点線)です．
%デフォルトでは実線が設定されています．
This routine changes the style of a line to be drawn in the window specified with {\tt nw}.
Set {\tt 0} to draw a solid line or {\tt 1} to draw a dashed line for the argument {\tt style}.
The solid line is set by default.

%このルーチンで線のスタイルを変更すると，drawsymルーチン(\S \ref{f_drawsym})
%やdrawarrowルーチン(\S \ref{f_drawarrow})等で描かれる図形にも影響を与えるので
%注意してください．
Note that once the style of a line is changed by this routine, graphics drawn by {\tt drawsym} (\S \ref{f_drawsym}) or {\tt drawarrow} (\S \ref{f_drawarrow}), etc. are also affected.

\shiyorei{\verb|call newlinestyle(nwin, 1)|}
%
\subsubsection{pset(nw,xg,yg)}
\label{f_pset}

\kino{Draw a point}

%{\tt nw}で指定したウィンドゥに点を描画します．
This routine draws a point in the window specified with {\tt nw}.

%描画ルーチン等で用いられる
%アプリケーション座標系は，デフォルトでは左下が({\tt 0.0}, {\tt 0.0})で
%右上が({\tt nxsize-1.0}, {\tt nysize-1.0})になっています．
%この座標は，newcoordinateルーチン(\S\ref{f_newcoordinate})または
%newwindowルーチン(\S\ref{f_newwindow})で変更が可能です．
In the application coordinate system used in drawing routines, the bottom-left corner is ({\tt 0.0}, {\tt 0.0}) and top-right corner is ({\tt nxsize-1.0}, {\tt nysize-1.0}) by default.
This coordinate system can be changed with {\tt newcoordinate} (\S\ref{f_newcoordinate}) or {\tt newwindow} (\S\ref{f_newwindow}).

\shiyorei{\verb|call pset(nwin,x,y)|}
%

\subsubsection{drawline(nw,xg0,yg0,xg1,yg1)}
\label{f_drawline}

\kino{Draw a line}

%{\tt nw}で指定したウィンドゥの({\tt xg0}, {\tt yg0})から
%({\tt xg1}, {\tt yg1})に直線を描画します．
This routine draws a line from ({\tt xg0}, {\tt yg0}) to ({\tt xg1}, {\tt yg1}) in the window specified with {\tt nw}.

\shiyorei{\verb|call drawline(nwin,x0,y0,x1,y1)|}
%
\subsubsection{moveto(nw,xg,yg), lineto(nw,xg,yg)}
\label{f_lineto}

\kino{Draw a line continuously}

%linetoルーチンを複数回使う事により，
%{\tt nw}で指定したウィンドゥに連続的に直線を描画します．
Lines can be drawn continuously in the window specified with {\tt nw} by using {\tt lineto} multiple times.

%movetoルーチンは，({\tt xg}, {\tt yg})を
%linetoルーチンのための初期位置に設定します．
%linetoルーチンは，以前{\tt moveto}または{\tt lineto}が呼ばれた時に
%指定された座標から，({\tt xg}, {\tt yg})へ直線を引きます．
%{\tt moveto}でペンを上げて移動，
%{\tt lineto}でペンを下ろして描画，
%と考えるとわかりやすいでしょう．
{\tt moveto} sets ({\tt xg}, {\tt yg}) as the initial position of {\tt lineto}.
{\tt lineto} draws a line from the point specified when {\tt moveto} or {\tt lineto} were called previously to ({\tt xg}, {\tt yg}) if {\tt 2} is set for {\tt mode}.
It might make sense that {\tt moveto} is like lifting and moving a pen and {\tt lineto} lowering a pen and drawing something.

%{\tt xg}，{\tt yg}は実数型の引数です．
{\tt xg} and {\tt yg} are real number type arguments.

\shiyorei{\verb|call lineto(nwin,x,y)|}
%
\subsubsection{line(nw,xg,yg,mode)}
\label{f_line}

\kino{Draw a line continuously}

%このルーチンは，\S \ref{f_lineto}
%の{\tt moveto}，{\tt lineto}ルーチンと同じ動作をします．
This routine works just the same as {\tt moveto} and {\tt lineto} in \S \ref{f_lineto}.

%{\bf 新しいプログラムでは，moveto・linetoルーチンを使用してください．}
{\bf Use {\tt moveto} and {\tt lineto} in a new program.}

%lineルーチンを複数回使う事により，
%{\tt nw}で指定したウィンドゥに連続的に直線を描画します．
%{\tt mode}に{\tt 2}を指定すると
%以前lineルーチンが呼ばれた時に
%指定された座標から，({\tt xg}, {\tt yg})へ直線を引きます．
%{\tt mode}に{\tt 3}を指定すると({\tt xg}, {\tt yg})を
%lineルーチンの初期位置に設定します．
%{\tt mode=2}でペンを下ろして描画，
%{\tt mode=3}でペンを上げて移動と考えるとわかりやすいでしょう．
Lines can be drawn continuously in the window specified with {\tt nw} by using {\tt line} multiple times.
This routine draws a line from the point specified when it was called previously to ({\tt xg}, {\tt yg}) if {\tt 2} is set for {\tt mode}.
If {\tt 3} is set for {\tt mode}, ({\tt xg}, {\tt yg}) is set as the initial position of line routine.
It might make sense that this routine is like lowering a pen and drawing something where {\tt mode=2} and lifting and moving a pen where {\tt mode=3}.

%{\tt xg}，{\tt yg}は実数型の引数です．
{\tt xg} and {\tt yg} are real number type arguments.

\shiyorei{\verb|call line(nwin,x,y,2)|}
%
\subsubsection{drawpts(nw,x,y,n)}
\label{f_drawpts}

\kino{Draw points}

%{\tt nw}で指定したウィンドゥで，{\tt n}個の点を描きます．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x(1)}〜{\tt x(n)}，
%{\tt y(1)}〜{\tt y(n)}に各点の座標を入れておきます．
This routine draws {\tt n} points in the window specified with {\tt nw}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put the coordinate of each point to {\tt x(1)} to {\tt x(n)} and {\tt y(1)} to {\tt y(n)} preliminarily.

\shiyorei{\verb|call drawpts(nwin,x,y,5)|}
%
\subsubsection{drawlines(nw,x,y,n)}
\label{f_drawlines}

\kino{Draw a polygonal line}

%{\tt nw}で指定したウィンドゥで，折れ線を描きます．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x(1)}〜{\tt x(n)}，
%{\tt y(1)}〜{\tt y(n)}に折れ線の各点の座標を入れておきます．
This routine draws a polygonal line in the window specified with {\tt nw}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put the coordinate of each point of the polygonal line to {\tt x(1)} to {\tt x(n)} and {\tt y(1)} to {\tt y(n)} preliminarily.

\shiyorei{\verb|call drawlines(nwin,x,y,5)|}
%
\subsubsection{drawpoly(nw,x,y,n)}
\label{f_drawpoly}

\kino{Draw a polygon}

%{\tt nw}で指定したウィンドゥで，多角形を描きます．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x(1)}〜{\tt x(n)}，
%{\tt y(1)}〜{\tt y(n)}に多角形の各点の座標を入れておきます．
This routine draws a polygon in the window specified with {\tt nw}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put each vertex coordinate of the polygon to {\tt x(1)} to {\tt x(n)} and {\tt y(1)} to {\tt y(n)} preliminarily.

\shiyorei{\verb|call drawpoly(nwin,x,y,5)|}
%
\subsubsection{fillpoly(nw,x,y,n,i)}
\label{f_fillpoly}

\kino{Fill a polygon}

%{\tt nw}で指定したウィンドゥで，多角形の領域を塗り潰します．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x(1)}〜{\tt x(n)}，
%{\tt y(1)}〜{\tt y(n)}に多角形の各点の座標を入れておきます．
%{\tt i}は塗り潰す時の形状で通常は{\tt 0}を，
%凸多角形の時は{\tt 1}を指定します．
This routine fills a polygon in the window specified with {\tt nw}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put each vertex coordinate of the polygon to {\tt x(1)} to {\tt x(n)} and {\tt y(1)} to {\tt y(n)} preliminarily.
{\tt 1} represents the shape of the polygon to be filled. Set {\tt 0} normally or {\tt 1} in the case of a convex polygon for {\tt i}.

\shiyorei{\verb|call fillpoly(nwin,x,y,5,0)|}
%
%
\subsubsection{drawrect(nw,x,y,w,h)}
\label{f_drawrect}

\kino{Draw a rectangle}

%{\tt nw}で指定したウィンドゥに，
%頂点({\tt x}, {\tt y})から正の方向に
%幅{\tt w}，高さ{\tt h}
%の長方形を描きます．
This routine draws a rectangle beginning at ({\tt x}, {\tt y}) with the given width {\tt w} and the height {\tt h} in the window specified with {\tt nw}.

\shiyorei{\verb|call drawrect(nwin,50.0,60.0,30.0,20.0)|}
%
\subsubsection{fillrect(nw,x,y,w,h)}
\label{f_fillrect}

\kino{Fill a rectangle}

%{\tt nw}で指定したウィンドゥで，
%頂点({\tt x}, {\tt y})から正の方向に
%幅{\tt w}，高さ{\tt h}
%の長方形の領域を塗り潰します．
This routine fills a rectangle beginning at ({\tt x}, {\tt y}) with the given width {\tt w} and the height {\tt h} in the window specified with {\tt nw}.

\shiyorei{\verb|call fillrect(nwin,50.0,60.0,30.0,20.0)|}
%
\subsubsection{drawcirc(nw,xcen,ycen,xrad,yrad)}
\label{f_drawcirc}

\kino{Draw a circle by specifying the center coordinate and the radius}

%{\tt nw}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円を描きます．
This routine draws a circle with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a  horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt nw}.

\shiyorei{\verb|call drawcirc(nwin,50.0,60.0,30.0,40.0)|}
%
\subsubsection{fillcirc(nw,xcen,ycen,xrad,yrad)}
\label{f_fillcirc}

\kino{Fill a circle by specifying the center coordinate and the radius}

%{\tt nw}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円を塗り潰します．
This routine fills a circle with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a  horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt nw}.

\shiyorei{\verb|call fillcirc(nwin,50.0,60.0,30.0,40.0)|}
%
\subsubsection{drawarc(nw,xcen,ycen,xrad,yrad,sang,eang,idir)}
\label{f_drawarc}

\kino{Draw an arc% by specifying the center and radius of a circle and the angle of the starting point and the ending point}
}

%{\tt nw}で指定したウィンドゥに，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円弧を描きます．
%{\tt sang}は開始角，{\tt eang}は終了角で，度で与えます．
%{\tt idir}は円弧を描く方向で{\tt 1}で左廻り，{\tt -1}で右廻りとなります．
This routine draws an arc with with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a  horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt nw}.
{\tt sang} and {\tt eang} are the angle to start and to end, respectively, expressed in degrees.
{\tt idir} is a direction to draw the arc to. 
When {\tt 1} is set for {\tt idir} it draws the arc counterclockwise, and when {\tt -1} is set it draws the arc clockwise.

\shiyorei{\verb|call drawarc(nwin,50.0,60.0,30.0,40.0,-10.0,-170.0,-1)|}
%
\subsubsection{fillarc(nw,xcen,ycen,xrad,yrad,sang,eang,idir)}
\label{f_fillarc}

\kino{Fill an arc% by specifying the center and radius of a circle and the angle of the starting point and the ending point}
}

%{\tt nw}で指定したウィンドゥで，
%({\tt xcen}, {\tt ycen})を中心に
%横方向の半径{\tt xrad}，
%縦方向の半径{\tt yrad}の
%円弧を塗り潰します．
%{\tt sang}は開始角，{\tt eang}は終了角で，度で与えます．
%{\tt idir}は円弧を描く方向で{\tt 1}で左廻り，{\tt -1}で右廻りとなります．
This routine fills an arc with with ({\tt xcen}, {\tt ycen}) as a center, {\tt xrad} as a  horizontal radius, and {\tt yrad} as a vertical radius in the window specified with {\tt nw}.
{\tt sang} and {\tt eang} are the angle to start and to end, respectively, expressed in degrees.
{\tt idir} is a direction to draw the arc to. 
When {\tt 1} is set for {\tt idir} it draws the arc counterclockwise, and when {\tt -1} is set it draws the arc clockwise.

\shiyorei{\verb|call fillarc(nwin,50.0,60.0,30.0,40.0,-10.0,-170.0,-1)|}
%
%
\subsubsection{drawsym(nw,xg,yg,size,nsym)}
\label{f_drawsym}

\kino{Draw a center symbol}

%{\tt nw}で指定したウィンドゥに
%センターシンボルを座標({\tt xg}, {\tt yg})に描きます．
%{\tt size}はシンボルの大きさでピクセル単位の実数，
%{\tt nsym}でシンボルの種類(整数)を指定します．
This routine draws a center symbol at the position ({\tt xg}, {\tt yg}) in the window specified with {\tt nw}.
Specify the symbol size in pixels with {\tt size} (real number) and the kind of the symbol by {\tt nsym} (integer).

%{\tt nsym}とシンボルの関係は，次の図のとおりです．
The correspondence between {\tt nsym} and the symbols is as follows:

\begin{center}
\includegraphics[scale=0.8]{syms.eps}
\end{center}

%{\tt nsym}とシンボルの関係は，だいたい次のようなものとなっています．

%　{\tt 1}:・
%　{\tt 2}:＋
%　{\tt 3}:×\hspace{-3.40mm}＋
%　{\tt 4}:○
%　{\tt 5}:×
%　{\tt 6}:Ｙ
%　{\tt 7}:△
%　{\tt 8}:□
%　{\tt 9}:▽
%　{\tt 10}:◇

%なお，{\tt xg}，{\tt yg}は実数型の引数です．
{\tt xg} and {\tt yg} are real number type arguments.

\shiyorei{\verb|call drawsym(nwin,x,y,16.0,2)|}
%
%
\subsubsection{drawsyms(nw,x,y,n,size,nsym)}
\label{f_drawsyms}

\kino{Draw symbols}

%{\tt nw}で指定したウィンドゥで，{\tt n}個のシンボルを描きます．
%{\tt x}，{\tt y}は{\tt n}個の実数の一次元配列で，
%{\tt x(1)}〜{\tt x(n)}，
%{\tt y(1)}〜{\tt y(n)}に各シンボルの座標を入れておきます．
This routine draws {\tt n} number of symbols in the window specified with {\tt nw}.
{\tt x} and {\tt y} are one-dimensional arrays of {\tt n} real numbers.
Put a coordinate of each symbol to {\tt x(1)} to {\tt x(n)} and {\tt y(1)} to {\tt y(n)} preliminarily.

%{\tt size}はシンボルの大きさでピクセル単位の実数，
%{\tt nsym}でシンボルの種類(整数)を指定します．
Specify the symbol size in pixels with {\tt size} (real number) and the kind of the symbol by {\tt nsym} (integer).

%{\tt nsym}とシンボルの関係については，
%\S \ref{f_drawsym}をご覧ください．
See \S \ref{f_drawsym} for the correspondence between {\tt nsym} and the symbols.

\shiyorei{\verb|call drawsyms(nwin,x,y,5,16.0,8)|}
%
\subsubsection{drawarrow(nw,xs,ys,xt,yt,s,w,10{\tt *}i+j)}
\label{f_drawarrow}

\kino{Draw various types of arrows}

%{\tt nw}で指定したウィンドゥに
%({\tt xs}, {\tt ys})から({\tt xe}, {\tt ye})に向かって矢印を描きます．
%矢印の形状は以下の図の通りで，{\tt s}と{\tt w}は実数で指定します．
%{\tt i}が{\tt 0}〜{\tt 2}の場合には{\tt w},{\tt s}はピクセル数を，
%{\tt i}が{\tt 10}〜{\tt 12}の場合には{\tt w},{\tt s}は矢印の長さに対する
%割合で{\tt 0.0}〜{\tt 1.0}の値を指定します．
This routine draws an arrow from ({\tt xs}, {\tt ys}) to ({\tt xe}, {\tt ye}) in the window specified with {\tt nw}.
Specify {\tt s} and {\tt w} in real numbers to decide the shape of the arrow as follows.
When {\tt i} is in the range of {\tt 0} to {\tt 2}, set pixels for {\tt w} and {\tt s}.
When {\tt i} is in the range of {\tt 10} to {\tt 12}, set the ratios against the arrow length in the range of {\tt 0.0} to {\tt 1.0}.

\begin{center}
\includegraphics[scale=0.7]{procall_arohd0.eps}
\end{center}

%\begin{center}
% \includegraphics[scale=0.30]{roche_arr_f.eps2}\\
% {\tt i}={\tt 11}での矢印の描画例
%\end{center}

\shiyorei{\verb|call drawarrow(nwin,x0,y0,x1,y1,0.3,0.2,114)|}
%
\subsubsection{newfontset(nw,fontset,nstatus)}
\label{f_newfontset}

\kino{Specify a font set}% (Japanese font)}

%{\tt nw}で指定したウィンドゥで描くフォントセットを指定します．
%文字の描画はdrawstrルーチン(\S\ref{f_drawstr})を利用します．
This routine sets a font set to draw in the window specified with {\tt nw}.
To draw a string, use {\tt drawstr} (\S\ref{f_drawstr}).

%フォントセット名は{\tt fontset}で指定します．
%{\tt fontset}の最終文字は「\verb|CHAR(0)|」(終端文字)
%でなければなりません．
Specify the font set name using {\tt fontset}.
The last character of {\tt fontset} has to be ``\verb|CHAR(0)|'' (termination character).

%最後の引数{\tt status}には，フォントセットの取得状況を示す
%整数値が代入されます．
%{\tt fontset}で指定したフォントセットが
%取得できた場合は{\tt 0}，代替フォントで取得できた場合は正の値，
%フォントセットの取得に失敗した場合は負の値が
%{\tt status}に返ってきます．
An integer value to indicate the status of the acquisition of the font set is returned to the last argument {\tt status}.
The value returned to {\tt status} is {\tt 0} if the font set specified with {\tt fontset} can be acquired; it is a positive value if an alternative font can be acquired; or it is a negative value if the font set cannot be acquired. 

%フォントセットの設定は，Xサーバにインストールされたのフォントを
%指定する必要があり，OSやディストリビューションに依存します．
%確実に表示したい場合は，次のような設定を推奨します:
To set the font set, you need to specify a font installed to the X server, so it depends on your OS and distribution.
To ensure taht a string is displayed, we recommend the following settings:

\begin{center}
\begin{tabular}{|l|l|}
  \hline 
  14 dot font & \verb|'-*-fixed-medium-r-normal--14-*'//CHAR(0)| \\
  \hline 
  16 dot font & \verb|'-*-fixed-medium-r-normal--16-*'//CHAR(0)| \\
  \hline 
  24 dot font & \verb|'-*-fixed-medium-r-normal--24-*'//CHAR(0)| \\
  \hline 
\end{tabular}
\end{center}

\shiyorei{\verb|call newfontset(nwin,'-*-fixed-medium-r-normal--16-*'//CHAR(0),nstat)|}

%
\subsubsection{drawstr(nw,xg,yg,size,str,theta,len)}
\label{f_drawstr}

\kino{Draw a string}

%{\tt nw}で指定したウィンドゥに，
%文字列を座標({\tt xg}, {\tt yg})から描きます．
%{\tt size}は文字の大きさで，ピクセル単位の実数で指定します．
%{\tt str}に文字列を，{\tt len}には文字列の長さ(整数)を与えます．
%文字列{\tt str}の最終文字が終端文字\verb|CHAR(0)|」であれば，
%{\tt len}に実際の文字列長のかわりに{\tt -1}を与えてもかまいません．
%{\tt theta}は文字列の回転を指定する実数の引数ですが，現バージョンでは
%機能しません．
This routine draws a string at the position ({\tt xg}, {\tt yg}) in the window specified with {\tt nw}.
Specify a character size in real number pixels for {\tt size}.
Set a string for {\tt str} and the length of the string (integer) to {\tt len}.
You can set {\tt -1} instead of the length of the string for {\tt len} if the last character of the string {\tt str} is the termination character ``\verb|CHAR(0)|''.
{\tt theta} is the argument to specify rotation of a string, however, it is disabled in the current version.

%文字のサイズ{\tt size}は{\tt 1}〜{\tt 24}の範囲で指定できます．
%{\tt size}と実際のフォントとの関係は以下の表のようになっています．
%この場合，文字は半角英数字のみ描画できます．
The character size {\tt size} can be specified in the range of {\tt 1} to {\tt 24}.
The correspondence between {\tt size} and the actual font size is shown in the table below.
In this case, only English one byte characters can be drawn.

%マルチバイト文字(漢字)を描画する場合は，{\tt size}には {\tt 0.0} を指定します．
%この場合のフォントの指定は，
%newfontsetルーチン(\S\ref{f_newfontset})を
%利用します．{\tt newfontset}でのフォント指定がなされて
%いない場合は，デフォルトの14ドットのフォントセットで描画されます．
To draw a multi byte character (Kanji), set {\tt 0.0} for {\tt size}.
Use {\tt newfontset} (\S\ref{f_newfontset}) to specify a font in this case.
If a font is not specified with {\tt newfontset}, a string is drawn in the default 14-dot font set.

\begin{center}
\begin{tabular}{|ccc|ccc|ccc|ccc|ccc|}
  \hline 
 {\tt 1}〜{\tt 7}&:& $5 \times 7$ &
 {\tt 8}&:& $5 \times 8$ &
 {\tt 9}&:& $6 \times 9$ &
 {\tt 10}〜{\tt 11}&:& $6 \times 10$ &
 {\tt 12}&:& $6 \times 12$  \\
 \hline
 {\tt 13}&:& $7 \times 13$ &
 {\tt 14}〜{\tt 15}&:& $7 \times 14$ &
 {\tt 16}〜{\tt 19}&:& $8 \times 16$ &
 {\tt 20}〜{\tt 23}&:& $10 \times 20$ &
 {\tt 24}&:& $12 \times 24$ \\
  \hline 
\end{tabular}
\end{center}

\shiyorei{\verb|call drawstr(nwin,x,y,16.0,'foo',0.0,4)|}

\shiyorei{\verb|call drawstr(nwin,x,y,0.0,'fooooo!'//CHAR(0),0.0,-1)|}

\subsubsection{drawnum(nw,xg,yg,size,v,theta,n)}
\label{f_drawnum}

\kino{Draw a value of variables}

%{\tt nw}で指定したウィンドゥに
%実数型変数{\tt v}の値を座標({\tt xg}, {\tt yg})から描きます．
%{\tt size}は文字列の大きさで，ピクセル単位の実数で指定します．
%{\tt n}は表示する小数点の桁数で，整数値を与えます．
%{\tt theta}は文字列の回転を指定する実数の引数ですが，現バージョンでは
%機能しません．
This routine draws the value of the real number type variable {\tt v} at the position ({\tt xg}, {\tt yg}) in the window specified with {\tt nw}.
Set a real number in pixels for {\tt size} to specify the size of a string.
Set an integer value for {\ n} to specify the number of decimal places of the value to be displayed.
The real number type argument {\tt theta} to specify the rotation of a string is disabled in the current version.

\shiyorei{\verb|call drawnum(nwin,x,y,16.0,prm,0.0,3)|}
%
%
\subsubsection{putimg24(nw,x,y,nw,nh,nbuf)}
\label{f_putimg24}

\kino{Transfer images prepared in an integer array to a window collectively}

%{\tt nw}で指定したウィンドゥの
%座標({\tt x}, {\tt y})に
%{\tt nbuf}に用意した，
%幅{\tt nw}，高さ{\tt nh}の画像
%を一括転送します．
This routine transfers images with the width {\tt nw} and the height {\tt nh} prepared in {\tt nbuf} to the position ({\tt x}, {\tt y}) in the window specified with {\tt wn} collectively.

%整数配列{\tt nbuf}には，Red,Green,Blueの順に
%3つずつ，水平方向に走査しながら画像の上から下へ用意します
%({\tt nbuf(1)=nRed(1)}，
%{\tt nbuf(2)=nGreen(1)}，
%{\tt nbuf(3)=nBlue(1)}，といった具合いです)．
%配列には{\tt 0}〜{\tt 255}の範囲の輝度を与えておきます．
In the integer array {\tt nbuf}, data are stored in the order of Red, Green and Blue, scanning the image horizontally from top down
(that is, {\tt nbuf(1)=nRed(1)}, {\tt nbuf(2)=nGreen(1)}, {\tt nbuf(3)=nBlue(1)}, ...).
Set the level of brightness in the range of {\tt 0} to {\tt 255} for the array.

%なおXサーバのdepthが8以下の場合はこのルーチンは
%使用できません(正常に動作しません)．Xサーバのdepthは
%ggetdisplayinfoルーチン(\S\ref{f_ggetdisplayinfo})
%で調べる事ができます．
If the depth of the X server is 8 or lower, this routine cannot be used because it does not work normally. 
The depth of the X server can be checked using ggetdisplayinfo (\S\ref{f_ggetdisplayinfo}).

\shiyorei{\verb|call putimg24(nwin,x,y,640,400,nbuffer)|}
%
%
\subsubsection{saveimg(nw,ly,xs,ys,xe,ye,fname,n,conv,nd)}
\label{f_saveimg}

\kino{Save an image in a layer through a converter (netpbm, etc.)}

%バックグラウンドプロセスを起動し，
%ウィンドウ番号{\tt nw}，レイヤ番号{\tt ly}の({\tt xs}, {\tt ys})から
%({\tt xe}, {\tt ye})の範囲を
%コンバータ(netpbmの各種コマンド,ImageMagickのconvert等)
%を通してファイルに保存します\footnt{%
%netpbm は http://sourceforge.net/projects/netpbm/ ，%
%ImageMagick は http://www.imagemagick.org/ などで配布されています．}%
This routine runs a background process and saves an image in the range from ({\tt xs}, {\tt ys}) to ({\tt xe}, {\tt ye}) in the layer {\tt ly} in the window {\tt wn} to a file through the converter (various commands of netpbm, or convert of ImageMagick, etc.\footnt{%
netpbm is distributed in http://sourceforge.net/projects/netpbm/, and %
ImageMagick is distributed in http://www.imagemagick.org/.}%
).

%ファイル名は{\tt fname}で指定し，
%「\verb|'image.png'//CHAR(0)|」のように必ず最後に
%「\verb|CHAR(0)|」(終端文字)を追加します．
%{\tt n}に正の整数，例えば{\tt n}={\tt 12}を指定する
%と，実際のファイル名は{\tt image12.png}のように数字がつき，
%{\tt n}が負の場合ファイル名で保存します．
%{\tt conv}にはppm形式から各画像フォーマットに変換するコンバータのコマンド
%ラインを指定します．例えば，netpbmを利用して
%png形式に保存する場合は，「\verb|'pnmtopng'//CHAR(0)|」とします．
%ImageMagickを利用する場合は，「\verb|'convert'//CHAR(0)|」とします．
%もちろん，オプションスイッチも含める事もでき，
%「\verb|'pnmtops -scale 0.125'//CHAR(0)|」，あるいは
%「\verb|'convert -compress ZIP'//CHAR(0)|」
%といった指定も可能です．
%最後の引数{\tt nd}は減色パラメータで，
%R,G,B 1チャンネルあたりの色の段階数を整数で指定します．
%{\tt nd}は簡単な図形では{\tt 16}くらいで十分ですが，
%多くの色を使っている場合は最大値の{\tt 256}を指定してください．
Set a filename for {\tt fname} after adding a termination character \verb|CHAR(0)| to the end of it just like \verb|'image.png'//CHAR(0)|.
If a positive number is set for {\tt n}, the number is added to the filename.
For example, if {\tt 12} is set for {\tt n}, the filename becomes {\tt image12.png}.
If {\tt n} is negative, the filename does not change.
Set the command line of the converter to convert the format from ppm to each image format for {\tt conv}.
For example, to save in the png format by using netpbm, set
\verb|'pnmtopng'//CHAR(0)|.
When using ImageMagick, set \verb|'convert'//CHAR(0)|.
Of course, option switches can be included, so such commands as
\verb|'pnmtops -scale 0.125'//CHAR(0)| 
%and \verb|'convert -compress ZIP'//CHAR(0)| 
are also enabled.
The last argument {\tt nd} is the subtractive color parameter.
Set a gradation level per channel in R,G,B for it.
As for {\tt nd}, while around {\tt 16} is enough for simple graphics, set the maximum value {\tt 256} when many colors are used.

%ppmから他の画像フォーマットに変換するnetpbmのコマンドの例を挙げておきます．
%各コンバータの使用方法に関しては端末から{\tt man }コンバータ名 とタイプ
%する事で調べることができます．
%ImageMagickのconvertコマンドを利用する場合は，ファイル名の
%サフィックス(ドット以降の文字列，例えば{\tt .jpg}，{\tt .png}，{\tt .eps2}
%など)から保存フォーマットが決定されます．
Examples of commands in netpbm to convert the format from ppm to another image format are listed below.
You can check the usage of each command by typing ``{\tt man command-name}'' from your terminal.
When using the convert command of ImageMagick, a file format is determined by the suffix of a filename (a string after a dot, for example, {\tt .jpg}, {\tt .png} or {\tt .eps2}).

\vspace{1mm}

\begin{center}
{\small
\begin{tabular}{cc}
{
\begin{tabular}{ll}
 \hline
 Image Format & Converter Name \\
 \hline
 AutoCAD DXB     	& {\tt ppmtoacad} \\
 windows bitmap 	& {\tt ppmtobmp} \\
 Berkeley YUV           & {\tt ppmtoeyuv}\\
 GIF			& {\tt ppmtogif} \\
 NCSA ICR graphics	& {\tt ppmtoicr} \\
 IFF ILBM		& {\tt ppmtoilbm} \\
 Interleaf image        & {\tt ppmtoleaf} \\
 HP LaserJet PCL 5 Color & {\tt ppmtolj} \\
% mag			& {\tt ppmtomag} \\
 map			& {\tt ppmtomap} \\
 Mitsubishi S340-10 printer 	& {\tt ppmtomitsu} \\
 Atari Neochrome .neo   & {\tt ppmtoneo} \\
 PPC Paintbrush 	& {\tt ppmtopcx} \\
 portable graymap	& {\tt ppmtopgm} \\
% pi			& {\tt ppmtopi} \\
 Atari Degas .pi1	& {\tt ppmtopi1} \\
% pic			& {\tt ppmtopic} \\
 Macintosh PICT		& {\tt ppmtopict} \\
 HP PaintJet 	& {\tt ppmtopj} \\
 HP PaintJet XL PCL 		& {\tt ppmtopjxl} \\
 X11 ''puzzle'' 	& {\tt ppmtopuzz} \\
 three portable graymaps		& {\tt ppmtorgb3} \\
 DEC sixel 	& {\tt ppmtosixel} \\
 TrueVision Targa 	& {\tt ppmtotga} \\
 \hline
\end{tabular}
} 
 ~~&~~
{
\begin{tabular}{ll}
 \hline
 Image format & Converter name\\
 \hline
 Motif UIL icon 	& {\tt ppmtouil} \\
 Windows .ico           & {\tt ppmtowinicon} \\
 XPM format		& {\tt ppmtoxpm} \\
 Abekas YUV 	& {\tt ppmtoyuv} \\
 YUV triplets		& {\tt ppmtoyuvsplit} \\
% & (以下,{\tt pnmto***})\\
 DDIF			& {\tt pnmtoddif} \\
 FIASCO compressed      & {\tt pnmtofiasco} \\
 FITS			& {\tt pnmtofits} \\
 JBIG                   & {\tt pnmtojbig} \\
 JFIF (``JPEG'') image    & {\tt pnmtojpeg} \\
 Palm pixmap            & {\tt pnmtopalm} \\
 plain (ASCII) anymap   & {\tt pnmtoplainpnm} \\
 Portable Network Graphics  & {\tt pnmtopng} \\
 PostScript		& {\tt pnmtops} \\ 
 Sun raster 	& {\tt pnmtorast} \\
 RLE image              & {\tt pnmtorle} \\
 sgi image 	& {\tt pnmtosgi} \\
 Solitaire image recorder  & {\tt pnmtosir} \\
 TIFF file		& {\tt pnmtotiff} \\
 CMYK encoded TIFF      & {\tt pnmtotiffcmyk} \\
 X11 window dump	& {\tt pnmtoxwd} \\
 \hline
\end{tabular}
\vspace{1mm}
}
\end{tabular}
}
\end{center}

%もちろん，コンバータはすでにインストールされている必要があり，
%インストールされていない場合は指定できません．

%ここに挙げた以外のコンバータも，標準入力からppm形式で入力し，
%標準出力から変換データを出力するものであれば使用する事ができます．
Converters other than described here can also be used as long as they import ppm-format data to the standard input and export converted data from the standard output.

%コンバータを通さずに直接ppm形式で保存する場合は{\tt conv}には
%「\verb|CHAR(0)|」と指定してください．
%ただしその場合，非圧縮のバイナリデータが
%保存されるので，ファイルのサイズが大きくなります．
To save in the ppm format directly without using a converter, see ``\verb|CHAR(0)|'' for {\tt conv}.
Please note that the size of the saved file is rather big because the ppm format is uncompressed binary data.

%このルーチンではXサーバから画像データを転送し，保存するわけですが，
%ネットワークが遅かったりすると非常に時間がかかります．
%その事を考慮してこのルーチンでは子プロセスを起動して，
%バックグラウンドでXサーバからの画像の転送・ディスクへの書き込みを行うように
%しています．したがってプログラムは{\tt call saveimg(…)}の後
%すぐに他の作業ができるようになります．ただし，この子プロセスが
%終わるまではXサーバでの描画等ができないので，もし{\tt call saveimg(…)}
%のすぐ後にProCALLの描画ルーチン
%などを呼んだ場合は画像の転送・保存が完了するまで待たされる事になります．
Since this routine transfers an image data from the X server and saves it, it takes a long time if the network speed is slow.
In consideration of this, this routine allows a child process to start and image data to be transfered from the X server and written to the disk.
Therefore, another operation can be done immediately after {\tt call saveimg(...)} in a user's program.
However, if a drawing routine in ProCALL is called immediately after {\tt call saveimg(...)} it is suspended until the transfer and the saving of an image are finished, because drawing on the X server cannot be performed until this child process is finished.

%なお，{\tt saveimg}を使っている場合は
%\underline{プログラムは必ず{\tt gclose}(\S\ref{f_gclose})
%をcallしてから終了する}
%ようにしてください．
%%{\tt gclose}を呼ばずにプログラム
%%を終了した場合，子プロセスがまだ作業中だった場合に
%%強制終了させられて正常に画像が保存されません．
If you use {\tt saveimg}, please make sure to 
\underline{call gclose (\S\ref{f_gclose}) before finishing the program.}

\shiyorei{\small\verb|call saveimg(nwin,0, 0.0,0.0, 639.0,399.0, 'img.png'//CHAR(0),i, 'pnmtopng'//CHAR(0),256)|}

%png形式に保存する例です．gif形式の場合は {\tt conv} は
%「\verb|'ppmtogif'//CHAR(0)|」にします．
This is an example to save in the png format.
To save in the gif format, set ``\verb|'ppmtogif'//CHAR(0)|'' for {\tt conv}.

\shiyorei{{\small\verb|call saveimg(nwin,0, 0.0,0.0, 639.0,399.0, 'fig.eps'//CHAR(0),-1,|\\\verb|                  'pnmtops -noturn -dpi 72 -equalpixels -psfilter -flate -ascii85'//CHAR(0),256)|}}

%PostScript形式に保存する例です．netpbmの{\tt pnmtops}では
%RunLength圧縮(可逆圧縮)をサポートしています．上記のように「{\tt -rle}」
%をつける事で画質を損うことなく，ファイルサイズを小さくする事ができます．
This is an example to save in the PostScript format. 
{\tt pnmtops} in netpbm supports RunLength compression and
GZIP compression (lossless compression).
By adding ``{\tt -psfilter -flate -ascii85}''
as above, the file size can be reduced without deterioration of image quality.

%%ImageMagickではRunLengthの他，ZIP，LZWなどのアルゴリズムでより効率良く
%%圧縮したビットマップイメージをPostscript Level 2ファイルに埋め込む事ができます．
%%最後の使用例はZIP圧縮を用いたPostscript Level 2のEPSファイルを生成する例です．
%%ただし，ImageMagickのPostscript Level 2の出力は5.3.3以降で改悪され，
%%一般的なPostscriptインタープリタ(Adobe Postscript 3など)
%%では読めません．ImageMagick-{\bf 5.3.2}の利用をお勧めします．
%A bitmap image compressed more efficiently by algorithms such as LZW and ZIP (see abov%e example) along with RunLength can be embedded in Postscript Level 2 file in ImageMag%ick.
%The last is example to create a Postscript Level 2 EPS file compressed by ZIP.
%However, export of Postscript Level 2 in ImageMagick was made worse after Ver. 5.3.3, %so commonly-used Postscript interpreter (such as Adobe Postscript 3) cannot read it.
%We recommend to use ImageMagick-{\bf 5.3.2}.
%
%
\subsubsection{gsetnonblock(iflag)}
\label{f_gsetnonblock}

\kino{Configure the operating mode of {\tt ggetch}, {\tt ggetevent} and {\tt ggetxpress}}

%デフォルトでは，
%キーボードやマウスの入力情報を取得するルーチン
%{\tt ggetch}，{\tt ggetevent}，{\tt ggetxpress}
%が呼ばれると，ルーチン内部で入力があるまで待ち続けます(ブロッキングモード)．
When {\tt ggetch}, {\tt ggetevent}, and {\tt ggetxpress} which are the routines to get input information from the keyboard or the mouse, are called, they wait inside themselves until an input occurs by default (in the blocking mode).

%{\tt iflag}に{\tt 1}を設定してgsetnonblockルーチンが呼ばれると
%ノンブロッキングモードとなり，
%{\tt ggetch}，{\tt ggetevent}，{\tt ggetxpress}ルーチン
%は入力の有無にかかわらずすぐに戻るようになります．
If gsetnonblock is called with {\tt iflag} set to {\tt 1}, it changes to the non-blocking mode, and then {\tt ggetch}, {\tt ggetevent}, and {\tt ggetxpress} will return immediately whether an input occurs or not.

%デフォルトのブロッキングモードに戻すには，{\tt iflag}に{\tt 0}
%を与えてください．
To restore the default blocking mode, set {\tt iflag} to {\tt 0}.

%gsetnonblockルーチンの呼び出しは，
%ウィンドゥのオープンの前あるいは後のどのタイミングでも有効です．
gsetnonblock can be called anytime before or after a window is opened.

\shiyorei{\verb|call gsetnonblock(1)|}
%
\subsubsection{ggetch(key)}
\label{f_ggetch}

\kino{Return a character inputted from the keyboard}

%ProCALLで開いたすべてのウィンドゥからの
%キーボードの入力情報を返します．
%キーボードから入力された文字のコードが{\tt key}(整数)に代入されます．
%ブロッキングモード(デフォルト)ではキー入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐにこのルーチンから
%戻ります(動作モードについては\S \ref{f_gsetnonblock}のgsetnonblock
%ルーチンを参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，
%{\tt key}に負の値が返ります．
This routine returns input information from the keyboard from all windows opened in ProCALL.
The character code inputted from the keyboard is set to {\tt key} (in integers).
While it waits until a key input occurs in the blocking mode (default), it finishes immediately whether a key input occurs or not in the non-blocking mode. (See {\tt gsetnonblock} in \S \ref{f_gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

%以下が16進の文字コード表です．イタリック体の数字が16進
%2桁の上位を表します．
%例えば，「a」は z'61'，「A」は z'41' となります．
The following table indicates hexadecimal character codes.
The upper figures of two hexadecimal-digits are shown in Italic.
For example, ``a'' is z'61' and ``A'' is z'41'.

\input charcode0

%z'01'〜z'1A' の中にはいくつか特殊キーが含まれていますが，
%この区間は「Ctrl+アルファベットキー」のコードと共有となります．
%例えば，「BackSpace」と「Ctrl+H」のコードはどちらも z'08' となります．
%z'01'〜z'1A' で空白になっている個所は，
%「Ctrl+アルファベットキー」にのみコードが割り当てられています．
There are some special keys in the range of z'01' to z'1A'.
Their codes are shared with those of Ctrl + Alphabet.
For example, both codes of BackSpace and Ctrl + H are z'08'.
As for blanks in the range of z'01' to z'1A', codes are assigned only to Ctrl + Alphabet.

\shiyorei{\verb|call ggetch(nwin,key)|}
%
\subsubsection{ggetevent(nw,ntype,nbutton,xg,yg)}
\label{f_ggetevent}

\kino{Return input information from the mouse or the keyboard}

%ProCALLで開いたすべてのウィンドゥからの
%マウスやキーボードの入力情報を返します．
%ブロッキングモード(デフォルト)では入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐにこのルーチンから
%戻ります(動作モードについては\S \ref{f_gsetnonblock}のgsetnonblock
%ルーチンを参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，負の値が
%{\tt nw}に返ります．
This routine returns input information from the mouse 
or the keyboard from all windows opened in ProCALL.
While it waits until an input occurs in the blocking mode (default), 
it finishes immediately whether an input occurs or not in the non-blocking mode. 
(See gsetnonblock in \S \ref{f_gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

%{\tt nw}には，入力のあったウィンドゥ番号が返るので，
%ユーザ・プログラム側で
%意図したウィンドゥからの入力かどうかをチェックできます．
The values returned to {\tt nw} is the index of a window where an input occurred.
By using this value, check whether the input occurred in the intended window in a user's program or not.

%{\tt ntype}には，
%マウスのモーションの場合は{\tt 6}，
%マウスのボタンが押された場合は{\tt 4}，
%マウスのボタンが離された場合は{\tt 5}，
%キーボードからの入力の場合は{\tt 2}
%が返ります．
The value returned to {\tt ntype} are 
{\tt 6} for mouse motion, 
{\tt 4} where the mouse button is clicked, 
{\tt 5} where the mouse button is released, 
or {\tt 2} in the case of input from the keyboard.

%マウスの入力の場合，
%{\tt nbutton}にはクリック(on・off)された，または押されている
%ボタンの番号({\tt 1,2,3,}…)が代入され，
%ウィンドゥ上でのマウスポインタの座標(アプリケーション座標系)
%が{\tt xg}，{\tt yg}に代入されます．
For input from the mouse, the values assigned to {\tt nbutton} are click on/off or the clicked button ({\tt 1, 2, 3,}...). The mouse pointer position (in the application coordinate system) upon clicking is returned to {\tt xg}, {\tt yg}.

%キー入力の場合は，キーコードが{\tt nbutton}に返ります．
%このキーコードはggetchルーチン(\S\ref{f_ggetch})
%の{\tt key}と同一です．
For key input, the key code is returned to {\tt nbutton}.
The key code is the same as the {\tt key} of the ggetch (\S\ref{f_ggetch}).

\shiyorei{\verb|call ggetevent(nwin,ntype,nb,x,y)|}
%
\subsubsection{ggetxpress(nw,ntype,nbutton,xg,yg)}
\label{f_ggetxpress}

\kino{Return information of clicking mouse buttons or input from the keyboard}

%ProCALLで開いたすべてのウィンドゥからの
%マウスのボタンクリック，キータイプの入力情報を返します．
%ブロッキングモード(デフォルト)では入力があるまで待ち続けますが，
%ノンブロッキングモードでは入力の有無にかかわらずすぐにこのルーチンから
%戻ります(動作モードについては\S \ref{f_gsetnonblock}のgsetnonblock
%ルーチンを参照してください)．
%ノンブロッキングモードにおいて入力が無かった場合は，{\tt nw}に
%負の値が返ります．
This routine returns information of clicking mouse buttons or input 
from the keyboard from all windows opened with ProCALL.
While it waits until an input occurs in the blocking mode (default), 
it finishes immediately whether an input occurs or not in the non-blocking mode. 
(See gsetnonblock in \S \ref{f_gsetnonblock} for the operation mode.)
A negative value is returned if any input does not occur in the non-blocking mode.

%{\tt nw}には，入力のあったウィンドゥ番号が返るので，
%ユーザ・プログラム側で
%意図したウィンドゥからの入力かどうかをチェックできます．
The index of a window where an input occurred is returned to {\tt nw}.
By using this value, check whether the input occurred in the intended window in a user's program or not.

%マウスのボタンクリックがあった場合，{\tt ntype}には
%{\tt 4}が代入され，キーボードからの入力の場合は{\tt 2}が代入されます．
The values assigned to {\tt ntype} are {\tt 4} for clicking mouse buttons or {\tt 2} for input from the keyboard.

%マウスのボタンクリックの場合，{\tt nbutton}には
%クリックされたボタンの番号({\tt 1,2,3,}…)，
%クリックされた時のウィンドゥ上でのマウスポインタの座標
%(アプリケーション座標系)が{\tt xg}，{\tt yg}に代入されます．
For clicking mouse buttons, the index of the clicked button ({\tt 1, 2, 3,}...) and the mouse pointer position (in the application coordinate system) upon clicking are returned to {\tt nbutton} and {\tt xg}, {\tt yg}, respectively.

%キー入力の場合は，キーコードが{\tt nbutton}に返ります．
%このキーコードはggetchルーチン(\S\ref{f_ggetch})
%の{\tt key}と同一です．
For key input, the key code is returned to {\tt nbutton}.
The key code is the same as the {\tt key} of the ggetch (\S\ref{f_ggetch}).

\shiyorei{\verb|call ggetxpress(nwin,ntype,nb,x,y)|}
%
\subsubsection{selwin(nw)}
\label{f_selwin}

\kino{Specify a window to be drawn}

%カルコンプ互換ルーチンでどのウィンドゥにアクセスするかを指定します．
%{\tt nw}には{\tt gopen}(\S\ref{f_gopen})で得た，ウィンドゥ番号を指定します．
%なお，
%カルコンプ互換ルーチンの{\tt plots}(\S\ref{f_plots})
%で開いたウィンドゥの番号は{\tt 0}となります．
%デフォルトは{\tt 0}です．
By using this routine, specify which window you access for CALCOMP-compatible routines.
Set the window index acquired through {\tt gopen} (\S\ref{f_gopen}) for {\tt nw}.
The window index opened with the CALCOMP-compatible routine {\tt plots} (\S\ref{f_plots}) is set to {\tt 0}.
The default value is {\tt 0}.

\shiyorei{\verb|call selwin(nwin)|}
%
%
\subsection{CALCOMP COMPATIBLE ROUTINES REFERENCE}

%Pro-FORTRANとコンパチブルなルーチン群です．
%Pro-FORTRANや他のGKS，カルコンプ互換のFORTRANから移行する
%場合以外は，必要としないと思われます．
Routines described in this section are Pro-FORTRAN-compatible routines. 
They might not be necessary except in the case of transitions from Pro-FORTRAN, other GKS or CalComp-compatible FORTRAN.

\subsubsection{plots}
\label{f_plots}

\kino{Open a window for graphics}

%このルーチンを呼ぶことで，グラフィックス用ウィンドウを開きます．
%グラフィックスエリア(ウィンドゥサイズ)は640×400ピクセルです．
%グラフィックスエリアを任意にとりたい場合や
%複数のウィンドウを開きたい場合は{\tt call gopen}を使用してください．
A window for graphics is opened by calling this routine. 
The graphics area (window size) is 640×400 pixels.
Use {\tt call gopen} to specify the graphics area or to open multiple windows.

%なお，plotsルーチンで呼び出したProCALLでのウィンドゥ番号は0
%となります(ProCALL標準ルーチンのウィンドウ番号{\tt nw}には{\tt 0}
%を指定します)．
A window index number of a window called by {\tt plots} in ProCALL is 0. (Specify {\tt 0} for the window index number {\tt nw} in ProCALL standard routines.)

\shiyorei{\verb|call plots|}
%
\subsubsection{window(xs,ys,xe,ye)}
\label{f_window}

\kino{Change a coordinate system}

%ウィンドゥ上のウィンドゥ座標系(座標値は整数)は，左下が({\tt 0}, {\tt 0})で，
%右上が({\tt 639}, {\tt 399})であり，デフォルトでは
%アプリケーション座標系(座標値は実数)の座標値は
%ウィンドゥ座標系のそれに一致しています．
In the window coordinate system (whose value is an integer), the bottom-left corner is (0, 0) and the top-right corner is (639, 399).
A coordinate value of the application coordinate system (whose value is a real number) equals to that of the window coordinate system.

%windowルーチンを使う事により，
%アプリケーション座標系の左下
%(つまりウィンドゥ座標系での({\tt 0}, {\tt 0}))を({\tt xs}, {\tt ys})，
%右上を({\tt xe}, {\tt ye})に変更できます．
The bottom-left corner (({\tt 0}, {\tt 0}) in the window coordinate system) and the top-right corner in the application coordinate system can be changed to ({\tt xs}, {\tt ys}) and ({\tt xe}, {\tt ye}), respectively, by using the {\tt window} routine.

%下の使用例では，アプリケーション座標系の左下を(-2.0, -1.0)，
%右上を(5.0, 4.0)に変更します．
In the following example, the bottom-left corner and the top-right corner in the application coordinate system are changed to (-2.0, -1.0) and (5.0, 4.0), respectively.

\shiyorei{\verb|call window(-2.0, -1.0, 5.0, 4.0)|}
%
\subsubsection{newpen(nc)}
\label{f_newpen}

\kino{Change a drawing color}

%plotなどでの描画色を変更します．ncと色との関係は以下の通りです．
This routine changes a drawing color in plot, etc.
The correspondence between {\tt nc} and the colors is as follows:

\begin{tabular}{llllllll}
{\tt 0}: Black &
{\tt 1}: White &
{\tt 2}: Red &
{\tt 3}: Green &
{\tt 4}: Blue &
{\tt 5}: Cyan &
{\tt 6}: Magenta &
{\tt 7}: Yellow\\
{\tt 8}: DimGray &
{\tt 9}: Gray &
{\tt 10}: red4 &
{\tt 11}: green4 &
{\tt 12}: blue4 &
{\tt 13}: cyan4 &
{\tt 14}: magenta4 &
{\tt 15}: yellow4\\
\end{tabular}\\
%
%red4，green4…の``4''のつく色は，
%暗い赤，暗い緑…となっています．
The colors end with letter ``4'' such as red4 and green4 are dark red and dark green. 

%デフォルトでは，白が指定されています．
White is set by default.

\shiyorei{\verb|call newpen(2)|}

\gokansei{The colors 8 to 15 cannot be used in the original Pro-FORTRAN. }
%
\subsubsection{clsc}
\label{f_clsc}

\kino{Clear a terminal}

%端末をクリアし，カーソルの位置をホームポジションに戻します．
This routine clears a terminal and restores a cursor position to the home position.

\shiyorei{\verb|call clsc|}
%
\subsubsection{clsx}
\label{f_clsx}

\kino{Clear a graphics display}

\shiyorei{\verb|call clsx|}
%
\subsubsection{plot(xg,yg,mode)}
\label{f_plot}

\kino{Draw a line or a point}

%{\tt mode}に{\tt 2}を指定すると以前{\tt plot}が呼ばれた点から，
%({\tt xg}, {\tt yg})へ直線を引きます．
%{\tt mode}に{\tt 3}を指定すると({\tt xg}, {\tt yg})を
%plotルーチンの初期位置に設定します．
%{\tt mode=2}でペンを下ろして描画，
%{\tt mode=3}でペンを上げて移動と考えるとわかりやすいでしょう．
This routine draws a line from the point specified when it was called previously to ({\tt xg}, {\tt yg}) if {\tt 2} is set for {\tt mode}.
({\tt xg}, {\tt yg}) is set as the initial position of {\tt plot} if {\tt 3} is set for {\tt mode}.
It might make sense that this routine lowering a pen and drawing somethig where {\tt mode=2} and lifting and moving a pen where {\tt mode=3}.

%また，{\tt mode}={\tt 1}の場合は ({\tt xg}, {\tt yg}) に点を描き，
%ペンの位置を更新します．
Additionally, in the case of {\tt mode=1}, it draws a point at ({\tt xg}, {\tt yg}) and update the pen position.

%{\tt xg}，{\tt yg}は実数型の引数です．
{\tt xg} and {\tt yg} are real number type arguments.

\shiyorei{\verb|call plot(x,y,2)|}

%\gokansei{　{\tt mode}={\tt 1}は本家Pro-FORTRANでは使用できません．}
\gokansei{{\tt mode}={\tt 1} is not available in the original Pro-FORTRAN.}
%
\subsubsection{arc(xcen,ycen,rad,sang,eang,idir)}
\label{f_arc}

\kino{Draw an arc% by specifying the center and radius of a circle and the angle of the starting point and the ending point}
}

%({\tt xcen}, {\tt ycen})を中心に半径{\tt rad}の円弧を描きます．
%{\tt sang}は開始角，{\tt eang}は終了角で，度で与えます．
%{\tt idir}は円弧を描く方向で{\tt 1}で左廻り，{\tt -1}で右廻りとなります．
This routine draws an arc with ({\tt xcen}, {\tt ycen}) as a center and {\tt rad} as a radius.
{\tt sang} and {\tt eang} are the angle to start and to end, respectively, expressed in degrees.
{\tt idir} is a direction to draw the arc to. 
When {\tt 1} is set for {\tt idir} it draws the arc counterclockwise, and when {\tt -1} is set it draws the arc clockwise.

\shiyorei{\verb|call arc(50.0,60.0,30.0,-10.0,-170.0,-1)|}
%
\subsubsection{circ1(xc,yc,r)}
\label{f_circ1}

\kino{Draw a circle by specifying the center coordinate and the radius}

%({\tt xc}, {\tt yc})を中心に半径{\tt r}の円を描きます．
This routine draws a circle with ({\tt xc}, {\tt yc}) as a center and {\tt r} as a radius.

\shiyorei{\verb|call circ1(50.0,60.0,30.0)|}
%
\subsubsection{arohd(xs,ys,xt,yt,s,w,10{\tt *}i+j)}
\label{f_arohd}

\kino{Draw various types of arrows}

%({\tt xs}, {\tt ys})から({\tt xe}, {\tt ye})に向かって矢印を描きます．
%矢印の形状は以下の図の通りで，{\tt s}と{\tt w}は実数で指定します．
%{\tt i}が{\tt 0}〜{\tt 2}の場合には{\tt w},{\tt s}はピクセル数を，
%{\tt i}が{\tt 10}〜{\tt 12}の場合には{\tt w},{\tt s}は矢印の長さに対する
%割合で{\tt 0.0}〜{\tt 1.0}の値を指定します．
This routine draws an arrow from ({\tt xs}, {\tt ys}) to ({\tt xe}, {\tt ye}).
Specify {\tt s} and {\tt w} in real numbers to decide the shape of the arrow as follows.
When {\tt i} is in the range of {\tt 0} to {\tt 2}, set dot numbers for {\tt w} and {\tt s}.
When {\tt i} is in the range of {\tt 10} to {\tt 12}, set the ratios against the arrow length in the range of {\tt 0.0} to {\tt 1.0}.

\begin{center}
\includegraphics[scale=0.7]{procall_arohd0.eps}
\end{center}

\shiyorei{\verb|call arohd(x0,y0,x1,y1,0.3,0.2,114)|}

%\gokansei{　{\tt i}={\tt 10}〜{\tt 12}は本家Pro-FORTRANでは使用できません．
%本家Pro-FORTRANでは{\tt window}の指定
%によって実際に描画される矢印の先端の大きさが変化しますが，
%ProCALLでは変化しません．
%}
\gokansei{
{\tt i}={\tt 10} to {\tt 12} are not available in the original Pro-FORTRAN. 
In the original Pro-FORTRAN, the size of the symbol actually drawn is changed by specifying {\tt window}, 
however, it is not changed in ProCALL.
}
%
\subsubsection{symbol(xg,yg,size,nstr,theta,len)}
\label{f_symbol}

\kino{Draw a string or a center symbol}

%文字列またはセンターシンボルを座標({\tt xg}, {\tt yg})に描きます．
%{\tt size}は文字列・シンボルの大きさで，ピクセル単位の実数で指定します．
%文字列を描く場合は{\tt len}に文字列の長さ(整数)を，
%{\tt nstr}に文字列を与えます．
%センターシンボルを描く場合は{\tt len}に{\tt -1}を指定し，
%{\tt nstr}にシンボルの番号{\tt 1}〜{\tt 10}の整数を与えます．
This routine draws a string or a center symbol at the position ({\tt xg}, {\tt yg}).
Set a real number in dots for {\tt size} to specify the size of a string or a symbol.
To draw a string, set the string length (integer) for {\tt len} and the string to {\tt nstr}.
To draw a  symbol, set {\tt -1} for {\tt len} and the index of the symbol (integer from {\tt 1} to {\tt 10}) for {\tt nstr}.

%文字のサイズ{\tt size}は{\tt 1}〜{\tt 24}の範囲で指定できます．
%{\tt size}と実際のフォントとの関係は以下のようになっています．
%文字は半角英数字ならすべて描画できる上，
%本家Pro-FORTRANより綺麗です．
Character size {\tt size} can be specified in the range of {\tt 1} to {\tt 24}.
The correspondence between {\tt size} and the actual font is as follows.
As for characters, all of English one byte characters can be drawn.
Furthermore, they are clearer than those in the original Pro-FORTRAN. 

\setlength{\tabcolsep}{1.5mm}
\setlength{\arrayrulewidth}{0.1mm}

\begin{center}
\begin{tabular}{|ccc|ccc|ccc|ccc|ccc|}
  \hline 
 {\tt 1}〜{\tt 7}&:& $5 \times 7$ &
 {\tt 8}&:& $5 \times 8$ &
 {\tt 9}&:& $6 \times 9$ &
 {\tt 10}〜{\tt 11}&:& $6 \times 10$ &
 {\tt 12}&:& $6 \times 12$  \\
 \hline
 {\tt 13}&:& $7 \times 13$ &
 {\tt 14}〜{\tt 15}&:& $7 \times 14$ &
 {\tt 16}〜{\tt 19}&:& $8 \times 16$ &
 {\tt 20}〜{\tt 23}&:& $10 \times 20$ &
 {\tt 24}&:& $12 \times 24$ \\
  \hline 
\end{tabular}
\end{center}

%{\tt nstr}とシンボルの関係は，次の図のとおりです．
The correspondence between {\tt nstr} and the symbols is as follows: 

\begin{center}
\includegraphics[scale=0.8]{syms.eps}
\end{center}

%なお，このルーチンは4番目の引数に，文字列型と整数型の両方をとります．
%この{\tt symbol}を使って文字列，シンボルの両方を描くように作成された
%ソースでは，コンパイルすると Warning が出てきます．
%このWarningはかなり目障りなので，
%本家Pro-FORTRANでコンパイルしない場合は，ProCALL標準ルーチン
%{\tt drawstr}(文字列を描く), 
%{\tt drawsym}(シンボルを描く)の使用を推奨します．
The fourth argument of this routine can be both string type and integer type.
``Warning'' will appear when compiling a source coded to draw both a string and a symbol by using this {\tt symbol}.
Since this ``Warning'' is quite annoying, we recommend the use of ProCALL standard routines {\tt drawstr} (draw a string) and {\tt drawsym} (draw a symbol) unless you compile in the original Pro-FORTRAN.

%\shiyorei{\verb|call symbol(x,y,16,'Hoge',0.0,4)|\\
%　　　　　\hspace{2.2mm}\verb|call symbol(x,y,16,2,0.0,-1)|}
\vspace{-\baselineskip}
\shiyorei{
\begin{tabular}{l}\\
\verb|call symbol(x,y,16.0,'Hoge',0.0,4)| \\
\verb|call symbol(x,y,16.0,2,0.0,-1)| \\
\end{tabular}
%

%\gokansei{　本家Pro-FORTRANでは{\tt window}の指定
%          によって実際に描画されるシンボルの大きさが変化しますが，
%	  ProCALLでは変化しません．
%
%	  24より大きい文字サイズは12×24ドットフォント固定となります．
%          アルファベットの小文字と一部の記号は本家Pro-FORTRANでは出力
%	  できません．
%	  {\tt theta}は文字列の回転を指定する実数の引数ですが，
%	  現バージョンでは機能しません．
%}
\gokansei{In the original Pro-FORTRAN the size of the symbol actually drawn is changed by specifying {\tt window}, 
however, it is not changed in ProCALL.

Any character size greater than 24 is fixed to a 12 × 24 dot font.
Lower-case alphabets and some symbols cannot be displayed in the original Pro-FORTRAN.
The real number type argument {\tt theta} to specify the rotation of a string is disabled in the current version.
}
%
\subsubsection{number(xg,yg,size,v,theta,n)}
\label{f_number}

\kino{Draw a value of a variables}

%実数型変数{\tt v}の値を座標({\tt xg}, {\tt yg})から描きます．
%{\tt size}は文字列の大きさで，ピクセル単位の実数で指定します．
%{\tt n}は表示する小数点の桁数で，整数値を与えます．
This routine draws the value of the real number type variable {\tt v} at the position ({\tt xg}, {\tt yg}).
Set a real number in dots for {\tt size} to specify the size of a string.
Set an integer value for {\ n} to specify the number of decimal places of the value to be displayed.

\shiyorei{\verb|call number(x,y,16.0,prm,0.0,3)|}

\gokansei{Any character size greater than 24 is fixed to a 12 × 24 dot font.
The real number type argument {\tt theta} to specify the rotation of a string is disabled in the current version.
}
%
\subsubsection{vport,setal}

\kino{Dummy routine}

These routines do not work.

\gokansei{Only the formats of these routines are being kept so that a Pro-FORTRAN source code can be compiled as it is.}

%
%
%
\subsection{AUXILIARY ROUTINES REFERENCE}
%
Routines described here are offered to resolve inconvenience caused by FORTRAN as much as possible.
%
\subsubsection{msleep(ms)}
\label{f_msleep}

\kino{Wait an execution in milliseconds}

%{\tt ms}ミリ秒の間，プログラムの実行をなにもせずに待ちます．
%{\tt ms}には{999}までの整数を指定します．
%アニメーション速度の調整に利用できます．
This routine waits for {\tt ms} millisecond doing nothing.
Set an integer value up to 999 for {\tt ms}.
This can be used for adjusting animation speed.

\shiyorei{\verb|call msleep(100)|}
%
\subsubsection{isnan(v,iflg)}
\label{f_isnan}

\kino{Check whether a real number variable is Not a Number}

%実数型変数{\tt v}を非数かどうかを調べ，非数なら{\tt iflg}に0以外の
%整数値を返します．
This routine checks whether a real number variable {\tt v} is Not a Number (NaN), and returns an integer value other than 0 to {\tt iflg} if {\tt v} is NaN.

\shiyorei{\verb|call isnan(x,nf)|}
%
\subsubsection{rtoc(v,n,ns,str,m)}
\label{f_rtoc}

\kino{Convert a real number variable to a string}

%実数型変数{\tt v}を小数点{\tt n}桁まで文字列に変換し，
%区切り文字{\tt '$\backslash$0'}を最後に付け足して
%文字型変数{\tt str}に格納します．
%{\tt ns}は{\tt str}
%で確保されている文字数を指定します．
%{\tt m}には{\tt str}に文字列を格納した時に
%余った文字数(整数値)を返し，
%この値が負の場合は{\tt str}で確保されている文字数が足りなかった事を
%示します．
This routine converts a real number {\tt v} into a string with {\tt n} decimal places, and stores it to {\tt str} after adding the delimiter {\tt '$\backslash$0'} to the end of it.
Set a number of characters of {\tt str} for {\tt ns}.
An excess number of characters (integer) in storing the string to {\tt str} is returned to {\tt m}.
If this value is negative, it is indicated that the number of characters of {\tt str} is not enough to store the whole string.

\shiyorei{\verb|call rtoc(x,4,10,st,m)|}
%
%
%
\end{document}
